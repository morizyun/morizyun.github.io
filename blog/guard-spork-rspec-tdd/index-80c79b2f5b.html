<!DOCTYPE html>
<html lang="ja">
<head prefix="og: http://ogp.me/ns#"><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  <title>RSpec/Spork/Guard/Growl/Rails 3.2.11で作る - プリチーなTDD環境！　 | 酒と涙とRubyとRailsと</title>
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- Canonical links -->
  <link rel="canonical" href="http://morizyun.github.io//blog/guard-spork-rspec-tdd/index-80c79b2f5b.html">
  <!-- Alternative links -->
  
  <!-- Icon -->
  <link rel="shortcut icon" type="image/vnd.microsoft.icon" href="/favicon.ico">
  <link rel="icon" type="image/vnd.microsoft.icon" href="/favicon.ico">
  <link rel="apple-touch-icon" sizes="57x57" href="/icon/apple-touch-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icon/apple-touch-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icon/apple-touch-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icon/apple-touch-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icon/apple-touch-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icon/apple-touch-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icon/apple-touch-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icon/apple-touch-icon-152x152.png">
  <link rel="icon" type="image/png" href="/icon/favicon-196x196.png" sizes="196x196">
  <link rel="icon" type="image/png" href="/icon/favicon-160x160.png" sizes="160x160">
  <link rel="icon" type="image/png" href="/icon/favicon-96x96.png" sizes="96x96">
  <link rel="icon" type="image/png" href="/icon/favicon-16x16.png" sizes="16x16">
  <link rel="icon" type="image/png" href="/icon/favicon-32x32.png" sizes="32x32">
  <link rel="manifest" href="/manifest.json">
  <meta name="msapplication-TileColor" content="#2f83cd">
  <meta name="msapplication-TileImage" content="/icon/mstile-144x144.png">
  <!-- CSS -->
  <link rel="stylesheet" href="build/css/navy.css">
  <link href="https://fonts.googleapis.com/css?family=Lato:300,400,700" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css">
  <!-- RSS -->
  <link rel="alternate" href="/atom.xml" title="酒と涙とRubyとRailsと">
  <!-- Open Graph -->
  <meta name="description" content="「ぷりちー」なRailsのTDD環境をオレオレ定義してみました！  * Guardをつかったファイル更新監視 * RSpec/Spork/LiveReload/Powが自動で動作 * Growlでテスト結果の通知をで行う(For Mac)   今回はこのTDD環境の構築手順を書いてみます。">
<meta name="keywords" content="Rails,Gem,RSpec,TDD,Pry">
<meta property="og:type" content="article">
<meta property="og:title" content="RSpec&#x2F;Spork&#x2F;Guard&#x2F;Growl&#x2F;Rails 3.2.11で作る - プリチーなTDD環境！　">
<meta property="og:url" content="http://morizyun.github.io//blog/guard-spork-rspec-tdd/index-80c79b2f5b.html">
<meta property="og:site_name" content="酒と涙とRubyとRailsと">
<meta property="og:description" content="「ぷりちー」なRailsのTDD環境をオレオレ定義してみました！  * Guardをつかったファイル更新監視 * RSpec/Spork/LiveReload/Powが自動で動作 * Growlでテスト結果の通知をで行う(For Mac)   今回はこのTDD環境の構築手順を書いてみます。">
<meta property="og:locale" content="ja">
<meta property="og:image" content="https://morizyun.github.io/img/og_image.png">
<meta property="og:updated_time" content="2017-08-11T00:55:45.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="RSpec&#x2F;Spork&#x2F;Guard&#x2F;Growl&#x2F;Rails 3.2.11で作る - プリチーなTDD環境！　">
<meta name="twitter:description" content="「ぷりちー」なRailsのTDD環境をオレオレ定義してみました！  * Guardをつかったファイル更新監視 * RSpec/Spork/LiveReload/Powが自動で動作 * Growlでテスト結果の通知をで行う(For Mac)   今回はこのTDD環境の構築手順を書いてみます。">
<meta name="twitter:image" content="https://morizyun.github.io/img/og_image.png">
<meta name="twitter:site" content="zyunnosuke">
<meta property="fb:app_id" content="183897648417956">
  <!-- Google Analytics -->
  
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-36299115-2', 'auto');
  ga('send', 'pageview');
</script>

  <!-- Github Button -->
  <script async defer src="https://buttons.github.io/buttons.js"></script>
</head>

<body>
  <div id="container">
    <header id="header" class="wrapper">
  <div id="header-inner" class="inner">
    <h1 id="logo-wrap">
      <a href="/" id="logo">酒と泪とRubyとRailsと</a>
    </h1>
    <nav id="main-nav">
      <a href="//ruby/design-pattern-index-9b183c73c8.html" class="main-nav-link">Ruby</a><a href="//docker/about-index-bac3d94263.html" class="main-nav-link">Docker</a><a href="//digdag/index-8051f4161f.html" class="main-nav-link">Digdag</a><a href="//cs/breadth-first-search-f89255599f.html" class="main-nav-link">CS</a><a href="/java/" class="main-nav-link">Java</a><a href="//scala/basic-grammer-991dfec1a6.html" class="main-nav-link">Scala</a><a href="//javascript/basic-string-7ced2a03c9.html" class="main-nav-link">JS</a><a href="//infrastructure/basic-index-557a455059.html" class="main-nav-link">インフラ</a><a href="//database/postgresql-basic-architecture-14bd4c81c8.html" class="main-nav-link">DB</a><a href="//web/http-index-5721109e6c.html" class="main-nav-link">Web</a><a href="/blog/" class="main-nav-link">Blog</a>
      <div id="search-input-wrap">
        <div id="search-input-icon">
          <i class="fa fa-search"></i>
        </div>
        <form id="cse-search-box" action="//google.com/cse" style="display: inline-block;">
          <input type="hidden" name="cx" value="001974309344846181418:wzqpqcmv-zs">
          <input type="hidden" name="ie" value="UTF-8">
          <input type="search" id="search-input" name="q" placeholder="検索" style="width: 100px;">
        </form>
      </div>
    </nav>
    <div id="lang-select-wrap">
      <label id="lang-select-label"><i class="fa fa-globe"></i><span>日本語</span></label>
      <select id="lang-select" data-canonical>
        
          <option value="ja" selected>日本語</option>
        
        <option value="redirect/english_blog">English</option>
      </select>
    </div>
    <a id="mobile-nav-toggle">
      <span class="mobile-nav-toggle-bar"></span>
      <span class="mobile-nav-toggle-bar"></span>
      <span class="mobile-nav-toggle-bar"></span>
    </a>
  </div>
</header>

    <div id="content-wrap">
  <div class="wrapper">
    <div class="inner">
      <article class="article post" itemscope itemtype="http://schema.org/Article">
  <header class="article-header">
    
      <h1 class="article-title" itemprop="name">RSpec/Spork/Guard/Growl/Rails 3.2.11で作る - プリチーなTDD環境！　</h1>
    
    <a href="/blog/guard-spork-rspec-tdd/" class="article-date"><time datetime="2012-11-28T15:00:00.000Z">2012-11-29</time></a>
    <div class="sharing social_box">
  <ul class="social" style="margin-left: 0;margin-top: 10px;">
    <li class="hatena">
      <a href="//b.hatena.ne.jp/entry/http://morizyun.github.io/blog/guard-spork-rspec-tdd/" class="hatena-bookmark-button" data-hatena-bookmark-layout="basic-counter" title="このエントリーをはてなブックマークに追加"><img src="https://b.st-hatena.com/images/entry-button/button-only@2x.png" alt="このエントリーをはてなブックマークに追加" width="20" height="20" style="border: none;"></a><script type="text/javascript" src="https://b.st-hatena.com/js/bookmark_button.js" charset="utf-8" async="async"></script>
    </li>
    <li class="twitter">
      <a href="//twitter.com/share" class="twitter-share-button" data-url="http://morizyun.github.io/blog/guard-spork-rspec-tdd/" data-via="zyunnosuke" data-counturl="http://morizyun.github.io/blog/guard-spork-rspec-tdd/">Tweet</a>
      <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+"://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
    </li>
    <li class="facebook">
      <div class="fb-like" data-send="false" data-layout="button_count" data-show-faces="false" data-font="verdana" data-href="http://morizyun.github.io/blog/guard-spork-rspec-tdd/"></div>
      <div id="fb-root"></div>
      <script>(function(d, s, id) {
          var js, fjs = d.getElementsByTagName(s)[0];
          if (d.getElementById(id)) {return;}
          js = d.createElement(s); js.id = id;
          js.src = "//connect.facebook.net/ja_JP/all.js#appId=183897648417956&xfbml=1";
          fjs.parentNode.insertBefore(js, fjs);
      }(document, 'script', 'facebook-jssdk'));</script>
    </li>
    <li class="feedly">
      <a href="https://feedly.com/i/discover/sources/search/morizyun.github.io" target="blank"><img id="theButton" src="https://s3.feedly.com/img/follows/feedly-follow-rectangle-flat-small_2x.png" alt="follow" width="66" height="20"></a>
    </li>
  </ul>
</div>
<br style="clear=both;">

  </header>
  <div class="article-content" itemprop="articleBody">
    <html><head><meta name="generator" content="Hexo 3.8.0"></head><body><p><a href="<%= config.url %><%- url_for(post.path) %>" title="by morizyun,"></a></p>
<p>「ぷりちー」なRailsのTDD環境をオレオレ定義してみました！</p>
<pre>* Guardをつかったファイル更新監視
* RSpec/Spork/LiveReload/Powが自動で動作
* Growlでテスト結果の通知をで行う(For Mac)
</pre>

<p>今回はこのTDD環境の構築手順を書いてみます。</p>
<br style="clear:both;"><div style="margin: 5px 0 30px 0">
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <!-- responsive-auto -->
    <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4186413323075068" data-ad-slot="4457377393" data-ad-format="auto"></ins>
    <script>
        (adsbygoogle = window.adsbygoogle || []).push({});
    </script>
</div>

<h2 id="Gemfileの更新" class="article-heading"> 😎 <a href="#Gemfileの更新" class="headerlink" title="Gemfileの更新"></a>Gemfileの更新<a class="article-anchor" href="#Gemfileの更新" aria-hidden="true"></a></h2><p><code>Gemfile</code>に次の内容を追加して、<code>bundle install</code>を実行。</p>
<figure class="highlight plain"><table><tbody><tr><td class="code"><pre><span class="line">group :development do</span><br><span class="line">  # viewやcssの変更を監視してブラウザを自動的にリロードする</span><br><span class="line">  gem 'guard-livereload'</span><br><span class="line">  gem 'em-websocket'</span><br><span class="line">end</span><br><span class="line"></span><br><span class="line">group :test do</span><br><span class="line">  # HTTP requests用のモックアップを作ってくれる</span><br><span class="line">  gem 'webmock'</span><br><span class="line"></span><br><span class="line">  # 便利マッチャー集</span><br><span class="line">  gem "shoulda-matchers"</span><br><span class="line">end</span><br><span class="line"></span><br><span class="line">group :development, :test do</span><br><span class="line">  # ファイルの変更を監視してPowサーバを再起動</span><br><span class="line">  gem 'guard-pow'</span><br><span class="line"></span><br><span class="line">  # Rspec</span><br><span class="line">  gem 'rspec-rails'</span><br><span class="line"></span><br><span class="line">  # fixtureの代わり</span><br><span class="line">  gem "factory_girl_rails"</span><br><span class="line"></span><br><span class="line">  # テスト環境のテーブルをきれいにする</span><br><span class="line">  gem 'database_cleaner'</span><br><span class="line"></span><br><span class="line">  # 設定をロードしたサーバーによってテストを高速化</span><br><span class="line">  gem 'spork'</span><br><span class="line"></span><br><span class="line">  # ファイルの変更を検知する。OSX用</span><br><span class="line">  gem 'rb-fsevent'</span><br><span class="line"></span><br><span class="line">  # テスト結果をGrowlで通知する(Lion向け)</span><br><span class="line">  #gem 'growl'</span><br><span class="line"></span><br><span class="line">  # テスト結果を通知センターに表示する(Mountain Lion向け)</span><br><span class="line">  gem 'terminal-notifier-guard'</span><br><span class="line"></span><br><span class="line">  # ファイルの変更を監視してテストを自動化</span><br><span class="line">  gem 'guard-rspec'</span><br><span class="line"></span><br><span class="line">  # 設定ファイルの変更を監視してテストサーバーを再起動</span><br><span class="line">  gem 'guard-spork'</span><br><span class="line"></span><br><span class="line">  # Gemfileを監視して、変更があったら自動でbundle installを実行</span><br><span class="line">  gem 'guard-bundler'</span><br><span class="line"></span><br><span class="line">  # Railsコンソールの多機能版</span><br><span class="line">  gem 'pry-rails'</span><br><span class="line"></span><br><span class="line">  # pryの入力に色付け</span><br><span class="line">  gem 'pry-coolline'</span><br><span class="line"></span><br><span class="line">  # コードに"binding.remote_pry(rspec内ではbinding.pry_remote)" => pry-remoteでpryに入れます。</span><br><span class="line">  gem 'pry-remote'</span><br><span class="line">  gem "pry-debugger"</span><br><span class="line">  gem "pry-doc"</span><br><span class="line">  gem 'pry-stack_explorer'</span><br><span class="line"></span><br><span class="line">  # PryでのSQLの結果を綺麗に表示</span><br><span class="line">  gem 'hirb'</span><br><span class="line">  gem 'hirb-unicode'</span><br><span class="line"></span><br><span class="line">  # pryの色付けをしてくれる</span><br><span class="line">  gem 'awesome_print'</span><br><span class="line">end</span><br></pre></td></tr></tbody></table></figure>
<h2 id="application-rbの設定" class="article-heading">🐠 <a href="#application-rbの設定" class="headerlink" title="application.rbの設定"></a>application.rbの設定<a class="article-anchor" href="#application-rbの設定" aria-hidden="true"></a></h2><p><code>config/application.rb</code>内の<code>class Application < Rails::Application</code>内に次の内容を追加。(設定は任意で変更してください)</p>
<figure class="highlight plain"><table><tbody><tr><td class="code"><pre><span class="line"># generatorの設定</span><br><span class="line">config.generators do |g|</span><br><span class="line">  g.test_framework  :rspec, :fixture => true</span><br><span class="line">  g.fixture_replacement :factory_girl, :dir => "spec/factories"</span><br><span class="line">  g.view_specs false</span><br><span class="line">  g.controller_specs false</span><br><span class="line">  g.helper_specs false</span><br><span class="line">  g.routing_specs false</span><br><span class="line">  g.request_specs false</span><br><span class="line">end</span><br></pre></td></tr></tbody></table></figure>
<h2 id="config-environments-test-rbの設定" class="article-heading"> 🐰 <a href="#config-environments-test-rbの設定" class="headerlink" title="config/environments/test.rbの設定"></a>config/environments/test.rbの設定<a class="article-anchor" href="#config-environments-test-rbの設定" aria-hidden="true"></a></h2><p><code>config/environments/test.rb</code>に次の内容を追加。</p>
<figure class="highlight plain"><table><tbody><tr><td class="code"><pre><span class="line">AppName::Application.configure do</span><br><span class="line">  # Spork 使用時にクラスをキャッシュしないようにする</span><br><span class="line">  if defined?(Spork) && Spork.using_spork?</span><br><span class="line">    config.cache_classes = false</span><br><span class="line">  else</span><br><span class="line">    config.cache_classes = true</span><br><span class="line">  end</span><br><span class="line">end</span><br></pre></td></tr></tbody></table></figure>
<h2 id="RSpecの設定" class="article-heading"> 🏀 <a href="#RSpecの設定" class="headerlink" title="RSpecの設定"></a>RSpecの設定<a class="article-anchor" href="#RSpecの設定" aria-hidden="true"></a></h2><p>RailsへのRSpecのインストールとひな型を作成。</p>
<figure class="highlight plain"><table><tbody><tr><td class="code"><pre><span class="line">rails generate rspec:install</span><br></pre></td></tr></tbody></table></figure>
<p><code>.RSpec</code>にはRSpecコマンドの引数を記述できます。次のとおり編集。<br><br>(詳細はRSpec –helpを参照)</p>
<figure class="highlight plain"><table><tbody><tr><td class="code"><pre><span class="line">echo '--color --drb -f d' > .rspec</span><br></pre></td></tr></tbody></table></figure>
<p>RSpecの設定ファイル<code>spec/spec_helper.rb</code>を次のように変更。</p>
<figure class="highlight plain"><table><tbody><tr><td class="code"><pre><span class="line">require 'rubygems'</span><br><span class="line">require 'spork'</span><br><span class="line">require "webmock/rspec"</span><br><span class="line">WebMock.allow_net_connect!</span><br><span class="line">#uncomment the following line to use spork with the debugger</span><br><span class="line">#require 'spork/ext/ruby-debug'</span><br><span class="line"></span><br><span class="line">Spork.prefork do</span><br><span class="line">  # Loading more in this block will cause your tests to run faster. However,</span><br><span class="line">  # if you change any configuration or code from libraries loaded here, you'll</span><br><span class="line">  # need to restart spork for it take effect.</span><br><span class="line">  ENV["RAILS_ENV"] ||= 'test'</span><br><span class="line">  require File.expand_path("../../config/environment", __FILE__)</span><br><span class="line">  require 'rspec/rails'</span><br><span class="line">  require 'rspec/autorun'</span><br><span class="line">  require 'shoulda-matchers'</span><br><span class="line"></span><br><span class="line">  # Requires supporting ruby files with custom matchers and macros, etc,</span><br><span class="line">  # in spec/support/ and its subdirectories.</span><br><span class="line">  Dir[Rails.root.join("spec/support/**/*.rb")].each {|f| require f}</span><br><span class="line"></span><br><span class="line">  RSpec.configure do |config|</span><br><span class="line">    config.infer_base_class_for_anonymous_controllers = false</span><br><span class="line">    config.use_transactional_fixtures = true</span><br><span class="line">    config.order = "random"</span><br><span class="line">    # FactoryGirlのメソッドをbuild, build_stubbed, create, attributes_forなどの省略形で書ける</span><br><span class="line">    config.include FactoryGirl::Syntax::Methods</span><br><span class="line"></span><br><span class="line">    # database_cleanerでテストのたびにDBをクリアする</span><br><span class="line">    require 'database_cleaner'</span><br><span class="line">    config.before(:suite) do</span><br><span class="line">      DatabaseCleaner.strategy = :truncation</span><br><span class="line">      DatabaseCleaner.clean_with(:truncation)</span><br><span class="line">    end</span><br><span class="line"></span><br><span class="line">    config.before(:each) do</span><br><span class="line">      DatabaseCleaner.start</span><br><span class="line">    end</span><br><span class="line"></span><br><span class="line">    config.after(:each) do</span><br><span class="line">      DatabaseCleaner.clean</span><br><span class="line">    end</span><br><span class="line">  end</span><br><span class="line">end</span><br><span class="line"></span><br><span class="line"># This code will be run each time you run your specs.</span><br><span class="line">Spork.each_run do</span><br><span class="line">  # Spork利用時にapp配下/locale/routesをリロード</span><br><span class="line">  if Spork.using_spork?</span><br><span class="line">    Rails.application.reloaders.each{|reloader| reloader.execute_if_updated }</span><br><span class="line">  end</span><br><span class="line">end</span><br></pre></td></tr></tbody></table></figure>
<h2 id="Pryの設定" class="article-heading"> 😸 <a href="#Pryの設定" class="headerlink" title="Pryの設定"></a>Pryの設定<a class="article-anchor" href="#Pryの設定" aria-hidden="true"></a></h2><p><code>config/environments/development.rb</code>の中の<code>YourAppName::Application.configure</code>に以下を追加。</p>
<figure class="highlight plain"><table><tbody><tr><td class="code"><pre><span class="line">silence_warnings do</span><br><span class="line">  begin</span><br><span class="line">    require 'pry'</span><br><span class="line">    IRB = Pry</span><br><span class="line">  rescue LoadError</span><br><span class="line">  end</span><br><span class="line">end</span><br></pre></td></tr></tbody></table></figure>
<p>これで、<code>rails c</code>とした場合に<code>pry</code>が呼び出されます。</p>
<p>またコード内でデバッグを行いた場所に<code>binding.pry_remote</code>を追加した場合、処理が途中で停止します。そこで<code>pry-remote</code>を打つと<code>pry</code>画面に入れます。<br>(guardで動いている場合は、<code>binding.pryでguard</code>から直接pryに進むっぽいです)</p>
<p>続いて、<code>~/.pryrc</code>に以下を追記。</p>
<figure class="highlight plain"><table><tbody><tr><td class="code"><pre><span class="line"># -*- coding: utf-8 -*-</span><br><span class="line"># awesome_printの色付けの設定</span><br><span class="line">require "awesome_print"</span><br><span class="line">AwesomePrint.pry!</span><br><span class="line"></span><br><span class="line"># pry-debuggerのショートカット</span><br><span class="line">Pry.commands.alias_command 'c', 'continue'</span><br><span class="line">Pry.commands.alias_command 's', 'step'</span><br><span class="line">Pry.commands.alias_command 'n', 'next'</span><br><span class="line">Pry.commands.alias_command 'f', 'finish'</span><br><span class="line"></span><br><span class="line"># hirbの設定</span><br><span class="line">begin</span><br><span class="line">  require 'hirb'</span><br><span class="line">rescue LoadError</span><br><span class="line">  # Missing goodies, bummer</span><br><span class="line">end</span><br><span class="line"></span><br><span class="line">if defined? Hirb</span><br><span class="line">  # Slightly dirty hack to fully support in-session Hirb.disable/enable toggling</span><br><span class="line">  Hirb::View.instance_eval do</span><br><span class="line">    def enable_output_method</span><br><span class="line">      @output_method = true</span><br><span class="line">      @old_print = Pry.config.print</span><br><span class="line">      Pry.config.print = proc do |output, value|</span><br><span class="line">        Hirb::View.view_or_page_output(value) || @old_print.call(output, value)</span><br><span class="line">      end</span><br><span class="line">    end</span><br><span class="line"></span><br><span class="line">    def disable_output_method</span><br><span class="line">      Pry.config.print = @old_print</span><br><span class="line">      @output_method = nil</span><br><span class="line">    end</span><br><span class="line">  end</span><br><span class="line"></span><br><span class="line">  Hirb.enable</span><br><span class="line">end</span><br></pre></td></tr></tbody></table></figure>
<h2 id="Sporkの設定" class="article-heading">😀 <a href="#Sporkの設定" class="headerlink" title="Sporkの設定"></a>Sporkの設定<a class="article-anchor" href="#Sporkの設定" aria-hidden="true"></a></h2><p>sporkの初期設定。</p>
<figure class="highlight plain"><table><tbody><tr><td class="code"><pre><span class="line">bundle exec spork --bootstrap</span><br></pre></td></tr></tbody></table></figure>
<p>sporkのテスト。(起動が確認できたら<code>Ctrl + C</code>で停止させてください)</p>
<figure class="highlight plain"><table><tbody><tr><td class="code"><pre><span class="line">bundle exec spork</span><br><span class="line">> Using RSpec</span><br><span class="line">> Preloading Rails environment</span><br><span class="line">> Loading Spork.prefork block...</span><br><span class="line">> Spork is ready and listening on 8989! # ← 成功</span><br></pre></td></tr></tbody></table></figure>
<h2 id="Guardの設定" class="article-heading"> 🎳 <a href="#Guardの設定" class="headerlink" title="Guardの設定"></a>Guardの設定<a class="article-anchor" href="#Guardの設定" aria-hidden="true"></a></h2><p><code>Guardfile</code>の作成。</p>
<figure class="highlight plain"><table><tbody><tr><td class="code"><pre><span class="line">bundle exec guard init</span><br></pre></td></tr></tbody></table></figure>
<p><code>Guardfile</code>に次の項目を追加。</p>
<figure class="highlight plain"><table><tbody><tr><td class="code"><pre><span class="line">guard 'rspec' do</span><br><span class="line">  # rakeファイルの更新監視</span><br><span class="line">  watch(%r{^lib/(.+)\.rake$})     { |m| "spec/lib/#{m[1]}_rake_spec.rb" }</span><br><span class="line">end</span><br><span class="line"></span><br><span class="line"># 全体テストをしないようにする(全体テストは、guardが動いてる所でEnterすると実行)</span><br><span class="line"># guard 'rspec' doを以下に書換え</span><br><span class="line">guard 'rspec', :version => 2, :cli => "--drb", :all_after_pass => false, :all_on_start => false do</span><br></pre></td></tr></tbody></table></figure>
<h2 id="LiveReloadの設定" class="article-heading">🚌 <a href="#LiveReloadの設定" class="headerlink" title="LiveReloadの設定"></a>LiveReloadの設定<a class="article-anchor" href="#LiveReloadの設定" aria-hidden="true"></a></h2><p>ブラウザのリロード用アドオンを任意でインストール。</p>
<ul>
<li><p><a href="https://chrome.google.com/webstore/detail/jnihajbhpnppcggbcgedagnkighmdlei" target="_blank" rel="noopener">Chrome Addon</a></p>
</li>
<li><p><a href="https://addons.mozilla.org/ja/firefox/addon/livereload/" target="_blank" rel="noopener">FireFox Addon</a></p>
</li>
</ul>
<h2 id="Growlの設定" class="article-heading">😼 <a href="#Growlの設定" class="headerlink" title="Growlの設定"></a>Growlの設定<a class="article-anchor" href="#Growlの設定" aria-hidden="true"></a></h2><p>ここはMacかつLionの方限定です。<br><br>Mountain Lionの方は、通知センターに送付します。(Gemfileを参照ください)</p>
<p><a href="http://growl.info/" target="_blank" rel="noopener">Grow</a>をインストール。</p>
<p><a href="http://growl.info/" title="fpu_tmp_1354148705.382_da97cc by morizyun," target="_blank" rel="noopener"></a></p>
<p>続いてGrowlNotifyのインストール。<br><a href="http://growl.info/downloads" target="_blank" rel="noopener">Growl - Downloads</a>にてダウンロード/インストールする。</p>
<p><a href="http://growl.info/downloads" title="fpu_tmp_1354148550.4162_b194f0 by morizyun," target="_blank" rel="noopener"></a></p>
<h2 id="Guardの動作確認" class="article-heading">🍣 <a href="#Guardの動作確認" class="headerlink" title="Guardの動作確認"></a>Guardの動作確認<a class="article-anchor" href="#Guardの動作確認" aria-hidden="true"></a></h2><p><code>guard</code>の実行。</p>
<figure class="highlight plain"><table><tbody><tr><td class="code"><pre><span class="line">bundle exec guard</span><br></pre></td></tr></tbody></table></figure>
<p>次のような結果が出ていれば成功です。</p>
<pre>Guard uses Growl to send notifications.
Guard uses TerminalTitle to send notifications.
Guard is now watching at '/path/to/app/test-app/'
LiveReload 1.6 is waiting for a browser to connect.
Guard::RSpec is running
No examples found.

Finished in 0.00007 seconds
0 examples, 0 failures
</pre>

<h2 id="関連記事：-Rails-3-2-11-Bootstrap-Haml" class="article-heading">👽 <a href="#関連記事：-Rails-3-2-11-Bootstrap-Haml" class="headerlink" title="関連記事： Rails 3.2.11/Bootstrap/Haml"></a>関連記事： Rails 3.2.11/Bootstrap/Haml<a class="article-anchor" href="#関連記事：-Rails-3-2-11-Bootstrap-Haml" aria-hidden="true"></a></h2><p><strong><a href="/blog/rails-mysql-bootstrap">Rails 3.2.11/Bootstrap/Haml プロジェクト新規作成 最短ガイドだよ！</a></strong> にRailsのモダンなプロジェクト作成の流れを書きました。Railsのプロジェクト作成から始めたい方はぜひ。</p>
<h2 id="関連記事：-テスト環境にseedデータを自動で読み込ませる" class="article-heading"> 🍮 <a href="#関連記事：-テスト環境にseedデータを自動で読み込ませる" class="headerlink" title="関連記事： テスト環境にseedデータを自動で読み込ませる"></a>関連記事： テスト環境にseedデータを自動で読み込ませる<a class="article-anchor" href="#関連記事：-テスト環境にseedデータを自動で読み込ませる" aria-hidden="true"></a></h2><p>RSpecでテストをするときにseedデータをテスト環境のDBに読み込ませてテストをしたいということがあると思います。そんなときは、<code>seed_fu</code>というgemがやってくれます。以下が紹介記事です。</p>
<p><a href="/blog/seed-fu-ruby-on-rails-setup">seed-fuで始める効率的なRails Seed管理</a></p>
<h2 id="関連記事" class="article-heading">🐮 <a href="#関連記事" class="headerlink" title="関連記事"></a>関連記事<a class="article-anchor" href="#関連記事" aria-hidden="true"></a></h2><p><strong><a href="/blog/pow-guard-rails">開発サーバをThinからPowに切り替えて開発効率アップ！ (Mac限定)</a></strong> にてPowに関する記事を載せました。Powインストールがまだの方はぜひ。</p>
<h2 id="失敗談" class="article-heading">🗽 <a href="#失敗談" class="headerlink" title="失敗談"></a>失敗談<a class="article-anchor" href="#失敗談" aria-hidden="true"></a></h2><p><a href="http://blog.m4i.jp/entry/2012/02/22/091501" target="_blank" rel="noopener">Rails + Pow + pry/ruby-debug(Ruby 1.9.3) | カワイイはつくれる</a>にトライしてみたんですが、<br>残念ながら僕の環境ではuninitialized constant PryStackExplorer::Pryだそうです。技術力つけて再チャレンジ！</p>
<ul>
<li><a href="http://banisterfiend.wordpress.com/2012/02/14/the-pry-ecosystem/" target="_blank" rel="noopener">The Pry Ecosystem</a></li>
</ul>
<h2 id="参考リンク" class="article-heading">🗻 <a href="#参考リンク" class="headerlink" title="参考リンク"></a>参考リンク<a class="article-anchor" href="#参考リンク" aria-hidden="true"></a></h2><ul>
<li><p><a href="https://gist.github.com/1190475" target="_blank" rel="noopener">Rails 3.1 with Rspec, Factory Girl, Haml, Database Cleaner, Spork, and Guard — Gist</a></p>
</li>
<li><p><a href="http://qiita.com/items/7b98fb8ec493ff801029" target="_blank" rel="noopener">Rails3.2+RSpec2+Spork+GuardでTDD環境を構築しよう！ | Quiita</a></p>
</li>
<li><p><a href="http://blog.twiwt.org/e/b2d120" target="_blank" rel="noopener">Rails で RSpec のセットアップ</a></p>
</li>
<li><p><a href="http://www.gesource.jp/weblog/?p=648" target="_blank" rel="noopener">Ruby on RailsでRSpecを使うときに使用するコマンドのまとめ</a></p>
</li>
<li><p><a href="http://kitbc.s41.xrea.com/main/?use_guard_spork" target="_blank" rel="noopener">rspec + guard + spork で高速な自動テスト実行環境構築</a></p>
</li>
<li><p><a href="http://naoty.hatenablog.com/entry/2012/05/20/032251" target="_blank" rel="noopener">Rails開発環境 2012初夏</a></p>
</li>
<li><p><a href="http://qiita.com/items/d75d7c3953faa34a1f0e" target="_blank" rel="noopener">awesome_print を pry の表示のデフォルトに使う | Quiita</a></p>
</li>
<li><p><a href="http://penguinlab.jp/blog/post/2256" target="_blank" rel="noopener">追記: Rails, RSpec, Spork(, Guard) で適切にクラスをリロード - 情報と音楽</a></p>
</li>
<li><p><a href="http://blog.crowdint.com/2012/03/01/rails-tdd-environment-setup-with-guard-and-foreman.html" target="_blank" rel="noopener">Rails TDD environment setup with Guard and Foreman</a></p>
</li>
<li><p><a href="https://gist.github.com/1724370" target="_blank" rel="noopener">Example rails 3.1 spec_helper.rb file using spork, rspec, factory_girl, database_cleaner, I18n — Gist</a></p>
</li>
<li><p><a href="http://willnet.in/31" target="_blank" rel="noopener">rails generate controller で無駄な helper や assets を生成しない方法  </a></p>
</li>
</ul>
<h2 id="変更来歴" class="article-heading">🐯 <a href="#変更来歴" class="headerlink" title="変更来歴"></a>変更来歴<a class="article-anchor" href="#変更来歴" aria-hidden="true"></a></h2><p>12/03 23:50 FactoryGirl/database_cleanerの設定を見直し。Pryの設定追加<br><br>12/06 09:37 Gemfileの’awesome_print’が間違っていたので修正<br><br>12/07 21:04 Gemfileに’pry-coolline’を追加<br><br>12/11 12:55 FactoryGirlの設定に説明書きを追記<br><br>12/12 21:20 guard-Bundlerとterminal-notifier-guardをGemfileに追加<br><br>12/12 21:35 growlの説明書きを追加<br><br>12/16 17:30 binding.pryに関する説明を追記<br><br>12/18 20:30 environments/test.rbとrspec_helperの設定を追加<br><br>12/21 18:30 config/application.rbの設定を追加<br><br>12/30 18:05 spec_helper.rbのdatabase_cleanerの設定を見直し<br><br>12/31 13:05 gem Webmockを追加<br><br>01/02 08:45 gem Webmockの記述場所を修正<br><br>01/16 23:05 gem shoulda-matcherを追加<br><br>01/21 18:30 gem pry-debuggerを追加<br><br>01/22 14:15 gem pry関連のGemとその設定を追加<br><br>01/24 11:40 RSpecで全体テストをしないように設定を修正<br><br>04/14 21:40 guardをbundle exec guardに修正<br></p>
<h2 id="テスト環境" class="article-heading">🚕 <a href="#テスト環境" class="headerlink" title="テスト環境"></a>テスト環境<a class="article-anchor" href="#テスト環境" aria-hidden="true"></a></h2><p>テスト環境は以下のとおりです。</p>
<pre>OS : Mac Mountain Lion(OS X 10.8)
Ruby : 1.9.3
Rails : 3.2.11
haml : 3.1.7
coffee-script : 3.2.1
Rspec : 2.12.0
</pre></body></html>
    <div style="margin: 5px 0 30px 0">
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <!-- responsive-auto -->
    <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4186413323075068" data-ad-slot="4457377393" data-ad-format="auto"></ins>
    <script>
        (adsbygoogle = window.adsbygoogle || []).push({});
    </script>
</div>

    <div>
    <h2>🖥 VULTRおすすめ</h2>

    <p>
      「<a href="https://www.vultr.com/?ref=6808408" target="_blank"><b>VULTR</b></a>」はVPSサーバのサービスです。日本にリージョンがあり、最安は512MBで2.5ドル/月($0.004/時間)で借りることができます。4GBメモリでも月20ドルです。
      最近は<a href="https://www.vultr.com/?ref=6808408" target="_blank"><b>VULTR</b></a>のヘビーユーザーになので、「<a href="https://www.vultr.com/?ref=6808408" target="_blank"><b>ここ</b></a>」から会員登録してもらえるとサービス開発が捗ります！
    </p>
    <div><a href="https://www.vultr.com/?ref=6808408"><img src="https://www.vultr.com/media/banner_1.png"></a></div>
</div>

    <div>
    <h2>📚 おすすめの書籍</h2>
    <p>
        
            <a href="https://www.amazon.co.jp/gp/product/4863542941/ref=as_li_tl?ie=UTF8&camp=247&creative=1211&creativeASIN=4863542941&linkCode=as2&tag=morizyun00-22" target="_blank">
            <img border="0" src="https://ws-fe.amazon-adsystem.com/widgets/q?_encoding=UTF8&MarketPlace=JP&ASIN=4863542941&ServiceVersion=20070822&ID=AsinImage&WS=1&Format=_SL240_&tag=morizyun00-22" width="120">
            </a>
            <img src="https://ir-jp.amazon-adsystem.com/e/ir?t=morizyun00-22&l=am2&o=9&a=4863542941" width="1" height="1" border="0" alt style="border:none !important; margin:0px !important;">
        
            <a href="https://www.amazon.co.jp/gp/product/4798059315/ref=as_li_tl?ie=UTF8&camp=247&creative=1211&creativeASIN=4798059315&linkCode=as2&tag=morizyun00-22" target="_blank">
            <img border="0" src="https://ws-fe.amazon-adsystem.com/widgets/q?_encoding=UTF8&MarketPlace=JP&ASIN=4798059315&ServiceVersion=20070822&ID=AsinImage&WS=1&Format=_SL240_&tag=morizyun00-22" width="120">
            </a>
            <img src="https://ir-jp.amazon-adsystem.com/e/ir?t=morizyun00-22&l=am2&o=9&a=4798059315" width="1" height="1" border="0" alt style="border:none !important; margin:0px !important;">
        
            <a href="https://www.amazon.co.jp/gp/product/4844368907/ref=as_li_tl?ie=UTF8&camp=247&creative=1211&creativeASIN=4844368907&linkCode=as2&tag=morizyun00-22" target="_blank">
            <img border="0" src="https://ws-fe.amazon-adsystem.com/widgets/q?_encoding=UTF8&MarketPlace=JP&ASIN=4844368907&ServiceVersion=20070822&ID=AsinImage&WS=1&Format=_SL240_&tag=morizyun00-22" width="120">
            </a>
            <img src="https://ir-jp.amazon-adsystem.com/e/ir?t=morizyun00-22&l=am2&o=9&a=4844368907" width="1" height="1" border="0" alt style="border:none !important; margin:0px !important;">
        
            <a href="https://www.amazon.co.jp/gp/product/4862464122/ref=as_li_tl?ie=UTF8&camp=247&creative=1211&creativeASIN=4862464122&linkCode=as2&tag=morizyun00-22" target="_blank">
            <img border="0" src="https://ws-fe.amazon-adsystem.com/widgets/q?_encoding=UTF8&MarketPlace=JP&ASIN=4862464122&ServiceVersion=20070822&ID=AsinImage&WS=1&Format=_SL240_&tag=morizyun00-22" width="120">
            </a>
            <img src="https://ir-jp.amazon-adsystem.com/e/ir?t=morizyun00-22&l=am2&o=9&a=4862464122" width="1" height="1" border="0" alt style="border:none !important; margin:0px !important;">
        
            <a href="https://www.amazon.co.jp/gp/product/B0822N5RMS/ref=as_li_tl?ie=UTF8&camp=247&creative=1211&creativeASIN=B0822N5RMS&linkCode=as2&tag=morizyun00-22" target="_blank">
            <img border="0" src="https://ws-fe.amazon-adsystem.com/widgets/q?_encoding=UTF8&MarketPlace=JP&ASIN=B0822N5RMS&ServiceVersion=20070822&ID=AsinImage&WS=1&Format=_SL240_&tag=morizyun00-22" width="120">
            </a>
            <img src="https://ir-jp.amazon-adsystem.com/e/ir?t=morizyun00-22&l=am2&o=9&a=B0822N5RMS" width="1" height="1" border="0" alt style="border:none !important; margin:0px !important;">
        
            <a href="https://www.amazon.co.jp/gp/product/B07R8WH6W7/ref=as_li_tl?ie=UTF8&camp=247&creative=1211&creativeASIN=B07R8WH6W7&linkCode=as2&tag=morizyun00-22" target="_blank">
            <img border="0" src="https://ws-fe.amazon-adsystem.com/widgets/q?_encoding=UTF8&MarketPlace=JP&ASIN=B07R8WH6W7&ServiceVersion=20070822&ID=AsinImage&WS=1&Format=_SL240_&tag=morizyun00-22" width="120">
            </a>
            <img src="https://ir-jp.amazon-adsystem.com/e/ir?t=morizyun00-22&l=am2&o=9&a=B07R8WH6W7" width="1" height="1" border="0" alt style="border:none !important; margin:0px !important;">
        
            <a href="https://www.amazon.co.jp/gp/product/B07VKJFXRL/ref=as_li_tl?ie=UTF8&camp=247&creative=1211&creativeASIN=B07VKJFXRL&linkCode=as2&tag=morizyun00-22" target="_blank">
            <img border="0" src="https://ws-fe.amazon-adsystem.com/widgets/q?_encoding=UTF8&MarketPlace=JP&ASIN=B07VKJFXRL&ServiceVersion=20070822&ID=AsinImage&WS=1&Format=_SL240_&tag=morizyun00-22" width="120">
            </a>
            <img src="https://ir-jp.amazon-adsystem.com/e/ir?t=morizyun00-22&l=am2&o=9&a=B07VKJFXRL" width="1" height="1" border="0" alt style="border:none !important; margin:0px !important;">
        
            <a href="https://www.amazon.co.jp/gp/product/477415654X/ref=as_li_tl?ie=UTF8&camp=247&creative=1211&creativeASIN=477415654X&linkCode=as2&tag=morizyun00-22" target="_blank">
            <img border="0" src="https://ws-fe.amazon-adsystem.com/widgets/q?_encoding=UTF8&MarketPlace=JP&ASIN=477415654X&ServiceVersion=20070822&ID=AsinImage&WS=1&Format=_SL240_&tag=morizyun00-22" width="120">
            </a>
            <img src="https://ir-jp.amazon-adsystem.com/e/ir?t=morizyun00-22&l=am2&o=9&a=477415654X" width="1" height="1" border="0" alt style="border:none !important; margin:0px !important;">
        
            <a href="https://www.amazon.co.jp/gp/product/483996937X/ref=as_li_tl?ie=UTF8&camp=247&creative=1211&creativeASIN=483996937X&linkCode=as2&tag=morizyun00-22" target="_blank">
            <img border="0" src="https://ws-fe.amazon-adsystem.com/widgets/q?_encoding=UTF8&MarketPlace=JP&ASIN=483996937X&ServiceVersion=20070822&ID=AsinImage&WS=1&Format=_SL240_&tag=morizyun00-22" width="120">
            </a>
            <img src="https://ir-jp.amazon-adsystem.com/e/ir?t=morizyun00-22&l=am2&o=9&a=483996937X" width="1" height="1" border="0" alt style="border:none !important; margin:0px !important;">
        
            <a href="https://www.amazon.co.jp/gp/product/479815072X/ref=as_li_tl?ie=UTF8&camp=247&creative=1211&creativeASIN=479815072X&linkCode=as2&tag=morizyun00-22" target="_blank">
            <img border="0" src="https://ws-fe.amazon-adsystem.com/widgets/q?_encoding=UTF8&MarketPlace=JP&ASIN=479815072X&ServiceVersion=20070822&ID=AsinImage&WS=1&Format=_SL240_&tag=morizyun00-22" width="120">
            </a>
            <img src="https://ir-jp.amazon-adsystem.com/e/ir?t=morizyun00-22&l=am2&o=9&a=479815072X" width="1" height="1" border="0" alt style="border:none !important; margin:0px !important;">
        
    </p>
</div>

  </div>
  
</article>
<!-- .replace(/<a id="more"><\/a>/g, '<br style="clear:both;"/>' + partial('partial/google_ads')).replace(/<p>/, '<p>' + partial('partial/asin')) }} -->
    </div>
  </div>
</div>
    <footer id="footer" class="wrapper">
  <div class="inner">
    <div id="footer-copyright">
      &copy; 2020 <a href="https://morizyun.github.io/about" target="_blank">morizyun</a><br>
    </div>
    <div id="footer-links">
      <a href="https://twitter.com/zyunnosuke" class="footer-link" target="_blank"><i class="fa fa-twitter"></i></a>
      <a href="https://morizyun.github.io/about" class="footer-link"><i class="fa fa-book"></i></a>
      <a href="https://github.com/morizyun" class="footer-link" target="_blank"><i class="fa fa-github-alt"></i></a>
      <a href="https://morizyun.github.io/atom.xml" class="footer-link" target="_blank"><i class="fa fa-rss"></i></a>
    </div>
  </div>
</footer>

  </div>
  <div id="mobile-nav-dimmer"></div>
  <nav id="mobile-nav">
  <div id="mobile-nav-inner">
    <ul id="mobile-nav-list">
      <a href="//ruby/design-pattern-index-9b183c73c8.html" class="mobile-nav-link">Ruby</a><a href="//docker/about-index-bac3d94263.html" class="mobile-nav-link">Docker</a><a href="//digdag/index-8051f4161f.html" class="mobile-nav-link">Digdag</a><a href="//cs/breadth-first-search-f89255599f.html" class="mobile-nav-link">CS</a><a href="/java/" class="mobile-nav-link">Java</a><a href="//scala/basic-grammer-991dfec1a6.html" class="mobile-nav-link">Scala</a><a href="//javascript/basic-string-7ced2a03c9.html" class="mobile-nav-link">JS</a><a href="//infrastructure/basic-index-557a455059.html" class="mobile-nav-link">インフラ</a><a href="//database/postgresql-basic-architecture-14bd4c81c8.html" class="mobile-nav-link">DB</a><a href="//web/http-index-5721109e6c.html" class="mobile-nav-link">Web</a><a href="/blog/" class="mobile-nav-link">Blog</a>
      <li class="mobile-nav-item">
        <a href="https://github.com/morizyun" class="mobile-nav-link" rel="external" target="_blank">GitHub</a>
      </li>
    </ul>
    
  </div>
  <div id="mobile-lang-select-wrap">
    <span id="mobile-lang-select-label"><i class="fa fa-globe"></i><span>日本語</span></span>
    <select id="mobile-lang-select" data-canonical>
      
        <option value="ja" selected>日本語</option>
      
    </select>
  </div>
</nav>
  <!-- Scripts -->
<script src="build/js/main.js"></script>
<script src="https://cdn.jsdelivr.net/retinajs/1.3.0/retina.min.js" async></script>


</body>
</html>