<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: R | 酒と泪とRubyとRailsと]]></title>
  <link href="http://morizyun.github.io/blog/categories/r/atom.xml" rel="self"/>
  <link href="http://morizyun.github.io/"/>
  <updated>2016-01-27T23:53:58+09:00</updated>
  <id>http://morizyun.github.io/</id>
  <author>
    <name><![CDATA[morizyun]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[【書評: データサイエンティスト養成読本】で学ぶデータサイエンティストの生態系]]></title>
    <link href="http://morizyun.github.io/blog/data-scientist-cultivation-book-review/"/>
    <updated>2014-03-31T09:40:00+09:00</updated>
    <id>http://morizyun.github.io/blog/data-scientist-cultivation-book-review</id>
    <content type="html"><![CDATA[<p><a href="http://www.amazon.co.jp/gp/product/4774158968/ref=as_li_qf_sp_asin_il?ie=UTF8&camp=247&creative=1211&creativeASIN=4774158968&linkCode=as2&tag=morizyun00-22"><img border="0" src="http://ws.assoc-amazon.jp/widgets/q?_encoding=UTF8&ASIN=4774158968&Format=_SL160_&ID=AsinImage&MarketPlace=JP&ServiceVersion=20070822&WS=1&tag=morizyun00-22" width="150" style="float: left; margin: 0 20px 20px 0;" ></a><img src="http://www.assoc-amazon.jp/e/ir?t=morizyun00-22&l=as2&o=9&a=4774158968" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important;" />統計解析の勉強をしていく中で、どうやったら実際の業務の中に活かしていけるかを模索していて、この本にいきあたりました。人々が生み出すデータがますます増加していく中で、そのデータをビジネスにどう活用していくかをエンジニアの視点で考えられる素晴らしい本だと思います。</p>

<p>今回はこの本の中で特に参考になった点を中心にピックアップしていきます。</p>

<!-- more -->


<br style="clear:both;"/>


<p><script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- square -->
<ins class="adsbygoogle" style="display:inline-block;width:336px;height:280px" data-ad-client="ca-pub-4186413323075068" data-ad-slot="5059873392"></ins>
<script>
    (adsbygoogle = window.adsbygoogle || []).push({});
</script></p>

<h2>本書のサンプルデータ</h2>

<p><strong><a href="http://gihyo.jp/book/2013/978-4-7741-5896-9/support">サポートページ：データサイエンティスト養成読本 ［ビッグデータ時代のビジネスを支えるデータ分析力が身につく！］</a></strong><br/>
インターネットの力、マジですごい！サンプルデータはほんとうに有難い！</p>

<h2>データサイエンティストの仕事術</h2>

<h3>Cross Industry Standard Process for Data Mining(CRISP-DM)</h3>

<p>データマイニングプロジェクトにおける標準的な6つの手順。</p>

<pre>
1) Business Understanging
ビジネスの全体像の理解(ヒアリング)と課題設定

2) Data Understanding
データ収集と理解に努めて、仮説構築の下地を作る

3) Data Preparation
数理モデルの作成のために、データマート(データウェアハウス)を構築。
欠損値や外れ値を除去していく。

4) Modeling
仮説にもどついて、数理モデルを構築する

5) Evaluation
数理モデルの評価。ビジネスリスクの評価

6) Deployment
数理モデルに基づく、ビジネス施策の実施
</pre>


<h3>必要なスキルセット</h3>

<pre>
# ハードスキル
1) Data Understanding 〜 Data Preparation
RDBMS(SQL)、Hadoop(HDFS)、MapReduce、Hiveなど

2) Modeling 〜 Devaluation
統計解析、機械学習の知識、R, Pythonなど

# ソフトスキル
1) Business Understanding 〜 Data Understanding
ビジネスにおける業界、業務の知識。質問力、理解力が必要

2) Deployment
分析結果の伝達力、説得力、プロジェクトの推進力が必要
</pre>


<p>根本としては好奇心。「<strong>問題を核心まで掘り下げて、そこで見つけた疑問を明確で検証可能な一連の仮説に落としこみたいという欲求</strong>」が必要。</p>

<h3>データサイエンスよりも大切なこと</h3>

<pre>
1) 統計的な正しさよりもビジネスの成功
2) 組織の構造や実務の改善効果を重視する
3) 意味のある分析のためには泥臭いクリーニングが必須
4) データは適切な保持が大切
</pre>


<h3>パラメトリックとノンパラメトリック</h3>

<p><strong><a href="https://twitter.com/TJO_datasci">@TJO_datasci</a></strong>さんからご指摘頂きました。パラメトリックとノンパラメトリックの違いの端的なまとめは次の通りです。</p>

<blockquote>
* パラメトリック検定：正規分布に限らず厳密な分布の形の仮定を必要とする<br/>
* ノンパラメトリック検定：分布の形の仮定が不要である
</blockquote>


<p>引用元: <a href="http://tjo.hatenablog.com/entry/2013/11/19/093218">「パラメトリック検定」と「ノンパラメトリック検定」の違いについて出典を明示して書いておく</a></p>

<p>僕自身幾つか文献を見ましたが、まだまだ理解できていません。引き続き勉強して理解できたら、また自分の言葉で書き直したいと思います！</p>

<h2>データ分析実践入門</h2>

<h3>事前準備: RStudio</h3>

<p>この章では主にRを使います。RStudioについては次の章で説明します。</p>

<h3>ロジスティック回帰</h3>

<p>Rにデフォルトで入っている、タイタニック号の乗客の生存情報(Titanic)にロジスティック回帰モデルを使う。乗客の各属性から、生存の要因を探す。</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
<span class='line-number'>81</span>
<span class='line-number'>82</span>
<span class='line-number'>83</span>
<span class='line-number'>84</span>
<span class='line-number'>85</span>
<span class='line-number'>86</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h2&gt;データ整形&lt;/h2&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;z &amp;lt;- data.frame<span class="o">(</span>Titanic<span class="o">)</span>
</span><span class='line'>titanic.data &amp;lt;- data.frame<span class="o">(</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;pre&gt;&lt;code&gt;Class<span class="o">=</span>rep<span class="o">(</span>z<span class="nv">$Class</span>, z<span class="nv">$Freq</span><span class="o">)</span>,
</span><span class='line'><span class="nv">Sex</span><span class="o">=</span>rep<span class="o">(</span>z<span class="nv">$Sex</span>, z<span class="nv">$Freq</span><span class="o">)</span>,
</span><span class='line'><span class="nv">Age</span><span class="o">=</span>rep<span class="o">(</span>z<span class="nv">$Age</span>, z<span class="nv">$Freq</span><span class="o">)</span>,
</span><span class='line'><span class="nv">Survived</span><span class="o">=</span>rep<span class="o">(</span>z<span class="nv">$Survived</span>, z<span class="nv">$Freq</span><span class="o">)</span>
</span><span class='line'>&lt;/code&gt;&lt;/pre&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;  <span class="o">)</span>
</span><span class='line'>head<span class="o">(</span>titanic.data<span class="o">)</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Class  Sex   Age Survived&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;1   3rd Male Child       No&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;2   3rd Male Child       No&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;3   3rd Male Child       No&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;4   3rd Male Child       No&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;5   3rd Male Child       No&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;6   3rd Male Child       No&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h2&gt;モデル構築&lt;/h2&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;titanic.logit &amp;lt;- glm<span class="o">(</span>Survived~., <span class="nv">data</span><span class="o">=</span>titanic.data, <span class="nv">family</span><span class="o">=</span>binomial<span class="o">)</span>
</span><span class='line'>summary<span class="o">(</span>titanic.logit<span class="o">)</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Call:&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;glm<span class="o">(</span><span class="nv">formula</span> <span class="o">=</span> Survived ~ ., <span class="nv">family</span> <span class="o">=</span> binomial, <span class="nv">data</span> <span class="o">=</span> titanic.data<span class="o">)</span>&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Deviance Residuals:&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Min       1Q   Median       3Q      Max&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;-2.0812  -0.7149  -0.6656   0.6858   2.1278&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Coefficients:&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Estimate Std. Error z value Pr<span class="o">(</span>&gt;|z|<span class="o">)</span>&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;<span class="o">(</span>Intercept<span class="o">)</span>   0.6853     0.2730   2.510   0.0121 *&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Class2nd     -1.0181     0.1960  -5.194 2.05e-07 ***&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Class3rd     -1.7778     0.1716 -10.362  &amp;lt; 2e-16 ***&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;ClassCrew    -0.8577     0.1573  -5.451 5.00e-08 ***&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;SexFemale     2.4201     0.1404  17.236  &amp;lt; 2e-16 ***&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;AgeAdult     -1.0615     0.2440  -4.350 1.36e-05 ***&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;---&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Signif. codes:  0 ‘&lt;em&gt;&lt;strong&gt;’ 0.001 ‘&lt;/strong&gt;’ 0.01 ‘&lt;/em&gt;’ 0.05 ‘.’ 0.1 ‘ ’ 1&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;<span class="o">(</span>Dispersion parameter <span class="k">for </span>binomial family taken to be 1<span class="o">)</span>&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Null deviance: 2769.5  on 2200  degrees of freedom&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Residual deviance: 2210.1  on 2195  degrees of freedom&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;AIC: 2222.1&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Number of Fisher Scoring iterations: 4&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p><script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- square -->
<ins class="adsbygoogle" style="display:inline-block;width:336px;height:280px" data-ad-client="ca-pub-4186413323075068" data-ad-slot="5059873392"></ins>
<script>
    (adsbygoogle = window.adsbygoogle || []).push({});
</script></p>

<h3>オッズ比の計算</h3>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>install.packages<span class="o">(</span><span class="s1">&#39;epicalc&#39;</span><span class="o">)</span>
</span><span class='line'>library<span class="o">(</span><span class="s1">&#39;epicalc&#39;</span><span class="o">)</span>
</span><span class='line'>logistic.display<span class="o">(</span>titanic.logit, <span class="nv">simplified</span><span class="o">=</span>T<span class="o">)</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;OR lower95ci  upper95ci     Pr<span class="o">(</span>&gt;|Z|<span class="o">)</span>&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Class2nd   0.3612825 0.2460447  0.5304933 2.053331e-07&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Class3rd   0.1690159 0.1207510  0.2365727 3.691891e-25&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;ClassCrew  0.4241466 0.3115940  0.5773549 5.004592e-08&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;SexFemale 11.2465380 8.5408719 14.8093331 1.431830e-66&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;AgeAdult   0.3459219 0.2144193  0.5580746 1.360490e-05&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;<span class="o">=</span>&gt; 例えば、女性のほうが11.2465380倍生存確率が高いということがわかる&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<h3>決定木モデル</h3>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>library<span class="o">(</span>rpart<span class="o">)</span>
</span><span class='line'>install.packages<span class="o">(</span><span class="s1">&#39;partykit&#39;</span><span class="o">)</span>
</span><span class='line'>library<span class="o">(</span>partykit<span class="o">)</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;titanic.rp &amp;lt;- rpart<span class="o">(</span>Survived~., <span class="nv">data</span><span class="o">=</span>titanic.data<span class="o">)</span>
</span><span class='line'>plot<span class="o">(</span>as.party<span class="o">(</span>titanic.rp<span class="o">)</span>, <span class="nv">tp_args</span><span class="o">=</span>T<span class="o">)</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p><img src="http://farm4.staticflickr.com/3720/13404231644_57b602b50a.jpg" width="480" height="500" alt="スクリーンショット 2014-03-25 22.45.03"></p>

<h3>主成分分析</h3>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>state.pca &amp;lt;- prcomp<span class="o">(</span>state.x77<span class="o">[</span>,1:6<span class="o">]</span>, <span class="nv">scale</span><span class="o">=</span>T<span class="o">)</span>
</span><span class='line'>biplot<span class="o">(</span>state.pca<span class="o">)</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p><img src="http://farm8.staticflickr.com/7456/13404045033_bd64bcfd5f.jpg" width="487" height="500" alt="スクリーンショット 2014-03-25 22.48.23"></p>

<h3>非階層クラスタリング: k-means</h3>

<p>k-meansの手順。</p>

<pre>
1) k個のクラスタの中心の初期値を決める
2) 各データをk個クラスタ中心との距離を求め、最も近いクラスタに分類
3) 形成されたクラスタの中心を求める
4) クラスタの中心が変化しない時点まで(2), (3)を繰り返す
</pre>


<p>サンプルソースはこちら。</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;k-meansの実行<span class="o">(</span>クラスタ数を3つに設定<span class="o">)</span>&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;state.km &amp;lt;- kmeans<span class="o">(</span>scale<span class="o">(</span>state.x77<span class="o">[</span>,1:6<span class="o">])</span>,3<span class="o">)</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;主成分分析の結果にクラスタ情報を付与&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;state.pca.df &amp;lt;- data.frame<span class="o">(</span>state.pca<span class="nv">$x</span><span class="o">)</span>
</span><span class='line'>state.pca.df<span class="nv">$name</span> &amp;lt;- rownames<span class="o">(</span>state.pca.df<span class="o">)</span>
</span><span class='line'>state.pca.df<span class="nv">$cluster</span> &amp;lt;- as.factor<span class="o">(</span>state.km<span class="nv">$cluster</span><span class="o">)</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;描画&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;ggplot<span class="o">(</span>state.pca.df, aes<span class="o">(</span><span class="nv">x</span><span class="o">=</span>PC1, <span class="nv">y</span><span class="o">=</span>PC2, <span class="nv">label</span><span class="o">=</span>name, <span class="nv">col</span><span class="o">=</span>cluster<span class="o">))</span> + geom_text<span class="o">()</span> + theme_bw<span class="o">(</span>16<span class="o">)</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p><img src="https://farm8.staticflickr.com/7455/13404137535_783058ded9.jpg" width="456" height="500" alt="スクリーンショット 2014-03-25 23.01.10"></p>

<h3>レーダーチャート</h3>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>install.packages<span class="o">(</span><span class="s1">&#39;fmsb&#39;</span><span class="o">)</span>
</span><span class='line'>library<span class="o">(</span><span class="s1">&#39;fmsb&#39;</span><span class="o">)</span>
</span><span class='line'>df &amp;lt;- as.data.frame<span class="o">(</span>scale<span class="o">(</span>state.km<span class="nv">$centers</span><span class="o">))</span>
</span><span class='line'>dfmax &amp;lt;- apply<span class="o">(</span>df, 2, max<span class="o">)</span> + 1
</span><span class='line'>dfmin &amp;lt;- apply<span class="o">(</span>df, 2, min<span class="o">)</span> - 1
</span><span class='line'>df &amp;lt;- rbind<span class="o">(</span>dfmax, dfmin, df<span class="o">)</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;描画&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;radarchart<span class="o">(</span>df, <span class="nv">seg</span><span class="o">=</span>5, <span class="nv">plty</span><span class="o">=</span>1, <span class="nv">pcol</span><span class="o">=</span>rainbow<span class="o">(</span>3<span class="o">))</span>
</span><span class='line'>legend<span class="o">(</span><span class="s2">&quot;topright&quot;</span>, <span class="nv">legend</span><span class="o">=</span>1:3, <span class="nv">col</span><span class="o">=</span>rainbow<span class="o">(</span>3<span class="o">)</span>, <span class="nv">lty</span><span class="o">=</span>1<span class="o">)</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;クラスタ1 <span class="o">=</span>&gt; 平均寿命、高卒率、収入が多い&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;クラスタ2 <span class="o">=</span>&gt; 殺人件数と非識字率が高い&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;クラスタ3 <span class="o">=</span>&gt; 人口が多い&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p><img src="https://farm3.staticflickr.com/2859/13414033393_ec46db015e.jpg" width="500" height="475" alt="スクリーンショット 2014-03-26 7.44.11"></p>

<h2>RStudioのすすめ</h2>

<p>以下オススメリンク。</p>

<p><strong><a href="http://www.rstudio.com/ide/download/desktop">デスクトップアプリ R用のIDE: RStudio</a></strong><br/>
RのIDEツール。主な機能、使い方は次の通り。</p>

<pre>
1) RStudioのコード補完や、関数へのジャンプ、組み込み関数のソース閲覧機能
2) Apacheとの連携によるレポート表示、Emailでのレポート配信
3) Gitによるソースコード管理のサポート機能
</pre>


<p><strong><a href="http://yihui.name/knitr/">knitr</a></strong><br/>
RStudio上でReproducible Researchを実現するためのパッケージ。Markdown, Rファイル => HTMLへの変換を行う事ができる。また、後述のRPubsへのアップロード機能も備える。</p>

<p><strong><a href="https://rpubs.com/">RPubs</a></strong><br/>
RStudio.comが提供するサービス。再現可能な研究(Reproducible Research)を実現するために、Rの実行手順などをWebでシェアできるサービス。</p>

<p><strong><a href="http://www.rstudio.com/ide/download/server">RStudio Server</a></strong><br/>
RStudioのWebアプリケーション版。</p>

<h2>Pythonによる機械学習</h2>

<p>Pythonで使えるデータ分析に有効なライブラリ群についての紹介。</p>

<h3>データ分析と機械学習</h3>

<p>データ分析において、機械学習は単なる手段の一つ。</p>

<pre>
* ある説明変数に対して目的変数がどのくらい影響を与えているかを知ることができる
* 複数の変数から重要な変数を絞り込む事ができる
</pre>


<h3>Python環境の準備</h3>

<p>もしMachのPython環境を作る場合は、拙著<strong>[Python開発環境構築 徹底解説<a href="python-pyenv-rehash-mac-development">pyenv, mac</a></strong>がオススメです。</p>

<h3>Python のライブラリ</h3>

<p>利用するライブラリのインストール。</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;効率的な数値計算のためのライブラリ&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;pip install numpy&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;最適化、補間、積分、統計、画像処理、クラスタリング解析、信号処理、空間的解析などができる&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;pip install scipy&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;matplotlibのインストール用の設定&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;ln -s /usr/local/opt/freetype/include/freetype2 /usr/local/include/freetype&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;グラフ描画ライブラリ&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;pip install matplotlib&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;ファイルを作成してパラメータを記述&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;vim ~/.matplotlib/matplotlibrc&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;↓ 以下を追加&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;backend : TkAgg&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;機械学習ライブラリ: 単回帰分析〜SVMなどまで対応&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;教師あり学習、教師なし学習、モデル選択のためのクロスバリデーション&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;pip install scikit-learn&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;データ構造・データ解析のライブラリ：Rのdata.frameなどがある&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;pip install pandas&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;PythonからR言語を呼び出すためのライブラリ&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;pip install rpy2&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;pythonを対話的に実行するためのライブラリ&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;pip install ipython
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<h3>あやめのデータを知る</h3>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
<span class='line-number'>81</span>
<span class='line-number'>82</span>
<span class='line-number'>83</span>
<span class='line-number'>84</span>
<span class='line-number'>85</span>
<span class='line-number'>86</span>
<span class='line-number'>87</span>
<span class='line-number'>88</span>
<span class='line-number'>89</span>
<span class='line-number'>90</span>
<span class='line-number'>91</span>
<span class='line-number'>92</span>
<span class='line-number'>93</span>
<span class='line-number'>94</span>
<span class='line-number'>95</span>
<span class='line-number'>96</span>
<span class='line-number'>97</span>
<span class='line-number'>98</span>
<span class='line-number'>99</span>
<span class='line-number'>100</span>
<span class='line-number'>101</span>
<span class='line-number'>102</span>
<span class='line-number'>103</span>
<span class='line-number'>104</span>
<span class='line-number'>105</span>
<span class='line-number'>106</span>
<span class='line-number'>107</span>
<span class='line-number'>108</span>
<span class='line-number'>109</span>
<span class='line-number'>110</span>
<span class='line-number'>111</span>
<span class='line-number'>112</span>
<span class='line-number'>113</span>
<span class='line-number'>114</span>
<span class='line-number'>115</span>
<span class='line-number'>116</span>
<span class='line-number'>117</span>
<span class='line-number'>118</span>
<span class='line-number'>119</span>
<span class='line-number'>120</span>
<span class='line-number'>121</span>
<span class='line-number'>122</span>
<span class='line-number'>123</span>
<span class='line-number'>124</span>
<span class='line-number'>125</span>
<span class='line-number'>126</span>
<span class='line-number'>127</span>
<span class='line-number'>128</span>
<span class='line-number'>129</span>
<span class='line-number'>130</span>
<span class='line-number'>131</span>
<span class='line-number'>132</span>
<span class='line-number'>133</span>
<span class='line-number'>134</span>
<span class='line-number'>135</span>
<span class='line-number'>136</span>
<span class='line-number'>137</span>
<span class='line-number'>138</span>
<span class='line-number'>139</span>
<span class='line-number'>140</span>
<span class='line-number'>141</span>
<span class='line-number'>142</span>
<span class='line-number'>143</span>
<span class='line-number'>144</span>
<span class='line-number'>145</span>
<span class='line-number'>146</span>
<span class='line-number'>147</span>
<span class='line-number'>148</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>wget https://dataminingproject.googlecode.com/svn-history/r44/DataMiningApp/datasets/Iris/iris.csv&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;IRIS.csvのあるフォルダでipythonを起動&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;ipython&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;iris.csvを読み込み&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;import pandas as pd
</span><span class='line'><span class="nv">iris</span> <span class="o">=</span> pd.read_csv<span class="o">(</span><span class="s2">&quot;iris.csv&quot;</span><span class="o">)</span>
</span><span class='line'>iris.info<span class="o">()</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;データ加工&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;setosa <span class="o">=</span> iris<span class="o">[</span>iris<span class="o">[</span><span class="s2">&quot;Species&quot;</span><span class="o">]</span> <span class="o">==</span> <span class="s2">&quot;setosa&quot;</span><span class="o">]</span>
</span><span class='line'><span class="nv">versicolor</span> <span class="o">=</span> iris<span class="o">[</span>iris<span class="o">[</span><span class="s2">&quot;Species&quot;</span><span class="o">]</span> <span class="o">==</span> <span class="s2">&quot;versicolor&quot;</span><span class="o">]</span>
</span><span class='line'><span class="nv">virginica</span> <span class="o">=</span> iris<span class="o">[</span>iris<span class="o">[</span><span class="s2">&quot;Species&quot;</span><span class="o">]</span> <span class="o">==</span> <span class="s2">&quot;virginica&quot;</span><span class="o">]</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;基本的な統計量&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;合計&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;virginica.sum<span class="o">()</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Sepal Length                                                329.4&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Sepal Width                                                 148.7&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Petal Length                                                277.6&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Petal Width                                                 101.3&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;平均&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;virginica.mean<span class="o">()</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Sepal Length    6.588&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Sepal Width     2.974&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Petal Length    5.552&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Petal Width     2.026&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;中央値&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;virginica.median<span class="o">()</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Sepal Length    6.50&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Sepal Width     3.00&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Petal Length    5.55&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Petal Width     2.00&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;最小値&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;verginica.min<span class="o">()</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Sepal Length          4.9&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Sepal Width           2.2&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Petal Length          4.5&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Petal Width           1.4&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;最大値&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;virginica.max<span class="o">()</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Sepal Length          7.9&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Sepal Width           3.8&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Petal Length          6.9&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Petal Width           2.5&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;相関係数&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;virginica.corr<span class="o">()</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Sepal Length  Sepal Width  Petal Length  Petal Width&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Sepal Length      1.000000     0.457228      0.864225     0.281108&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Sepal Width       0.457228     1.000000      0.401045     0.537728&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Petal Length      0.864225     0.401045      1.000000     0.322108&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Petal Width       0.281108     0.537728      0.322108     1.000000&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;分散&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;virginica.var<span class="o">()</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Sepal Length    0.404343&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Sepal Width     0.104004&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Petal Length    0.304588&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Petal Width     0.075433&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;標準偏差&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;virginica.std<span class="o">()</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Sepal Length    0.635880&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Sepal Width     0.322497&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Petal Length    0.551895&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Petal Width     0.274650&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;共分散&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;virginica.cov<span class="o">()</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Sepal Length  Sepal Width  Petal Length  Petal Width&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Sepal Length      0.404343     0.093763      0.303290     0.049094&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Sepal Width       0.093763     0.104004      0.071380     0.047629&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Petal Length      0.303290     0.071380      0.304588     0.048824&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Petal Width       0.049094     0.047629      0.048824     0.075433&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;ピポッテーブルの作成&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;import numpy as np
</span><span class='line'>pd.pivot_table<span class="o">(</span>iris, <span class="nv">rows</span><span class="o">=[</span><span class="s2">&quot;Species&quot;</span><span class="o">]</span>, <span class="nv">aggfunc</span><span class="o">=</span>np.mean<span class="o">)</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Petal Length  Petal Width  Sepal Length  Sepal Width&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Species&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;setosa             1.464        0.244         5.006        3.418&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;versicolor         4.260        1.326         5.936        2.770&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;virginica          5.552        2.026         6.588        2.974&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<h3>irisでヒストグラムの実行</h3>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>import matplotlib.pyplot as plt
</span><span class='line'>plt.hist<span class="o">(</span>iris<span class="o">[</span><span class="s2">&quot;Sepal Length&quot;</span><span class="o">])</span>
</span><span class='line'>plt.xlabel<span class="o">(</span><span class="s2">&quot;Sepal Length&quot;</span><span class="o">)</span>
</span><span class='line'>plt.ylabl<span class="o">(</span><span class="s2">&quot;Freq&quot;</span><span class="o">)</span>
</span><span class='line'>plt.show<span class="o">()</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p><img src="https://farm8.staticflickr.com/7021/13477008725_d1cb5034c1.jpg" width="500" height="379" alt="スクリーンショット 2014-03-29 9.37.35"></p>

<h3>箱ひげ図</h3>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">data</span> <span class="o">=</span> <span class="o">[</span>setosa<span class="o">[</span><span class="s2">&quot;Petal Length&quot;</span><span class="o">]</span>, versiclor<span class="o">[</span><span class="s2">&quot;Petal Length&quot;</span><span class="o">]</span>, virginica<span class="o">[</span><span class="s2">&quot;Petal Length&quot;</span><span class="o">]]</span>
</span><span class='line'>plt.boxplot<span class="o">(</span>data<span class="o">)</span>
</span><span class='line'>plt.xlabel<span class="o">(</span><span class="s2">&quot;Species&quot;</span><span class="o">)</span>
</span><span class='line'>plt.ylabel<span class="o">(</span><span class="s2">&quot;Petal Length&quot;</span><span class="o">)</span>
</span><span class='line'><span class="nv">ax</span> <span class="o">=</span> plt.gca<span class="o">()</span>
</span><span class='line'>plt.setp<span class="o">(</span>ax, <span class="nv">xticklabels</span><span class="o">=[</span><span class="s2">&quot;setosa&quot;</span>, <span class="s2">&quot;versicolor&quot;</span>, <span class="s2">&quot;virginica&quot;</span><span class="o">])</span>
</span><span class='line'>plt.show<span class="o">()</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p><img src="https://farm8.staticflickr.com/7411/13477223695_baeac09a8f.jpg" width="500" height="391" alt="スクリーンショット 2014-03-29 9.55.08"></p>

<h3>散布図</h3>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>plt.scatter<span class="o">(</span>versicolor<span class="o">[</span><span class="s2">&quot;Sepal Width&quot;</span><span class="o">]</span>, versicolor<span class="o">[</span><span class="s2">&quot;Petal Width&quot;</span><span class="o">])</span>
</span><span class='line'>plt.xlabel<span class="o">(</span><span class="s2">&quot;Sepal Width&quot;</span><span class="o">)</span>
</span><span class='line'>plt.ylabel<span class="o">(</span><span class="s2">&quot;Petal Width&quot;</span><span class="o">)</span>
</span><span class='line'>plt.show<span class="o">()</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p><img src="https://farm8.staticflickr.com/7239/13477676814_035b5d164d.jpg" width="500" height="392" alt="スクリーンショット 2014-03-29 10.01.24"></p>

<h3>相関係数</h3>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;versicolorのSepal WidthとPetal Widthの相関係数&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;import numpy as np
</span><span class='line'><span class="nv">corr</span> <span class="o">=</span> np.corrcoef<span class="o">(</span>versicolor<span class="o">[</span><span class="s2">&quot;Sepal Width&quot;</span><span class="o">]</span>, versicolor<span class="o">[</span><span class="s2">&quot;Petal Width&quot;</span><span class="o">])</span>
</span><span class='line'>print<span class="o">(</span>corr<span class="o">[</span>0,1<span class="o">])</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;<span class="o">=</span>&gt; 0.663998720024&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<h3>単回帰分析</h3>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>from sklearn import linear_model
</span><span class='line'><span class="nv">LinerRegr</span> <span class="o">=</span> linear_model.LinearRegression<span class="o">()</span>
</span><span class='line'><span class="nv">X</span> <span class="o">=</span> setosa<span class="o">[[</span><span class="s2">&quot;Sepal Length&quot;</span><span class="o">]]</span>
</span><span class='line'><span class="nv">Y</span> <span class="o">=</span> setosa<span class="o">[[</span><span class="s2">&quot;Sepal Width&quot;</span><span class="o">]]</span>
</span><span class='line'>LinerRegr.fit<span class="o">(</span>X, Y<span class="o">)</span>
</span><span class='line'>plt.scatter<span class="o">(</span>X, Y, <span class="nv">color</span><span class="o">=</span><span class="s2">&quot;black&quot;</span><span class="o">)</span>
</span><span class='line'><span class="nv">px</span> <span class="o">=</span> np.arange<span class="o">(</span>X.min<span class="o">()</span>, X.max<span class="o">()</span>, .01<span class="o">)[</span>:,np.newaxis<span class="o">]</span>
</span><span class='line'><span class="nv">py</span> <span class="o">=</span> LinerRegr.predict<span class="o">(</span>px<span class="o">)</span>
</span><span class='line'>plt.plot<span class="o">(</span>px, py, <span class="nv">color</span><span class="o">=</span><span class="s2">&quot;blue&quot;</span>, <span class="nv">linewidth</span><span class="o">=</span>3<span class="o">)</span>
</span><span class='line'>plt.xlabel<span class="o">(</span><span class="s2">&quot;Sepal Length&quot;</span><span class="o">)</span>
</span><span class='line'>plt.ylabel<span class="o">(</span><span class="s2">&quot;Sepal Width&quot;</span><span class="o">)</span>
</span><span class='line'>plt.show<span class="o">()</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p><img src="https://farm6.staticflickr.com/5281/13478622995_e46e9712f8.jpg" width="500" height="385" alt="スクリーンショット 2014-03-29 11.43.26"></p>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;回帰変数&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;print<span class="o">(</span>LinerRegr.coef_<span class="o">)</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;<span class="o">=</span>&gt; <span class="o">[[</span> 0.80723367<span class="o">]]</span>&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;切片&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;print<span class="o">(</span>LinerRegr.inercept_<span class="o">)</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;<span class="o">=</span>&gt; <span class="o">[</span>-0.62301173<span class="o">]</span>&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<h3>Rの機能を使って重回帰分析 => rpy2</h3>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>import rpy2.robjects as robjects
</span><span class='line'>robjects.globalenv<span class="o">[</span><span class="s2">&quot;SepalLength&quot;</span><span class="o">]</span> <span class="o">=</span> robjects.FloatVector<span class="o">(</span>setosa<span class="o">[</span><span class="s2">&quot;Sepal Length&quot;</span><span class="o">])</span>
</span><span class='line'>robjects.globalenv<span class="o">[</span><span class="s2">&quot;SepalWidth&quot;</span><span class="o">]</span> <span class="o">=</span> robjects.FloatVector<span class="o">(</span>setosa<span class="o">[</span><span class="s2">&quot;Sepal Width&quot;</span><span class="o">])</span>
</span><span class='line'>robjects.globalenv<span class="o">[</span><span class="s2">&quot;PetalLength&quot;</span><span class="o">]</span> <span class="o">=</span> robjects.FloatVector<span class="o">(</span>setosa<span class="o">[</span><span class="s2">&quot;Petal Length&quot;</span><span class="o">])</span>
</span><span class='line'>robjects.globalenv<span class="o">[</span><span class="s2">&quot;PetalWidth&quot;</span><span class="o">]</span> <span class="o">=</span> robjects.FloatVector<span class="o">(</span>setosa<span class="o">[</span><span class="s2">&quot;Petal Width&quot;</span><span class="o">])</span>
</span><span class='line'><span class="nv">r</span> <span class="o">=</span> robjects.r&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Rの重回帰分析&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;rlm <span class="o">=</span> r.lm<span class="o">(</span><span class="s2">&quot;SepalWidth~SepalLength+PetalLength+PetalWidth&quot;</span><span class="o">)</span>
</span><span class='line'>print<span class="o">((</span>r.summary<span class="o">(</span>rlm<span class="o">)))</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Residuals:&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Min       1Q   Median       3Q      Max&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;-0.75025 -0.17983 -0.00411  0.15933  0.57704&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;#&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Coefficients:&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Estimate Std. Error t value Pr<span class="o">(</span>&gt;|t|<span class="o">)</span>&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;<span class="o">(</span>Intercept<span class="o">)</span> -0.48721    0.56900  -0.856    0.396&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;SepalLength  0.79304    0.11162   7.105 6.35e-09 ***&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;PetalLength -0.09678    0.22875  -0.423    0.674&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;PetalWidth   0.31530    0.37186   0.848    0.401&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;---&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Signif. codes:  0 ‘&lt;em&gt;&lt;strong&gt;’ 0.001 ‘&lt;/strong&gt;’ 0.01 ‘&lt;/em&gt;’ 0.05 ‘.’ 0.1 ‘ ’ 1&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;#&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Residual standard error: 0.2594 on 46 degrees of freedom&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Multiple R-squared:  0.5649,  Adjusted R-squared:  0.5366&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;F-statistic: 19.91 on 3 and 46 DF,  p-value: 2.042e-08&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<h3>ダミー変数の利用</h3>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;数値データ以外も分析に活用する&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Spiciesをダミー変数<span class="o">(</span>品種の0/1のカラム<span class="o">)</span>に変換&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;import pandas as pd
</span><span class='line'><span class="nv">dummies</span> <span class="o">=</span> pd.get_dummies<span class="o">(</span>iris<span class="o">[</span><span class="s2">&quot;Species&quot;</span><span class="o">])</span>
</span><span class='line'><span class="nv">iris</span> <span class="o">=</span> pd.concat<span class="o">([</span>iris, dummies<span class="o">]</span>, <span class="nv">axis</span><span class="o">=</span>1<span class="o">)</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<h3>回帰係数と切片を求める</h3>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">LinearRegr</span> <span class="o">=</span> linear_model.LinearRegression<span class="o">()</span>
</span><span class='line'><span class="nv">X</span> <span class="o">=</span> iris<span class="o">[[</span><span class="s2">&quot;setosa&quot;</span>, <span class="s2">&quot;versicolor&quot;</span><span class="o">]]</span>
</span><span class='line'><span class="nv">Y</span> <span class="o">=</span> iris<span class="o">[[</span><span class="s2">&quot;Sepal Length&quot;</span><span class="o">]]</span>
</span><span class='line'>LinearRegr.fit<span class="o">(</span>X, Y<span class="o">)</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;回帰係数&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;print<span class="o">(</span>LinearRegr.coef_<span class="o">)</span> <span class="c">#=&gt; [[-1.582 -0.652]]&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;切片&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;print<span class="o">(</span>LinearRegr.intercept_<span class="o">)</span> <span class="c">#=&gt; [ 6.588]</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<h3>　データマイニングの流れ</h3>

<pre>
1) ゴールを決める
2) 変数の種類・表している事象を知る
3) 1変量の解析を行う。平均値を算出し、ヒストグラム・箱ひげ図を描写
4) 2変量の解析を行う。散布図などのグラフから理解を深める
5) 説明変数を減らして、解釈しやすいモデルに当てはめる
6) 推定された結果を(2)-(4)に振り返ってモデル検証を行う
</pre>


<h3>ロジスティック回帰モデル</h3>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>import sklearn
</span><span class='line'><span class="nv">use_data</span> <span class="o">=</span> np.logical_or<span class="o">(</span>iris<span class="o">[</span><span class="s2">&quot;Species&quot;</span><span class="o">]</span> <span class="o">==</span> <span class="s2">&quot;setosa&quot;</span>, iris<span class="o">[</span><span class="s2">&quot;Species&quot;</span><span class="o">]</span> <span class="o">==</span> <span class="s2">&quot;virginica&quot;</span><span class="o">)</span>
</span><span class='line'><span class="nv">setosa_virginica</span> <span class="o">=</span> iris<span class="o">[</span>use_data<span class="o">]</span>
</span><span class='line'><span class="nv">X</span> <span class="o">=</span> setosa_virginica<span class="o">[[</span><span class="s2">&quot;Sepal Length&quot;</span>, <span class="s2">&quot;Sepal Width&quot;</span><span class="o">]]</span>
</span><span class='line'><span class="nv">Y</span> <span class="o">=</span> setosa_virginica<span class="o">[[</span><span class="s2">&quot;setosa&quot;</span><span class="o">]]</span>
</span><span class='line'><span class="nv">LogRegr</span> <span class="o">=</span> sklearn.linear_model.LogisticRegression<span class="o">(</span><span class="nv">C</span><span class="o">=</span>1.0<span class="o">)</span>
</span><span class='line'>LogRegr.fit<span class="o">(</span>X,Y<span class="o">)</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;偏回帰係数&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;print<span class="o">(</span>LogRegr.coef_<span class="o">)</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;<span class="o">=</span>&gt; <span class="o">[[</span>-2.15056433  3.53948104<span class="o">]]</span>&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;切片&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;print<span class="o">(</span>LogRegr.intercept_<span class="o">)</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;<span class="o">=</span>&gt; <span class="o">[</span> 0.94024115<span class="o">]</span>&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p>なんか間違っている気がするので、後で直す予定です。まずはちょっと触れるところから。</p>

<h3>モデル結果をグラフにして確認</h3>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">xMin</span> <span class="o">=</span> X<span class="o">[</span><span class="s2">&quot;Sepal Length&quot;</span><span class="o">]</span>.min<span class="o">()</span>
</span><span class='line'><span class="nv">xMax</span> <span class="o">=</span> X<span class="o">[</span><span class="s2">&quot;Sepal Length&quot;</span><span class="o">]</span>.max<span class="o">()</span>
</span><span class='line'><span class="nv">yMin</span> <span class="o">=</span> X<span class="o">[</span><span class="s2">&quot;Sepal Width&quot;</span><span class="o">]</span>.min<span class="o">()</span>
</span><span class='line'><span class="nv">yMax</span> <span class="o">=</span> X<span class="o">[</span><span class="s2">&quot;Sepal Width&quot;</span><span class="o">]</span>.max<span class="o">()</span>
</span><span class='line'>xx,yy <span class="o">=</span> np.meshgrid<span class="o">(</span>np.arange<span class="o">(</span>xMin, xMax, 0.01<span class="o">)</span>, np.arange<span class="o">(</span>yMin, yMax, 0.01<span class="o">))</span>
</span><span class='line'><span class="nv">Z</span> <span class="o">=</span> LogRegr.predict<span class="o">(</span>np.c_<span class="o">[</span>xx.ravel<span class="o">()</span>, yy.ravel<span class="o">()])</span>
</span><span class='line'><span class="nv">Z</span> <span class="o">=</span> Z.reshape<span class="o">(</span>xx.shape<span class="o">)</span>
</span><span class='line'>plt.figure<span class="o">()</span>
</span><span class='line'>plt.xlim<span class="o">(</span>xx.min<span class="o">()</span>, xx.max<span class="o">())</span>
</span><span class='line'>plt.ylim<span class="o">(</span>yy.min<span class="o">()</span>, yy.max<span class="o">())</span>
</span><span class='line'>plt.xlabel<span class="o">(</span><span class="s2">&quot;Sepal Length&quot;</span><span class="o">)</span>
</span><span class='line'>plt.ylabel<span class="o">(</span><span class="s2">&quot;Sepal Width&quot;</span><span class="o">)</span>
</span><span class='line'>plt.pcolormesh<span class="o">(</span>xx, yy, Z, <span class="nv">cmap</span><span class="o">=</span>plt.cm.Paired<span class="o">)</span>
</span><span class='line'>plt.scatter<span class="o">(</span>X<span class="o">[</span><span class="s2">&quot;Sepal Length&quot;</span><span class="o">]</span>, X<span class="o">[</span><span class="s2">&quot;Sepal Width&quot;</span><span class="o">]</span>, <span class="nv">c</span><span class="o">=</span>np.array<span class="o">(</span>Y<span class="o">)</span>, <span class="nv">cmap</span><span class="o">=</span>plt.cm.Paired<span class="o">)</span>
</span><span class='line'>plt.show<span class="o">()</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p><img src="https://farm8.staticflickr.com/7097/13482940784_02c88ebeb3.jpg" width="500" height="389" alt="スクリーンショット 2014-03-29 17.36.16"></p>

<h2>決定木</h2>

<p>まずはhomebrewでGraphvizとpythonで使うためのライブラリpydotをインストール。</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>brew update
</span><span class='line'>brew install gts
</span><span class='line'>brew install graphviz&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;pip uninstall pyparsing
</span><span class='line'>pip install -Iv https://pypi.python.org/packages/source/p/pyparsing/pyparsing-1.5.7.tar.gz#md5<span class="o">=</span>9be0fcdcc595199c646ab317c1d9a709
</span><span class='line'>pip install pydot
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p>続いてIPythonのコンソール。</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>from sklearn import tree
</span><span class='line'><span class="nv">X</span> <span class="o">=</span> iris<span class="o">[[</span><span class="s2">&quot;Sepal Length&quot;</span>, <span class="s2">&quot;Sepal Width&quot;</span>, <span class="s2">&quot;Petal Length&quot;</span>, <span class="s2">&quot;Petal Width&quot;</span><span class="o">]]</span>
</span><span class='line'><span class="nv">Y</span> <span class="o">=</span> iris<span class="o">[[</span><span class="s2">&quot;Species&quot;</span><span class="o">]]</span>
</span><span class='line'><span class="nv">treeClf</span> <span class="o">=</span> tree.DecisionTreeClassifier<span class="o">(</span><span class="nv">max_depth</span><span class="o">=</span>2<span class="o">)</span>
</span><span class='line'>treeClf.fit<span class="o">(</span>X, Y<span class="o">)</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<h3>決定木</h3>

<p>同じくグラフがなんか違うので、後で見直す予定。</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h2&gt;決定木の構築&lt;/h2&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;from sklearn import tree
</span><span class='line'><span class="nv">X</span> <span class="o">=</span> iris<span class="o">[[</span><span class="s2">&quot;Sepal Length&quot;</span>, <span class="s2">&quot;Sepal Width&quot;</span>, <span class="s2">&quot;Petal Length&quot;</span>, <span class="s2">&quot;Petal Width&quot;</span><span class="o">]]</span>
</span><span class='line'><span class="nv">Y</span> <span class="o">=</span> iris<span class="o">[[</span><span class="s2">&quot;Species&quot;</span><span class="o">]]</span>
</span><span class='line'><span class="nv">treeClf</span> <span class="o">=</span> tree.DecisionTreeClassifier<span class="o">(</span><span class="nv">max_depth</span><span class="o">=</span>2<span class="o">)</span>
</span><span class='line'>treeClf.fit<span class="o">(</span>X, Y<span class="o">)</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h2&gt;決定木の可視化&lt;/h2&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;import StringIO
</span><span class='line'>import pydot
</span><span class='line'><span class="nv">dot_data</span> <span class="o">=</span> StringIO.StringIO<span class="o">()</span>
</span><span class='line'>tree.export_graphviz<span class="o">(</span>treeClf, <span class="nv">out_file</span><span class="o">=</span>dot_data, <span class="nv">feature_names</span><span class="o">=[</span><span class="s2">&quot;Sepal Length&quot;</span>, <span class="s2">&quot;Sepal Width&quot;</span>, <span class="s2">&quot;Petal Length&quot;</span>, <span class="s2">&quot;Petal Width&quot;</span><span class="o">])</span>
</span><span class='line'><span class="nv">graph</span> <span class="o">=</span> pydot.graph_from_dot_data<span class="o">(</span>dot_data.getvalue<span class="o">())</span>
</span><span class='line'>graph.write_pdf<span class="o">(</span><span class="s2">&quot;iris_decision_tree.pdf&quot;</span><span class="o">)</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p><img src="https://farm8.staticflickr.com/7051/13483376885_725bd15d81.jpg" width="500" height="313" alt="スクリーンショット 2014-03-29 18.43.37"></p>

<h3>k-means法</h3>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;k-meansの実行&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;from sklearn import cluster
</span><span class='line'><span class="nv">X</span> <span class="o">=</span> iris<span class="o">[[</span><span class="s2">&quot;Sepal Length&quot;</span>, <span class="s2">&quot;Sepal Width&quot;</span><span class="o">]]</span>
</span><span class='line'><span class="nv">kmeansCls</span> <span class="o">=</span> cluster.KMeans<span class="o">(</span><span class="nv">n_clusters</span><span class="o">=</span>3<span class="o">)</span>
</span><span class='line'>kmeansCls.fit<span class="o">(</span>X<span class="o">)</span>
</span><span class='line'>print<span class="o">(</span>kmeansCls.predict<span class="o">(</span>X<span class="o">))</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;<span class="o">[</span>0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;0 0 0 0 0 0 0 0 0 0 0 0 0 1 1 2 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;1 1 1 2 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 2 1 2 2 2 2 1 2 2 2 2&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;2 2 1 1 2 2 2 2 1 2 1 2 1 2 2 1 1 2 2 2 2 2 1 2 2 2 2 1 2 2 2 1 2 2 2 1 2&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;2 1<span class="o">]</span>&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;k-means法の可視化&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;import numpy as np
</span><span class='line'>import matplotlib.pyplot as plt
</span><span class='line'>def category2int<span class="o">(</span>x<span class="o">)</span>:&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;pre&gt;&lt;code&gt;category <span class="o">=</span> <span class="o">{</span><span class="s2">&quot;setosa&quot;</span>: 0, <span class="s2">&quot;versicolor&quot;</span>: 1, <span class="s2">&quot;virginica&quot;</span>: 2<span class="o">}</span>
</span><span class='line'><span class="k">return </span>category<span class="o">[</span>x<span class="o">]</span>
</span><span class='line'>&lt;/code&gt;&lt;/pre&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;f <span class="o">=</span> lambda x: category2int<span class="o">(</span>x<span class="o">)</span>
</span><span class='line'><span class="nv">Y</span> <span class="o">=</span> iris<span class="o">[</span><span class="s2">&quot;Species&quot;</span><span class="o">]</span>.map<span class="o">(</span>f<span class="o">)</span>
</span><span class='line'><span class="nv">xMin</span> <span class="o">=</span> X<span class="o">[</span><span class="s2">&quot;Sepal Length&quot;</span><span class="o">]</span>.min<span class="o">()</span>
</span><span class='line'><span class="nv">xMax</span> <span class="o">=</span> X<span class="o">[</span><span class="s2">&quot;Sepal Length&quot;</span><span class="o">]</span>.max<span class="o">()</span>
</span><span class='line'><span class="nv">yMin</span> <span class="o">=</span> X<span class="o">[</span><span class="s2">&quot;Sepal Width&quot;</span><span class="o">]</span>.min<span class="o">()</span>
</span><span class='line'><span class="nv">yMax</span> <span class="o">=</span> X<span class="o">[</span><span class="s2">&quot;Sepal Width&quot;</span><span class="o">]</span>.max<span class="o">()</span>
</span><span class='line'>xx,yy <span class="o">=</span> np.meshgrid<span class="o">(</span>np.arange<span class="o">(</span>xMin, xMax, 0.01<span class="o">)</span>, np.arange<span class="o">(</span>yMin, yMax, 0.01<span class="o">))</span>
</span><span class='line'><span class="nv">Z</span> <span class="o">=</span> kmeansCls.predict<span class="o">(</span>np.c_<span class="o">[</span>xx.ravel<span class="o">()</span>, yy.ravel<span class="o">()])</span>
</span><span class='line'><span class="nv">Z</span> <span class="o">=</span> Z.reshape<span class="o">(</span>xx.shape<span class="o">)</span>
</span><span class='line'>plt.figure<span class="o">()</span>
</span><span class='line'>plt.xlim<span class="o">(</span>xx.min<span class="o">()</span>, xx.max<span class="o">())</span>
</span><span class='line'>plt.ylim<span class="o">(</span>yy.min<span class="o">()</span>, yy.max<span class="o">())</span>
</span><span class='line'>plt.xlabel<span class="o">(</span><span class="s2">&quot;Sepal Length&quot;</span><span class="o">)</span>
</span><span class='line'>plt.ylabel<span class="o">(</span><span class="s2">&quot;Sepal Width&quot;</span><span class="o">)</span>
</span><span class='line'>plt.pcolormesh<span class="o">(</span>xx, yy, Z, <span class="nv">cmap</span><span class="o">=</span>plt.cm.Reds<span class="o">)</span>
</span><span class='line'>plt.scatter<span class="o">(</span>X<span class="o">[</span><span class="s2">&quot;Sepal Length&quot;</span><span class="o">]</span>, X<span class="o">[</span><span class="s2">&quot;Sepal Width&quot;</span><span class="o">]</span>, <span class="nv">c</span><span class="o">=</span>np.array<span class="o">(</span>Y<span class="o">)</span>, <span class="nv">cmap</span><span class="o">=</span>plt.cm.Blues<span class="o">)</span>
</span><span class='line'>plt.show<span class="o">()</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p><img src="https://farm8.staticflickr.com/7021/13483696374_cef951e923.jpg" width="500" height="384" alt="スクリーンショット 2014-03-29 18.40.37"></p>

<h2>データマイニング 10のアルゴリズム</h2>

<h3>C4.5</h3>

<pre>
* 決定木を構築する計算アルゴリズム
* 結果のイメージが直感的て理解しやすい
* 分類の精度は高くない
</pre>


<h3>k-meansアルゴリズム</h3>

<p>クラスタリングでは次のステップを反復して計算。</p>

<pre>
1) データにクラスタを割り振る(中心と一番近いクラスタを割り振る)
2) クラスタ事の平均値の計算
</pre>


<h3>サポートベクターマシン</h3>

<pre>
* 少なめのサンプルで説明変数が多い場合に適した手法
* SVMは特徴量が膨大でも高速に計算できる
* サンプル数が増えると計算時間が急に増加する
</pre>


<h3>アプリオリアルゴリズム</h3>

<pre>
* 大量のトランザクションの中から価値あるつながりを見つけるために使われる手法
* 強力な結果が得られる上、実装が比較的容易
</pre>


<h3>EMアルゴリズム</h3>

<p>Expectation-maximization algorithm(期待値最大化法)。数式展開では計算出来ないような複雑なモデルのパラメータ推定に用いる。以下はその手順。</p>

<pre>
1) パラメータの初期値を決める
2) Exceptationステップ: 未観測データの期待値を求める
3) Maximizationステップ: 未観測データの期待値を求める
</pre>


<h3>アダブースト</h3>

<pre>
* いくつかの学習木を組み合わせることで、強力な予測性能を得る
* 実装が容易で解釈がしやすい
* ディープラーニングが出るまでは最も有力な予測モデルと言われてきた
</pre>


<h3>ナイーブベイズ</h3>

<pre>
* クラスを予測するための手法で構築が容易
* テキスト分類やパターン認識で広く利用されている
</pre>


<h2>Rによるマーケティング分析</h2>

<p><strong><a href="http://www.slideshare.net/yokkuns/r-22276096">R言語で学ぶマーケティング分析 競争ポジショニング戦略</a></strong><br/>
この記事の作者さんの発表。エッセンスがうまくまとまっています。</p>

<h4>主成分分析の実行</h4>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>setwd<span class="o">(</span><span class="s2">&quot;~/Dropbox/study-R/&quot;</span><span class="o">)</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;データの読み込み&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;sp.user.data &amp;lt;- read.csv<span class="o">(</span><span class="s2">&quot;data/sp_user_research_data.csv&quot;</span><span class="o">)</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;主成分分析 <span class="o">=</span>&gt; ユーザー間の類似関係の把握&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;sp.user.pca &amp;lt;- prcomp<span class="o">(</span>sp.user.data<span class="o">[</span>,-1<span class="o">]</span>, <span class="nv">scale</span> <span class="o">=</span>T<span class="o">)</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;バイプロットの表示&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;biplot<span class="o">(</span>sp.user.pca<span class="o">)</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p><img src="https://farm8.staticflickr.com/7385/13503111214_0e5f8a5458.jpg" width="500" height="461" alt="スクリーンショット 2014-03-30 13.33.16"></p>

<h3>k-meansによるクラスタリングの実行</h3>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>sp.user.km &amp;lt;- kmeans<span class="o">(</span>sp.user.data<span class="o">[</span>,-1<span class="o">]</span>, 4<span class="o">)</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;主成分分析の結果にクラスタ情報を付与&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;sp.user.pca.df &amp;lt;- data.frame<span class="o">(</span>sp.user.pca<span class="nv">$x</span><span class="o">)</span>
</span><span class='line'>sp.user.pca.df<span class="nv">$id</span> &amp;lt;- sp.user.data<span class="nv">$id</span>
</span><span class='line'>sp.user.pca.df<span class="nv">$cluster</span> &amp;lt;- as.factor<span class="o">(</span>sp.user.km<span class="nv">$cluster</span><span class="o">)</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;描画&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;install.packages<span class="o">(</span><span class="s2">&quot;ggplot2&quot;</span><span class="o">)</span>
</span><span class='line'>library<span class="o">(</span><span class="s2">&quot;ggplot2&quot;</span><span class="o">)</span>
</span><span class='line'>ggplot<span class="o">(</span>sp.user.pca.df, aes<span class="o">(</span><span class="nv">x</span> <span class="o">=</span> PC1, <span class="nv">y</span> <span class="o">=</span> PC2, <span class="nv">label</span> <span class="o">=</span> id, <span class="nv">col</span> <span class="o">=</span> cluster<span class="o">))</span> + geom_text<span class="o">()</span> + theme_bw<span class="o">(</span>16<span class="o">)</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p><img src="https://farm3.staticflickr.com/2894/13502876065_8f6ff5d2ca.jpg" width="500" height="361" alt="スクリーンショット 2014-03-30 13.40.50"></p>

<h3>レーダーチャートの作成</h3>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>install.packages<span class="o">(</span><span class="s2">&quot;fmsb&quot;</span><span class="o">)</span>
</span><span class='line'>library<span class="o">(</span><span class="s2">&quot;fmsb&quot;</span><span class="o">)</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;レーダーチャート用にデータを整形&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;df &amp;lt;- data.frame<span class="o">(</span>scale<span class="o">(</span>sp.user.km<span class="nv">$centers</span><span class="o">))</span>
</span><span class='line'>dfmax &amp;lt;- apply<span class="o">(</span>df, 2, max<span class="o">)</span> + 1
</span><span class='line'>dfmin &amp;lt;- apply<span class="o">(</span>df, 2, min<span class="o">)</span> - 1
</span><span class='line'>df &amp;lt;- rbind<span class="o">(</span>dfmax, dfmin, df<span class="o">)</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;レーダーチャートの描画&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;radarchart<span class="o">(</span>df, <span class="nv">seg</span> <span class="o">=</span> 5, <span class="nv">plty</span> <span class="o">=</span> 1, <span class="nv">pcol</span> <span class="o">=</span> rainbow<span class="o">(</span>4<span class="o">))</span>
</span><span class='line'>legend<span class="o">(</span><span class="s2">&quot;topright&quot;</span>, <span class="nv">legend</span> <span class="o">=</span> 1:4, <span class="nv">col</span> <span class="o">=</span> rainbow<span class="o">(</span>4<span class="o">)</span>, <span class="nv">lty</span> <span class="o">=</span> 1<span class="o">)</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p><img src="https://farm8.staticflickr.com/7019/13503401394_8b67f779c2.jpg" width="500" height="361" alt="スクリーンショット 2014-03-30 13.54.09"></p>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h2&gt;MDS<span class="o">(</span>Mult-dimentional scaling: 多次元尺度構成法<span class="o">)</span> - 知覚マップ&lt;/h2&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;install.packages<span class="o">(</span><span class="s2">&quot;MASS&quot;</span><span class="o">)</span>
</span><span class='line'>library<span class="o">(</span><span class="s2">&quot;MASS&quot;</span><span class="o">)</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;先行データの読み込み&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;setwd<span class="o">(</span><span class="s2">&quot;~/Dropbox/study-R/data&quot;</span><span class="o">)</span>
</span><span class='line'>target.data &amp;lt;- read.csv<span class="o">(</span><span class="s2">&quot;target_preference_data.csv&quot;</span>, <span class="nv">header</span> <span class="o">=</span> T<span class="o">)</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;非計算MDSの実行&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;service.dist &amp;lt;- dist<span class="o">(</span>t<span class="o">(</span>target.data<span class="o">[</span>, -1<span class="o">]))</span>
</span><span class='line'>service.map &amp;lt;- isoMDS<span class="o">(</span>service.dist<span class="o">)</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;描画用データの整形&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;service.map.df &amp;lt;- data.frame<span class="o">(</span>scale<span class="o">(</span>service.map<span class="nv">$points</span><span class="o">))</span>
</span><span class='line'>service.map.df<span class="nv">$service_name</span> &amp;lt;- names<span class="o">(</span>target.data<span class="o">[</span>, -1<span class="o">])</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;描画&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;ggplot<span class="o">(</span>service.map.df, aes<span class="o">(</span><span class="nv">x</span> <span class="o">=</span> X1, <span class="nv">y</span> <span class="o">=</span> X2, <span class="nv">label</span> <span class="o">=</span> service_name<span class="o">))</span> + geom_text<span class="o">()</span> + theme_bw<span class="o">(</span>16<span class="o">)</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p><img src="https://farm4.staticflickr.com/3749/13503351383_77ffd5a8f6.jpg" width="500" height="309" alt="スクリーンショット 2014-03-30 14.07.50"></p>

<h3>選好ベクトルの推定</h3>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;選好ベクトルの推定&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;user.preference.data &amp;lt;-
</span><span class='line'>  <span class="k">do</span>.call<span class="o">(</span>rbind,&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;pre&gt;&lt;code&gt;      lapply<span class="o">(</span>1:nrow<span class="o">(</span>target.data<span class="o">)</span>,
</span><span class='line'>             <span class="k">function</span><span class="o">(</span>i<span class="o">){</span>
</span><span class='line'>               preference.data &amp;lt;- data.frame<span class="o">(</span>
</span><span class='line'>                 <span class="nv">p</span><span class="o">=</span>as.numeric<span class="o">(</span>target.data<span class="o">[</span>i, -1<span class="o">])</span>,
</span><span class='line'>                 <span class="nv">X1</span><span class="o">=</span>service.map.df<span class="nv">$X1</span>,
</span><span class='line'>                 <span class="nv">X2</span><span class="o">=</span>service.map.df<span class="nv">$X2</span><span class="o">)</span>
</span><span class='line'>               fit &amp;lt;- lm<span class="o">(</span>p~., <span class="nv">data</span><span class="o">=</span>preference.data<span class="o">)</span>
</span><span class='line'>               b &amp;lt;- 2/sqrt<span class="o">(</span>fit<span class="nv">$coef</span><span class="o">[</span><span class="s2">&quot;X1&quot;</span><span class="o">]</span>^2+fit<span class="nv">$coef</span><span class="o">[</span><span class="s2">&quot;X2&quot;</span><span class="o">]</span>^2<span class="o">)</span>
</span><span class='line'>               data.frame<span class="o">(</span><span class="nv">X1</span><span class="o">=</span>b*fit<span class="nv">$coef</span><span class="o">[</span><span class="s2">&quot;X1&quot;</span><span class="o">]</span>,
</span><span class='line'>                          <span class="nv">X2</span><span class="o">=</span>b*fit<span class="nv">$coef</span><span class="o">[</span><span class="s2">&quot;X2&quot;</span><span class="o">]</span>,
</span><span class='line'>                          <span class="nv">service_name</span><span class="o">=</span>i<span class="o">)</span>
</span><span class='line'>             <span class="o">}))</span>
</span><span class='line'>&lt;/code&gt;&lt;/pre&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;選好ベクトルの描画&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;ggplot<span class="o">(</span>service.map.df, aes<span class="o">(</span><span class="nv">x</span><span class="o">=</span>X1, <span class="nv">y</span><span class="o">=</span>X2, <span class="nv">label</span><span class="o">=</span>service_name<span class="o">))</span> +
</span><span class='line'>  geom_text<span class="o">()</span> +
</span><span class='line'>  theme_bw<span class="o">(</span>16<span class="o">)</span> +
</span><span class='line'>  xlim<span class="o">(</span>-2,2<span class="o">)</span> +
</span><span class='line'>  ylim<span class="o">(</span>-2,2<span class="o">)</span> +
</span><span class='line'>  geom_point<span class="o">(</span><span class="nv">data</span><span class="o">=</span>user.preference.data, aes<span class="o">(</span><span class="nv">x</span><span class="o">=</span>X1, <span class="nv">y</span><span class="o">=</span>X2<span class="o">))</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p><img src="https://farm6.staticflickr.com/5111/13503847744_282c983ee8.jpg" width="500" height="309" alt="スクリーンショット 2014-03-30 14.27.52"></p>

<h3>仮想データの読み込みと散布図の描画</h3>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;利用する仮想データの読み込み&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;library<span class="o">(</span>ggplot2<span class="o">)</span>
</span><span class='line'>library<span class="o">(</span>scales<span class="o">)</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;GRPと売上データの読み込み&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;grp.data &amp;lt;- read.csv<span class="o">(</span><span class="s2">&quot;http://image.gihyo.co.jp/assets/files/book/2013/978-4-7741-5896-9/download/grp.csv&quot;</span>, <span class="nv">header</span> <span class="o">=</span> T<span class="o">)</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;散布図の描画&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;ggplot<span class="o">(</span>grp.data, aes<span class="o">(</span><span class="nv">x</span><span class="o">=</span>grp, <span class="nv">y</span><span class="o">=</span>amount<span class="o">))</span> +
</span><span class='line'>  geom_point<span class="o">()</span> +
</span><span class='line'>  scale_y_continuous<span class="o">(</span><span class="nv">label</span><span class="o">=</span>comma, <span class="nv">limits</span><span class="o">=</span>c<span class="o">(</span>0,360000<span class="o">))</span> +
</span><span class='line'>  ylab<span class="o">(</span><span class="s2">&quot;Sales&quot;</span><span class="o">)</span> +
</span><span class='line'>  xlab<span class="o">(</span><span class="s2">&quot;GRP&quot;</span><span class="o">)</span> +
</span><span class='line'>  theme_bw<span class="o">(</span>16<span class="o">)</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p><img src="https://farm4.staticflickr.com/3707/13508727343_d9de5250f9.jpg" width="500" height="312" alt="スクリーンショット 2014-03-30 20.50.20"></p>

<h3>線形型モデルの構築</h3>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;可視化はgeom_smooth関数ですぐにできる&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;ggplot<span class="o">(</span>grp.data, aes<span class="o">(</span><span class="nv">x</span><span class="o">=</span>grp, <span class="nv">y</span><span class="o">=</span>amount<span class="o">))</span> +
</span><span class='line'>  geom_point<span class="o">()</span> +
</span><span class='line'>  scale_y_continuous<span class="o">(</span><span class="nv">label</span><span class="o">=</span>comma, <span class="nv">limits</span><span class="o">=</span>c<span class="o">(</span>0, 360000<span class="o">))</span> +
</span><span class='line'>  ylab<span class="o">(</span><span class="s2">&quot;Sales&quot;</span><span class="o">)</span> +
</span><span class='line'>  xlab<span class="o">(</span><span class="s2">&quot;GRP&quot;</span><span class="o">)</span> +
</span><span class='line'>  geom_smooth<span class="o">(</span><span class="nv">method</span> <span class="o">=</span> <span class="s2">&quot;lm&quot;</span><span class="o">)</span> +
</span><span class='line'>  theme_bw<span class="o">(</span>16<span class="o">)</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;モデル構築&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;fit &amp;lt;- lm<span class="o">(</span>amount~grp, <span class="nv">data</span><span class="o">=</span>grp.data<span class="o">)</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;モデル概要の表示&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;summary<span class="o">(</span>fit<span class="o">)</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Call:&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;lm<span class="o">(</span><span class="nv">formula</span> <span class="o">=</span> amount ~ grp, <span class="nv">data</span> <span class="o">=</span> grp.data<span class="o">)</span>&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Residuals:&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Min     1Q Median     3Q    Max&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;-31521  -8275    321   8701  36962&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Coefficients:&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Estimate Std. Error t value Pr<span class="o">(</span>&gt;|t|<span class="o">)</span>&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;<span class="o">(</span>Intercept<span class="o">)</span> 229812.53    2561.73   89.71   &amp;lt;2e-16 ***&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;grp            455.54      15.93   28.60   &amp;lt;2e-16 ***&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;---&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Signif. codes:  0 ‘&lt;em&gt;&lt;strong&gt;’ 0.001 ‘&lt;/strong&gt;’ 0.01 ‘&lt;/em&gt;’ 0.05 ‘.’ 0.1 ‘ ’ 1&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Residual standard error: 13070 on 198 degrees of freedom&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Multiple R-squared:  0.8051,  Adjusted R-squared:  0.8042&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;F-statistic: 818.1 on 1 and 198 DF,  p-value: &amp;lt; 2.2e-16&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p><img src="https://farm4.staticflickr.com/3762/13508864803_8876878af0.jpg" width="500" height="292" alt="スクリーンショット 2014-03-30 20.58.40"></p>

<h3>xx減型モデルの構築</h3>

<p>読めなかった。日本語苦手っすw</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>fit &amp;lt;- lm<span class="o">(</span>log<span class="o">(</span>amount<span class="o">)</span>~log<span class="o">(</span>grp<span class="o">)</span>, <span class="nv">data</span><span class="o">=</span>grp.data<span class="o">)</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;モデル概要&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;summary<span class="o">(</span>fit<span class="o">)</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Call:&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;lm<span class="o">(</span><span class="nv">formula</span> <span class="o">=</span> log<span class="o">(</span>amount<span class="o">)</span> ~ log<span class="o">(</span>grp<span class="o">)</span>, <span class="nv">data</span> <span class="o">=</span> grp.data<span class="o">)</span>&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Residuals:&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Min        1Q    Median        3Q       Max&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;-0.121782 -0.023589 -0.003298  0.025672  0.116504&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Coefficients:&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Estimate Std. Error t value Pr<span class="o">(</span>&gt;|t|<span class="o">)</span>&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;<span class="o">(</span>Intercept<span class="o">)</span> 11.546963   0.032379  356.62   &amp;lt;2e-16 ***&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;log<span class="o">(</span>grp<span class="o">)</span>     0.213933   0.006551   32.66   &amp;lt;2e-16 ***&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;---&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Signif. codes:  0 ‘&lt;em&gt;&lt;strong&gt;’ 0.001 ‘&lt;/strong&gt;’ 0.01 ‘&lt;/em&gt;’ 0.05 ‘.’ 0.1 ‘ ’ 1&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Residual standard error: 0.04064 on 198 degrees of freedom&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Multiple R-squared:  0.8434,  Adjusted R-squared:  0.8426&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;F-statistic:  1067 on 1 and 198 DF,  p-value: &amp;lt; 2.2e-16&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;予測結果を描画&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;fit.data &amp;lt;- data.frame<span class="o">(</span><span class="nv">grp</span><span class="o">=</span>grp.data<span class="nv">$grp</span>, <span class="nv">amount</span><span class="o">=</span>exp<span class="o">(</span>fit<span class="nv">$fitted</span>.values<span class="o">))</span>
</span><span class='line'>ggplot<span class="o">(</span>grp.data, aes<span class="o">(</span><span class="nv">x</span><span class="o">=</span>grp, <span class="nv">y</span><span class="o">=</span>amount<span class="o">))</span> +
</span><span class='line'>  geom_point<span class="o">()</span> +
</span><span class='line'>  geom_line<span class="o">(</span><span class="nv">data</span><span class="o">=</span>fit.data, aes<span class="o">(</span><span class="nv">x</span><span class="o">=</span>grp, <span class="nv">y</span><span class="o">=</span>amount<span class="o">))</span> +
</span><span class='line'>  scale_y_continuous<span class="o">(</span><span class="nv">label</span><span class="o">=</span>comma, <span class="nv">limits</span><span class="o">=</span>c<span class="o">(</span>0,360000<span class="o">))</span> +
</span><span class='line'>  ylab<span class="o">(</span><span class="s2">&quot;Sales&quot;</span><span class="o">)</span> +
</span><span class='line'>  xlab<span class="o">(</span><span class="s2">&quot;GRP&quot;</span><span class="o">)</span> +
</span><span class='line'>  theme_bw<span class="o">(</span>16<span class="o">)</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p><img src="https://farm4.staticflickr.com/3766/13509463494_e26fa8a9e8.jpg" width="500" height="356" alt="スクリーンショット 2014-03-30 21.19.14"></p>

<h3>AとBが同じ場合のA/Bテストのシミュレーション</h3>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>library<span class="o">(</span><span class="s2">&quot;plyr&quot;</span><span class="o">)</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;A/Bの心のコンバージョン率を設定&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;A1.CVR &amp;lt;- 0.09
</span><span class='line'>B1.CVR &amp;lt;- 0.09&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;サンプル数&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;n &amp;lt;- 10000
</span><span class='line'>set.seed<span class="o">(</span>2<span class="o">)</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;シミュレーション&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;AB1 &amp;lt;- data.frame<span class="o">(</span><span class="nv">Pattern</span><span class="o">=</span>c<span class="o">(</span>rep<span class="o">(</span><span class="s2">&quot;A&quot;</span>, n<span class="o">)</span>, rep<span class="o">(</span><span class="s2">&quot;B&quot;</span>, n<span class="o">))</span>, <span class="nv">CV</span><span class="o">=</span>c<span class="o">(</span>rbinom<span class="o">(</span>n, 1, A1.CVR<span class="o">)</span>, rbinom<span class="o">(</span>n, 1, B1.CVR<span class="o">)))</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;コンバージョン率の算出&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;ddply<span class="o">(</span>AB1, .<span class="o">(</span>Pattern<span class="o">)</span>, summarize, <span class="nv">CVR</span><span class="o">=</span>mean<span class="o">(</span>CV<span class="o">))</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Pattern    CVR&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;1       A 0.0942&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;2       B 0.0912&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;カイ二乗検定&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;chisq.test<span class="o">(</span>table<span class="o">(</span>AB1<span class="o">))</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Pearson<span class="s1">&#39;s Chi-squared test with Yates&#39;</span> continuity correction&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;data:  table<span class="o">(</span>AB1<span class="o">)</span>&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;X-squared <span class="o">=</span> 0.5, <span class="nv">df</span> <span class="o">=</span> 1, p-value <span class="o">=</span> 0.4795&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<h3>Bのほうが高い場合のA/Bテストのシミュレーション</h3>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>A2.CVR &amp;lt;- 0.095
</span><span class='line'>B2.CVR &amp;lt;- 0.097
</span><span class='line'>n &amp;lt;- 10000
</span><span class='line'>set.seed<span class="o">(</span>2<span class="o">)</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;シミュレーション&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;AB2 &amp;lt;- data.frame<span class="o">(</span><span class="nv">Pattern</span><span class="o">=</span>c<span class="o">(</span>rep<span class="o">(</span><span class="s2">&quot;A&quot;</span>, n<span class="o">)</span>, rep<span class="o">(</span><span class="s2">&quot;B&quot;</span>, n<span class="o">))</span>, <span class="nv">CV</span><span class="o">=</span>c<span class="o">(</span>rbinom<span class="o">(</span>n, 1, A2.CVR<span class="o">)</span>, rbinom<span class="o">(</span>n, 1, B2.CVR<span class="o">)))</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;コンバージョン率の算出&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;ddply<span class="o">(</span>AB2, .<span class="o">(</span>Pattern<span class="o">)</span>, summarize, <span class="nv">CVR</span> <span class="o">=</span> mean<span class="o">(</span>CV<span class="o">))</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Pattern   CVR&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;1       A 0.100&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;2       B 0.097&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;カイ二乗検定&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;chisq.test<span class="o">(</span>table<span class="o">(</span>AB2<span class="o">))</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Pearson<span class="s1">&#39;s Chi-squared test with Yates&#39;</span> continuity correction&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;data:  table<span class="o">(</span>AB2<span class="o">)</span>&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;X-squared <span class="o">=</span> 0.4735, <span class="nv">df</span> <span class="o">=</span> 1, p-value <span class="o">=</span> 0.4914&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<h3>50万件でのシミュレーション</h3>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>A3.CVR &amp;lt;- 0.095
</span><span class='line'>B3.CVR &amp;lt;- 0.097
</span><span class='line'>n &amp;lt;- 500000
</span><span class='line'>set.seed<span class="o">(</span>2<span class="o">)</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;シミュレーション&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;AB3 &amp;lt;- data.frame<span class="o">(</span><span class="nv">Pattern</span><span class="o">=</span>c<span class="o">(</span>rep<span class="o">(</span><span class="s2">&quot;A&quot;</span>, n<span class="o">)</span>, rep<span class="o">(</span><span class="s2">&quot;B&quot;</span>, n<span class="o">))</span>,&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;pre&gt;&lt;code&gt;              <span class="nv">CV</span><span class="o">=</span>c<span class="o">(</span>rbinom<span class="o">(</span>n, 1, A3.CVR<span class="o">)</span>, rbinom<span class="o">(</span>n, 1, B3.CVR<span class="o">)))</span>
</span><span class='line'>&lt;/code&gt;&lt;/pre&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;コンバージョン率の算出&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;ddply<span class="o">(</span>AB3, .<span class="o">(</span>Pattern<span class="o">)</span>, summarize, <span class="nv">CVR</span><span class="o">=</span>mean<span class="o">(</span>CV<span class="o">))</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Pattern      CVR&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;1       A 0.095192&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;2       B 0.097040&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;カイ二乗検定の実行&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;chisq.test<span class="o">(</span>table<span class="o">(</span>AB3<span class="o">))</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Pearson<span class="s1">&#39;s Chi-squared test with Yates&#39;</span> continuity correction&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;data:  table<span class="o">(</span>AB3<span class="o">)</span>&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;X-squared <span class="o">=</span> 9.8061, <span class="nv">df</span> <span class="o">=</span> 1, p-value <span class="o">=</span> 0.001739&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<h3>直交表の作成</h3>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>install.packages<span class="o">(</span><span class="s2">&quot;conjoint&quot;</span><span class="o">)</span>
</span><span class='line'>library<span class="o">(</span>conjoint<span class="o">)</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;構成要素&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;experiment &amp;lt;- expand.grid<span class="o">(</span>
</span><span class='line'>  <span class="nv">imgA</span> <span class="o">=</span> c<span class="o">(</span><span class="s2">&quot;ImageA1&quot;</span>, <span class="s2">&quot;ImageA2&quot;</span><span class="o">)</span>,
</span><span class='line'>  <span class="nv">imgB</span> <span class="o">=</span> c<span class="o">(</span><span class="s2">&quot;ImageB1&quot;</span>, <span class="s2">&quot;ImageB2&quot;</span><span class="o">)</span>,
</span><span class='line'>  <span class="nv">txtA</span> <span class="o">=</span> c<span class="o">(</span><span class="s2">&quot;TextA1&quot;</span>, <span class="s2">&quot;TextA2&quot;</span><span class="o">)</span>,
</span><span class='line'>  <span class="nv">txtB</span> <span class="o">=</span> c<span class="o">(</span><span class="s2">&quot;TextB1&quot;</span>, <span class="s2">&quot;TextB2&quot;</span><span class="o">))</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;交流表の作成&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;design.ort &amp;lt;- caFactorialDesign<span class="o">(</span><span class="nv">data</span><span class="o">=</span> experiment, <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;orthogonal&quot;</span><span class="o">)</span>
</span><span class='line'>design.ort&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;imgA    imgB   txtA   txtB&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;2  ImageA2 ImageB1 TextA1 TextB1&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;3  ImageA1 ImageB2 TextA1 TextB1&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;5  ImageA1 ImageB1 TextA2 TextB1&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;8  ImageA2 ImageB2 TextA2 TextB1&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;9  ImageA1 ImageB1 TextA1 TextB2&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;12 ImageA2 ImageB2 TextA1 TextB2&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;14 ImageA2 ImageB1 TextA2 TextB2&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;15 ImageA1 ImageB2 TextA2 TextB2&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<h3>ロジスティック回帰モデルの構築</h3>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;仮想のテスト結果データの読み込み<span class="o">(</span>csがないので以下実行していません<span class="o">)</span>&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;web.test.data &amp;lt;- read.csv<span class="o">(</span><span class="s2">&quot;web_test_sample.csv&quot;</span><span class="o">)</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;上位6件だけ表示&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;head<span class="o">(</span>web.test.data<span class="o">)</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;ロジスティック回帰モデルの構築&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;fit &amp;lt;- step<span class="o">(</span>glm<span class="o">(</span>cv~., <span class="nv">data</span> <span class="o">=</span> web.test.data<span class="o">[</span>,-1<span class="o">]</span>, <span class="nv">family</span><span class="o">=</span>binomial<span class="o">))</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;モデル概要&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;summary<span class="o">(</span>fit<span class="o">)</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<h2>Fluentd 入門</h2>

<p>ログ回収をストリーミングで行ってくれるツール。ツールについての詳しい説明は、創業者の古橋さんのインタビュー記事『<strong><a href="http://www.atmarkit.co.jp/ait/articles/1310/07/news010.html">グリー技術者が聞いた、fluentdの新機能とTreasure Data古橋氏の野心</a></strong>』がわかりやすくてオススメです。</p>

<h3>ログ解析の従来の課題</h3>

<pre>
1) ログデータの転送に長い時間が必要、帯域の局所的な消費
2) データが解析可能になるまでのタイムラグ
3) ネットワーク障害などによる不安定さ
</pre>


<h3>Fluentdの利点</h3>

<pre>
1) JSON形式で構造化されている
2) 豊富なプラグイン(プラガブル)
3) 導入が容易
4) 耐障害性、バッファ、レジューム機能、可用性
</pre>


<h3>アーキテクチャ</h3>

<pre>
1) input: さまざまなソースからデータを読み取りFluentd用の形式に変換
2) Engine: 入ってきたデータをどのBuffe/Outpuプラグインに渡すかをルーティング
3) Bufferプラグイン: Outputプラグインの前にデータを一時保持する仕組み
4) Outputプラグイン: Bufferプラグインから渡されたデータを書き出す
</pre>


<h3>ログ構造</h3>

<pre>
tag: ログの種類。ルーティングで利用
time: ログが記録されたUNIX時刻
record: JSON形式のログ内容
</pre>


<h3>活用方法</h3>

<pre>
1) ログ収集: ログを集めてS3やHadoopに渡す
2) 統計 + 可視性: ログの統計情報を取得し、グラフ表示系のツールと連携する
3) 検知/通知: しきい値ベースや、データマイニングの異常値検出の通知など
</pre>


<h3>システム構成</h3>

<pre>
forwarder: ログ発生場所に立ち上げてログ回収 => aggregatorに送信
aggregator: 複数workerのためのロードバランシング、複数台構成による冗長化
worker: ログのパースや書き換えなど負荷の高い処理を行う
serializer: workerの処理結果のログを集約して別システムに書き出す
watcher: ログからメトリックスを収集、検知や通知を行う
</pre>


<h3>事例紹介</h3>

<pre>
1) ログの回収: DSPの広告効果のレポーティングのための収集の仕組み
2) nginx ログの可視化: Real Time Bidding(RTB)のツール
</pre>


<h2>あとがき</h2>

<p>中身濃すぎる！超面白かったです＾＾</p>

<h2>Speical Thanks</h2>

<p><strong><a href="http://stackoverflow.com/questions/20572366/sudo-pip-install-matplotlib-fails-to-find-freetype-headers-os-x-mavericks">python - <code>Sudo pip install matplotlib</code> fails to find freetype headers. [OS X Mavericks / 10.9] - Stack Overflow</a></strong></p>

<p><strong><a href="http://stackoverflow.com/questions/15951748/pydot-and-graphviz-error-couldnt-import-dot-parser-loading-of-dot-files-will">python - pydot and graphviz error: Couldn't import dot_parser, loading of dot files will not be possible - Stack Overflow</a></strong></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[「R Tips」で学ぶ R言語のプログラミング的Tips]]></title>
    <link href="http://morizyun.github.io/blog/R-tips-Grammer-PG-language/"/>
    <updated>2014-03-22T10:50:00+09:00</updated>
    <id>http://morizyun.github.io/blog/R-tips-Grammer-PG-language</id>
    <content type="html"><![CDATA[<p><a href="http://www.amazon.co.jp/gp/product/4274067831/ref=as_li_qf_sp_asin_il?ie=UTF8&camp=247&creative=1211&creativeASIN=4274067831&linkCode=as2&tag=morizyun00-22"><img border="0" src="http://ws.assoc-amazon.jp/widgets/q?_encoding=UTF8&ASIN=4274067831&Format=_SL160_&ID=AsinImage&MarketPlace=JP&ServiceVersion=20070822&WS=1&tag=morizyun00-22" width="150" style="float: left; margin: 0 20px 20px 0;" ></a><img src="http://www.assoc-amazon.jp/e/ir?t=morizyun00-22&l=as2&o=9&a=4274067831" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important;" />統計学やR言語を勉強していく過程で、R言語のプログラミング的な側面や言語仕様をちゃんと理解したいと思うようになりました。ということでチャンレンジしたのが、『<strong><a href="http://cse.naro.affrc.go.jp/takezawa/r-tips/r.html">R-Tips</a></strong>』です。</p>

<p>このサイトはいくつかのトピックに分かれているので、自分のRの使い方に合わせて勉強しやすくなっています。まだまだ前半戦ですが、特に覚えておきたいコマンドを中心にメモを書いていきます。</p>

<p><strong>(03/22 10:50) 回帰分析部分の説明を追記</strong><br/></p>

<!-- more -->


<br style="clear:both;"/>


<p><script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- responsive -->
<ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4186413323075068" data-ad-slot="2106406992" data-ad-format="auto"></ins>
<script>
  (adsbygoogle = window.adsbygoogle || []).push({});
</script></p>

<h3>Rの便利なメソッド</h3>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>x &amp;lt;- <span class="s2">&quot;1245&quot;</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;中身についての情報を取得&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;str<span class="o">(</span>x<span class="o">)</span> <span class="c">#=&gt; chr &quot;1245&quot;</span>
</span><span class='line'>summary<span class="o">(</span>x<span class="o">)</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Length     Class      Mode&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;1 character character&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;基本的な情報&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;y &amp;lt;- c<span class="o">(</span>2, 3, 4, 5<span class="o">)</span>
</span><span class='line'>summary<span class="o">(</span>y<span class="o">)</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Min. 1st Qu.  Median    Mean 3rd Qu.    Max.&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;2.00    2.75    3.50    3.50    4.25    5.00&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<h3>ベクトルの生成</h3>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;aからbまでのベクトルを生成 <span class="o">=</span>&gt; a:b&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;1:10&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;<span class="o">=</span>&gt; 1  2  3  4  5  6  7  8  9 10&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;<span class="o">(</span>a, b<span class="o">)</span>間をn等分するベクトルを生成 <span class="o">=</span>&gt; seq<span class="o">(</span>a, b, <span class="nv">length</span> <span class="o">=</span> n<span class="o">)</span>&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;seq<span class="o">(</span>1, 2, <span class="nv">length</span> <span class="o">=</span> 10<span class="o">)</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;1.000000 1.111111 1.222222 1.333333 1.444444&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;1.555556 1.666667 1.777778 1.888889 2.000000&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;aからbまでcずつ増加するベクトルを生成 <span class="o">=</span>&gt; seq<span class="o">(</span>a, b, <span class="nv">by</span> <span class="o">=</span> c<span class="o">)</span>&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;seq<span class="o">(</span>2, 15, <span class="nv">by</span><span class="o">=</span>3<span class="o">)</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;<span class="o">=</span>&gt; 2  5  8 11 14&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;a:bをc回繰り返すベクトルを生成 <span class="o">=</span>&gt; rep<span class="o">(</span>a:b, <span class="nb">times</span> <span class="o">=</span> c<span class="o">)</span>&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;rep<span class="o">(</span>1:3, <span class="nb">times</span> <span class="o">=</span> 2<span class="o">)</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;<span class="o">=</span>&gt; 1 2 3 1 2 3&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;ベクトル内の値をユニークにする<span class="o">(</span>重複した値を取り除く<span class="o">)</span> <span class="o">=</span>&gt; unique<span class="o">(</span>x<span class="o">)</span>&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;unique<span class="o">(</span>c<span class="o">(</span>1,2,4,6,3,3,2,1<span class="o">))</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;<span class="o">=</span>&gt; 1 2 4 6 3&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;0をn個並べたベクトルを生成&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;numeric<span class="o">(</span>5<span class="o">)</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;<span class="o">=</span>&gt; 0 0 0 0 0&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;x &amp;lt;- 1:5&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;要素の並びを逆順にする&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;rev<span class="o">(</span>x<span class="o">)</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;<span class="o">=</span>&gt; 5 4 3 2 1&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;y &amp;lt;- 5:1&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;要素の並び順を整列させる&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;sort<span class="o">(</span>y<span class="o">)</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;<span class="o">=</span>&gt; 1 2 3 4 5&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<h3>ベクトル条件</h3>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;どれか一つでも条件をみたすものがあるか？&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;any<span class="o">(</span>y &gt; 4<span class="o">)</span> <span class="c">#=&gt; TRUE&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;すべて条件をみたすか？&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;all<span class="o">(</span>y &gt; 2<span class="o">)</span> <span class="c">#=&gt; FALSE&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;NULLか否か&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;is.null<span class="o">(</span>NULL<span class="o">)</span> <span class="c">#=&gt; TRUE&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;NA<span class="o">(</span>データの欠損<span class="o">)</span>か否か&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;is.na<span class="o">(</span>NA<span class="o">)</span> <span class="c">#=&gt; TRUE&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;NaN<span class="o">(</span>数では表せない<span class="o">)</span>か否か&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;is.nan<span class="o">(</span>0/0<span class="o">)</span> <span class="c">#=&gt; TRUE&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;有限か否か&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;is.finite<span class="o">(</span>1<span class="o">)</span> <span class="c">#=&gt; TRUE&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;無限か否か&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;is.infinite<span class="o">(</span>1/0<span class="o">)</span> <span class="c">#=&gt; TRUE</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<h3>ベクトルの中身</h3>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>x &amp;lt;- 1:5&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;2-4番目の要素&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;x<span class="o">[</span>2:4<span class="o">]</span> <span class="c">#=&gt; 2, 3, 4&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;1, 4番目の要素以外を取り出す&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;x<span class="o">[</span>c<span class="o">(</span>-1,-4<span class="o">)]</span> <span class="c">#=&gt; 2, 3, 5&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;3より大きい要素を取り出す&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;x<span class="o">[</span>3 &amp;lt; x<span class="o">]</span> <span class="c">#=&gt; 4, 5&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;1より大きく、4より小さい要素を取り出す&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;x<span class="o">[</span>1 &amp;lt; x &amp;amp; x &amp;lt; 4<span class="o">]</span> <span class="c">#=&gt; 2, 3&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'>&lt;p&gt;y &amp;lt;- x * 2&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;条件を満たす要素の番号を返す&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;<span class="o">(</span>1:length<span class="o">(</span>y<span class="o">))[</span>1 &amp;lt; y &amp;amp; y &amp;lt; 8<span class="o">]</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;<span class="o">=</span>&gt; 1, 2, 3&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<h3>日付</h3>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;日付型に変換&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;as.Date<span class="o">(</span><span class="s2">&quot;2012/08/15&quot;</span><span class="o">)</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;<span class="o">=</span>&gt; <span class="s2">&quot;2012-08-15&quot;</span>&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;as.Date<span class="o">(</span><span class="s2">&quot;20130222&quot;</span>, <span class="nv">format</span><span class="o">=</span><span class="s2">&quot;%Y%m%d&quot;</span><span class="o">)</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;<span class="o">=</span>&gt; <span class="s2">&quot;2013-02-22&quot;</span>&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;現在時刻を日付オブジェクトで取得&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;today &amp;lt;- Sys.Date<span class="o">()</span>
</span><span class='line'>now &amp;lt;- Sys.time<span class="o">()</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;日付の差分&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;x &amp;lt;- as.Date<span class="o">(</span>c<span class="o">(</span><span class="s2">&quot;2012/07/01&quot;</span>, <span class="s2">&quot;2009/08/01&quot;</span><span class="o">))</span>
</span><span class='line'>x<span class="o">[</span>2<span class="o">]</span> - x<span class="o">[</span>1<span class="o">]</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;<span class="o">=</span>&gt; Time difference of -1065 days&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<h3>文字列</h3>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;文字列ベクトルの結合&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;paste<span class="o">(</span>month.abb, 1:8, c<span class="o">(</span><span class="s2">&quot;st&quot;</span>, <span class="s2">&quot;nd&quot;</span>, <span class="s2">&quot;rd&quot;</span>, rep<span class="o">(</span><span class="s2">&quot;th&quot;</span>,5<span class="o">)))</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;<span class="s2">&quot;Jan 1 st&quot;</span> <span class="s2">&quot;Feb 2 nd&quot;</span> <span class="s2">&quot;Mar 3 rd&quot;</span> <span class="s2">&quot;Apr 4 th&quot;</span> <span class="s2">&quot;May 5 th&quot;</span> <span class="s2">&quot;Jun 6 th&quot;</span>&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;<span class="s2">&quot;Jul 7 th&quot;</span> <span class="s2">&quot;Aug 8 th&quot;</span> <span class="s2">&quot;Sep 1 st&quot;</span> <span class="s2">&quot;Oct 2 nd&quot;</span> <span class="s2">&quot;Nov 3 rd&quot;</span> <span class="s2">&quot;Dec 4 th&quot;</span>&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;文字列から特定の部分を切り出し&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;substring<span class="o">(</span><span class="s2">&quot;defghijklmnopqr&quot;</span>, 3, 7<span class="o">)</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;<span class="o">=</span>&gt; <span class="s2">&quot;fghij&quot;</span>&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<h3>データフレーム</h3>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
<span class='line-number'>81</span>
<span class='line-number'>82</span>
<span class='line-number'>83</span>
<span class='line-number'>84</span>
<span class='line-number'>85</span>
<span class='line-number'>86</span>
<span class='line-number'>87</span>
<span class='line-number'>88</span>
<span class='line-number'>89</span>
<span class='line-number'>90</span>
<span class='line-number'>91</span>
<span class='line-number'>92</span>
<span class='line-number'>93</span>
<span class='line-number'>94</span>
<span class='line-number'>95</span>
<span class='line-number'>96</span>
<span class='line-number'>97</span>
<span class='line-number'>98</span>
<span class='line-number'>99</span>
<span class='line-number'>100</span>
<span class='line-number'>101</span>
<span class='line-number'>102</span>
<span class='line-number'>103</span>
<span class='line-number'>104</span>
<span class='line-number'>105</span>
<span class='line-number'>106</span>
<span class='line-number'>107</span>
<span class='line-number'>108</span>
<span class='line-number'>109</span>
<span class='line-number'>110</span>
<span class='line-number'>111</span>
<span class='line-number'>112</span>
<span class='line-number'>113</span>
<span class='line-number'>114</span>
<span class='line-number'>115</span>
<span class='line-number'>116</span>
<span class='line-number'>117</span>
<span class='line-number'>118</span>
<span class='line-number'>119</span>
<span class='line-number'>120</span>
<span class='line-number'>121</span>
<span class='line-number'>122</span>
<span class='line-number'>123</span>
<span class='line-number'>124</span>
<span class='line-number'>125</span>
<span class='line-number'>126</span>
<span class='line-number'>127</span>
<span class='line-number'>128</span>
<span class='line-number'>129</span>
<span class='line-number'>130</span>
<span class='line-number'>131</span>
<span class='line-number'>132</span>
<span class='line-number'>133</span>
<span class='line-number'>134</span>
<span class='line-number'>135</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;データフレームの作成&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;sex &amp;lt;- c<span class="o">(</span>rep<span class="o">(</span><span class="s2">&quot;F&quot;</span>, 3<span class="o">)</span>, rep<span class="o">(</span><span class="s2">&quot;M&quot;</span>, 1<span class="o">))</span>
</span><span class='line'>height &amp;lt;- seq<span class="o">(</span>150, 180, <span class="nv">length</span><span class="o">=</span>4<span class="o">)</span>
</span><span class='line'>weight &amp;lt;- seq<span class="o">(</span>70, 80, <span class="nv">length</span><span class="o">=</span>4<span class="o">)</span>
</span><span class='line'>df &amp;lt;- data.frame<span class="o">(</span>sex, height, weight<span class="o">)</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;sex height   weight&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;1   F    150 70.00000&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;2   F    160 73.33333&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;3   F    170 76.66667&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;4   M    180 80.00000&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;データオブジェクトの行数を返す&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;nrow<span class="o">(</span>df<span class="o">)</span> <span class="c">#=&gt; 4&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;summaryでデータフレームの要素の情報を表示&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;summary<span class="o">(</span>df<span class="o">)</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;sex       height          weight&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;F:3   Min.   :150.0   Min.   :70.0&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;M:1   1st Qu.:157.5   1st Qu.:72.5&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Median :165.0   Median :75.0&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Mean   :165.0   Mean   :75.0&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;3rd Qu.:172.5   3rd Qu.:77.5&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Max.   :180.0   Max.   :80.0&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;heightで降順に並べ直し&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;sort_list &amp;lt;- order<span class="o">(</span>df<span class="nv">$height</span>,decreasing<span class="o">=</span>T<span class="o">)</span>
</span><span class='line'>df<span class="o">[</span>sort_list,<span class="o">]</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;sex height   weight&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;4   M    180 80.00000&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;3   F    170 76.66667&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;2   F    160 73.33333&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;1   F    150 70.00000&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;typeカラムに条件に応じてBIG, MIDDLE, SMALL&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;df<span class="nv">$type</span> &lt;- ifelse<span class="o">(</span>height &gt;<span class="o">=</span> 170, <span class="s2">&quot;BIG&quot;</span>, ifelse<span class="o">(</span>height&gt;<span class="o">=</span>160, <span class="s2">&quot;MIDDLE&quot;</span>, <span class="s2">&quot;SMALL&quot;</span><span class="o">))</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;sex height   weight   <span class="nb">type</span>&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;1   F    150 70.00000  SMALL&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;2   F    160 73.33333 MIDDLE&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;3   F    170 76.66667    BIG&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;4   M    180 80.00000    BIG&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;一律でheight_mmカラムを追加&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;transform<span class="o">(</span>df, <span class="nv">height_mm</span><span class="o">=</span>df<span class="nv">$height</span>*100<span class="o">)</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;sex height   weight   <span class="nb">type </span>height_mm&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;1   F    150 70.00000  SMALL     15000&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;2   F    160 73.33333 MIDDLE     16000&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;3   F    170 76.66667    BIG     17000&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;4   M    180 80.00000    BIG     18000&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;行番号を追加&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;df<span class="nv">$id</span> &amp;lt;- row.names<span class="o">(</span>df<span class="o">)</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;sex height   weight   <span class="nb">type </span>id&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;1   F    150 70.00000  SMALL  1&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;2   F    160 73.33333 MIDDLE  2&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;3   F    170 76.66667    BIG  3&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;4   M    180 80.00000    BIG  4&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;行方向の結合&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;cbind<span class="o">(</span>df, df<span class="o">)</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;sex height   weight   <span class="nb">type </span>id sex height   weight   <span class="nb">type </span>id&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;1   F    150 70.00000  SMALL  1   F    150 70.00000  SMALL  1&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;2   F    160 73.33333 MIDDLE  2   F    160 73.33333 MIDDLE  2&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;3   F    170 76.66667    BIG  3   F    170 76.66667    BIG  3&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;4   M    180 80.00000    BIG  4   M    180 80.00000    BIG  4&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;列方向の結合&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;rbind<span class="o">(</span>df, df<span class="o">)</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;sex height   weight   <span class="nb">type </span>id&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;1   F    150 70.00000  SMALL  1&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;2   F    160 73.33333 MIDDLE  2&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;3   F    170 76.66667    BIG  3&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;4   M    180 80.00000    BIG  4&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;5   F    150 70.00000  SMALL  1&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;6   F    160 73.33333 MIDDLE  2&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;7   F    170 76.66667    BIG  3&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;8   M    180 80.00000    BIG  4&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<h2>サンプルデータセット</h2>

<p>Rで勉強していく上で、避けて通れないのがサンプルデータの確保です。Rにはデフォルトで複数のデータセットが格納されています。『<strong><a href="http://d.hatena.ne.jp/hoxo_m/20120214/p1">統計を学びたい人へ贈る、統計解析に使えるデータセットまとめ</a></strong>』に初心者におすすめなデータがまとめられています！</p>

<h2>データセットを使った集計・グラフ表示</h2>

<p>デフォルトのデータセットのあやめのデータ(iris)を使って、いくつかサンプルを書いていきます。</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;irisはあやめのデータ・セット&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;width_set &lt;- iris<span class="o">[</span>,c<span class="o">(</span><span class="s2">&quot;Sepal.Length&quot;</span>, <span class="s2">&quot;Petal.Length&quot;</span>, <span class="s2">&quot;Species&quot;</span><span class="o">)]</span>
</span><span class='line'>width_large &lt;- width_set<span class="o">[</span>width_set<span class="nv">$Species</span> <span class="o">==</span> <span class="s2">&quot;versicolor&quot;</span>,<span class="o">]</span>
</span><span class='line'>mean<span class="o">(</span>width_large<span class="nv">$Petal</span>.Length<span class="o">)</span> <span class="c">#=&gt; 4.26&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;plyrパッケージの導入&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;plyr : データフレームの加工をしやすくするパッケージ&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;install.packages<span class="o">(</span><span class="s2">&quot;plyr&quot;</span><span class="o">)</span>
</span><span class='line'>library<span class="o">(</span><span class="s2">&quot;plyr&quot;</span><span class="o">)</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;irisのデータからSpeciesをキーにSepal.Length<span class="o">(</span>がくの長さ<span class="o">)</span>の平均を出す&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;data &amp;lt;- ddply<span class="o">(</span>iris, .<span class="o">(</span>Species<span class="o">)</span>, summarise, Sepal.Length.Average<span class="o">=</span>mean<span class="o">(</span>Sepal.Length<span class="o">))</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Species Sepal.Length.Average&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;1     setosa                5.006&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;2 versicolor                5.936&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;3  virginica                6.588&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Sepal.Length<span class="o">(</span>がくの長さ<span class="o">)</span>の平均順でならべ直す&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;arrange<span class="o">(</span>data, desc<span class="o">(</span>Sepal.Length.Average<span class="o">))</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Species Sepal.Length.Average&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;1  virginica                6.588&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;2 versicolor                5.936&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;3     setosa                5.006&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;棒グラフ&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;棒グラフは「月ごとの販売実績」のように書くカテゴリの度数や比率を表示するために利用する&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;index &lt;- iris<span class="nv">$Sepal</span>.Length &gt; 5.5
</span><span class='line'>dat &amp;lt;- iris<span class="o">[</span>index,<span class="o">]</span>
</span><span class='line'>xtabs<span class="o">(</span>~Species, <span class="nv">data</span><span class="o">=</span>dat, drop.unused.levels<span class="o">=</span>T<span class="o">)</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Species&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;setosa versicolor  virginica&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;3         39         49&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;qplot<span class="o">(</span>Species, <span class="nv">data</span><span class="o">=</span>dat, <span class="nv">geom</span><span class="o">=</span><span class="s2">&quot;bar&quot;</span><span class="o">)</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p><img src="http://farm8.staticflickr.com/7298/13000340725_82a36b0b98.jpg" width="413" height="439" alt="Rplot01"></p>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;ヒストグラム&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;身長・成績・人口などのように連続量のデータの度数<span class="o">(</span>割合<span class="o">)</span>を表示する&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;qplot<span class="o">(</span>Sepal.Length, <span class="nv">data</span><span class="o">=</span>iris, <span class="nv">geom</span><span class="o">=</span><span class="s2">&quot;histogram&quot;</span>, <span class="nv">binwidth</span><span class="o">=</span>0.5, <span class="nv">xlim</span><span class="o">=</span>c<span class="o">(</span>4,8<span class="o">))</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p><img src="http://farm3.staticflickr.com/2581/13000752024_5542498537.jpg" width="413" height="439" alt="Rplot"></p>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;箱ひげ図&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;カテゴリごとの中央値、箱、ヒゲ、外れ値を表示。ヒストグラムの簡略版&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;1つが複数カテゴリのデータ、もう一つが連続量の場合に用いる&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;qplot<span class="o">(</span>Species, Sepal.Length, <span class="nv">data</span><span class="o">=</span>iris, <span class="nv">geom</span><span class="o">=</span><span class="s2">&quot;boxplot&quot;</span><span class="o">)</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p><img src="http://farm4.staticflickr.com/3671/13000403615_dc98e591a0.jpg" width="413" height="439" alt="Rplot02"></p>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;散布図&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;2つの変数の値に従って座標平面上に複数の点を表示&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;2つの変数がともに連続量の場合に用いる&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;index &amp;lt;- iris<span class="nv">$Species</span> !<span class="o">=</span> <span class="s1">&#39;virginica&#39;</span>
</span><span class='line'>dat &amp;lt;- iris<span class="o">[</span>index,<span class="o">]</span>
</span><span class='line'>qplot<span class="o">(</span>Sepal.Length, Petal.Length, <span class="nv">data</span><span class="o">=</span>iris, <span class="nv">geom</span><span class="o">=</span>c<span class="o">(</span><span class="s2">&quot;point&quot;</span>, <span class="s2">&quot;smooth&quot;</span><span class="o">)</span>, <span class="nv">color</span><span class="o">=</span>Species<span class="o">)</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p><img src="http://farm8.staticflickr.com/7353/13000607723_53c89f2449.jpg" width="413" height="439" alt="Rplot03"></p>

<h2>サンプルデータを使った単回帰分析</h2>

<p>サンプルデータを知らなすぎて、あまり適切な分析ではないですが、手元にある範囲内で。</p>

<h3>キーワード</h3>

<pre>
独立変数: 原因となる変数
従属変数: 性質を明らかにしたい側の変数
単回帰分析: 独立変数が1つの分析
重回帰分析: 独立変数が2つ以上の分析
</pre>


<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;データ・セットを使った回帰分析のサンプル&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;library<span class="o">(</span>ggplot2<span class="o">)</span>
</span><span class='line'>qplot<span class="o">(</span>Petal.Length, <span class="nv">data</span><span class="o">=</span>dat, <span class="nv">geom</span><span class="o">=</span><span class="s2">&quot;histogram&quot;</span>, <span class="nv">bandwith</span><span class="o">=</span>0.5, <span class="nv">xlim</span><span class="o">=</span>c<span class="o">(</span>3,6<span class="o">))</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p><img src="http://farm8.staticflickr.com/7044/13155728714_9b43830cb0_o.png" /></p>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>index &amp;lt;- iris<span class="nv">$Species</span> <span class="o">==</span> <span class="s1">&#39;versicolor&#39;</span>
</span><span class='line'>dat &amp;lt;- iris<span class="o">[</span>index,<span class="o">]</span>
</span><span class='line'>result &amp;lt;- glm<span class="o">(</span>Sepal.Length~Petal.Length, <span class="nv">data</span><span class="o">=</span>dat, <span class="nv">family</span><span class="o">=</span>gaussian<span class="o">)</span>
</span><span class='line'>summary<span class="o">(</span>result<span class="o">)</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;glm<span class="o">(</span><span class="nv">formula</span> <span class="o">=</span> Sepal.Length ~ Petal.Length, <span class="nv">family</span> <span class="o">=</span> gaussian,&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;data <span class="o">=</span> dat<span class="o">)</span>&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Deviance Residuals:&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Min        1Q    Median        3Q       Max&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;-0.73479  -0.20272  -0.02065   0.26092   0.69956&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Coefficients:&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Estimate Std. Error t value Pr<span class="o">(</span>&gt;|t|<span class="o">)</span>&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;<span class="o">(</span>Intercept<span class="o">)</span>    2.4075     0.4463   5.395 2.08e-06 ***&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Petal.Length   0.8283     0.1041   7.954 2.59e-10 ***&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;---&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Signif. codes:  0 ‘&lt;em&gt;&lt;strong&gt;’ 0.001 ‘&lt;/strong&gt;’ 0.01 ‘&lt;/em&gt;’ 0.05 ‘.’ 0.1 ‘ ’ 1&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;<span class="o">(</span>Dispersion parameter <span class="k">for </span>gaussian family taken to be 0.1173364<span class="o">)</span>&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Null deviance: 13.0552  on 49  degrees of freedom&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Residual deviance:  5.6321  on 48  degrees of freedom&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;AIC: 38.717&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Number of Fisher Scoring iterations: 2&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;<span class="o">=</span>&gt; 回帰式 <span class="nv">y</span> <span class="o">=</span> ax + bで <span class="nv">a</span> <span class="o">=</span> 2.4075, <span class="nv">b</span> <span class="o">=</span> 0.8283&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;<span class="o">=</span>&gt; Coefficientsの最後が信頼度。<span class="s1">&#39;***&#39;</span>なので高い&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<h2>適切な回帰分析式の比較</h2>

<h3>AIC : 赤池情報量規準</h3>

<p>統計モデルの良さを評価するための指標。</p>

<h3>統計モデルの比較</h3>

<p>こちらも素人のトライなので、ツッコミお待ちしております！</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>library<span class="o">(</span>ggplot2<span class="o">)</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;単純にヒストグラムでプロット&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;qplot<span class="o">(</span>Volume, <span class="nv">data</span><span class="o">=</span>trees, <span class="nv">geom</span><span class="o">=</span><span class="s2">&quot;histogram&quot;</span>, <span class="nv">bandwith</span><span class="o">=</span>5, <span class="nv">xlim</span><span class="o">=</span>c<span class="o">(</span>10,80<span class="o">))</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p><img src="http://farm3.staticflickr.com/2741/13155614675_20ae60951c.jpg" width="413" height="439" alt="Rplot"></p>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;対数をとってヒストグラムでプロット&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;qplot<span class="o">(</span>log<span class="o">(</span>Volume<span class="o">)</span>, <span class="nv">data</span><span class="o">=</span>trees, <span class="nv">geom</span><span class="o">=</span><span class="s2">&quot;histogram&quot;</span>, <span class="nv">bandwith</span><span class="o">=</span>0.2, <span class="nv">xlim</span><span class="o">=</span>c<span class="o">(</span>2,5<span class="o">))</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p><img src="http://farm8.staticflickr.com/7146/13156766444_35d1a2b410.jpg" width="413" height="439" alt="Rplot02"></p>

<p>本来は正規分布に従いそうなデータですが、サンプルデータを目視する限りは対数正規分布に近そう。</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>result &amp;lt;- glm<span class="o">(</span>Volume~Girth, <span class="nv">data</span> <span class="o">=</span> trees, <span class="nv">family</span><span class="o">=</span>gaussian<span class="o">)</span>
</span><span class='line'>summary<span class="o">(</span>result<span class="o">)</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;<span class="o">(</span>Intercept<span class="o">)</span> -36.9435     3.3651  -10.98 7.62e-12 ***&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Girth         5.0659     0.2474   20.48  &amp;lt; 2e-16 ***&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;AIC: 181.64&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;result &amp;lt;- glm<span class="o">(</span>Volume~Girth, <span class="nv">data</span> <span class="o">=</span> trees, <span class="nv">family</span><span class="o">=</span>gaussian<span class="o">(</span><span class="nv">link</span><span class="o">=</span><span class="s2">&quot;log&quot;</span><span class="o">))</span>
</span><span class='line'>summary<span class="o">(</span>result<span class="o">)</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;<span class="o">(</span>Intercept<span class="o">)</span> 1.340516   0.097224   13.79 2.89e-14 ***&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Girth       0.147910   0.005839   25.33  &amp;lt; 2e-16 ***&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;AIC: 169.14&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;result &amp;lt;- glm<span class="o">(</span>Volume~<span class="o">(</span>Girth+Height<span class="o">)</span>, <span class="nv">data</span> <span class="o">=</span> trees, <span class="nv">family</span><span class="o">=</span>gaussian<span class="o">)</span>
</span><span class='line'>summary<span class="o">(</span>result<span class="o">)</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;<span class="o">(</span>Intercept<span class="o">)</span> -57.9877     8.6382  -6.713 2.75e-07 ***&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Girth         4.7082     0.2643  17.816  &amp;lt; 2e-16 ***&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Height        0.3393     0.1302   2.607   0.0145 *&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;AIC: 176.91&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;result &amp;lt;- glm<span class="o">(</span>Volume~<span class="o">(</span>Girth+Height<span class="o">)</span>, <span class="nv">data</span> <span class="o">=</span> trees, <span class="nv">family</span><span class="o">=</span>gaussian<span class="o">(</span><span class="nv">link</span><span class="o">=</span><span class="s2">&quot;log&quot;</span><span class="o">))</span>
</span><span class='line'>summary<span class="o">(</span>result<span class="o">)</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;<span class="o">(</span>Intercept<span class="o">)</span> 0.679294   0.258124   2.632  0.01366 *&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Girth       0.134163   0.006845  19.601  &amp;lt; 2e-16 ***&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Height      0.011144   0.003975   2.804  0.00907 **&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;AIC: 163.37&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;<span class="o">=</span>&gt; 上記4つのAIC<span class="o">(</span>赤池情報量規準<span class="o">)</span>からみると一番最後の回帰式<span class="o">(</span>対数正規分布で独立変数にGirth, Heightをとる<span class="o">)</span>が最も近い&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<h2>ポワソン回帰</h2>

<p>ポワソン回帰は離散値かつ、ゼロ以上の範囲のデータを扱うときに利用する。<br/></p>

<p>適切なデータでないんで、雰囲気だけメモ。</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>dat &amp;lt;- InsectSprays
</span><span class='line'>qplot<span class="o">(</span>count, <span class="nv">data</span><span class="o">=</span>dat, <span class="nv">geom</span><span class="o">=</span><span class="s2">&quot;histogram&quot;</span>, <span class="nv">bandwith</span><span class="o">=</span>1, <span class="nv">xlim</span><span class="o">=</span>c<span class="o">(</span>0,30<span class="o">))</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p><img src="http://farm4.staticflickr.com/3680/13319567853_70a00eccfc.jpg" width="413" height="439" alt="Rplot04"></p>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>result &amp;lt;- glm<span class="o">(</span>count~spray, <span class="nv">data</span><span class="o">=</span>dat, <span class="nv">family</span><span class="o">=</span>poisson<span class="o">(</span><span class="nv">link</span><span class="o">=</span><span class="s2">&quot;log&quot;</span><span class="o">))</span>
</span><span class='line'>summary<span class="o">(</span>result<span class="o">)</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;<span class="o">(</span>Intercept<span class="o">)</span>  2.67415    0.07581  35.274  &amp;lt; 2e-16 ***&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;sprayB       0.05588    0.10574   0.528    0.597&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;sprayC      -1.94018    0.21389  -9.071  &amp;lt; 2e-16 ***&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;sprayD      -1.08152    0.15065  -7.179 7.03e-13 ***&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;sprayE      -1.42139    0.17192  -8.268  &amp;lt; 2e-16 ***&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;sprayF       0.13926    0.10367   1.343    0.179&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;AIC: 376.59&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<h2>独立変数の最適化</h2>

<p>複数の独立変数から、Rが効率的なアルゴリズムで自動的にモデル選択をする方法。</p>

<p>適切なサンプルデータで後でリトライする予定。。。</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;独立変数の最適化&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;dat &amp;lt;- iris
</span><span class='line'>result &amp;lt;- glm<span class="o">(</span>Petal.Width~Sepal.Length+Sepal.Width+Petal.Length, <span class="nv">data</span> <span class="o">=</span> dat, <span class="nv">family</span><span class="o">=</span>gaussian<span class="o">(</span><span class="nv">link</span><span class="o">=</span><span class="s2">&quot;log&quot;</span><span class="o">))</span>
</span><span class='line'>step<span class="o">(</span>result, <span class="nv">direction</span><span class="o">=</span><span class="s2">&quot;backward&quot;</span><span class="o">)</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Start:  <span class="nv">AIC</span><span class="o">=</span>19.47&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Petal.Width ~ Sepal.Length + Sepal.Width + Petal.Length&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Df Deviance     AIC&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;- Sepal.Width   1    9.472  19.337&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;&lt;none&gt;               9.355  19.469&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;- Sepal.Length  1   12.225  57.615&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;- Petal.Length  1   33.293 207.890&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Step:  <span class="nv">AIC</span><span class="o">=</span>19.34&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Petal.Width ~ Sepal.Length + Petal.Length&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Df Deviance     AIC&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;&lt;none&gt;               9.472  19.337&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;- Sepal.Length  1   12.371  57.394&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;- Petal.Length  1   38.191 226.476&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Call:  glm<span class="o">(</span><span class="nv">formula</span> <span class="o">=</span> Petal.Width ~ Sepal.Length + Petal.Length, <span class="nv">family</span> <span class="o">=</span> gaussian<span class="o">(</span><span class="nv">link</span> <span class="o">=</span> <span class="s2">&quot;log&quot;</span><span class="o">)</span>,&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;data <span class="o">=</span> dat<span class="o">)</span>&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Coefficients:&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;<span class="o">(</span>Intercept<span class="o">)</span>  Sepal.Length  Petal.Length&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;-0.3528       -0.2442        0.4752&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Degrees of Freedom: 149 Total <span class="o">(</span>i.e. Null<span class="o">)</span>;  147 Residual&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Null Deviance:      86.57&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Residual Deviance: 9.472  AIC: 19.34&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;#&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;<span class="o">=</span>&gt; 以上より、Petal.Width <span class="o">=</span> -0.2442&lt;em&gt;Sepal.Length + 0.4752&lt;/em&gt;Petal.Length + -0.3528 がAICでベスト&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<h2>ユークリッド距離を使ったクラスタリング</h2>

<p>ユークリッド距離や重心の概念を使ってクラスタリングを行う。</p>

<p>Rに難儀しているので、とりあえず暫定で出来たところまで。使い方を覚えたらちゃんと直したい！</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>library<span class="o">(</span><span class="s2">&quot;plyr&quot;</span><span class="o">)</span>
</span><span class='line'>dat &amp;lt;- InsectSprays
</span><span class='line'>dat2 &amp;lt;- ddply<span class="o">(</span>dat, .<span class="o">(</span>spray<span class="o">)</span>, summarise, <span class="nv">count_ave</span><span class="o">=</span>mean<span class="o">(</span>count<span class="o">))</span>
</span><span class='line'>distw &amp;lt;- dist<span class="o">(</span>dat2, <span class="nv">method</span><span class="o">=</span><span class="s2">&quot;euclidean&quot;</span><span class="o">)</span>
</span><span class='line'>clust &amp;lt;- hclust<span class="o">(</span>distw, <span class="nv">method</span><span class="o">=</span><span class="s2">&quot;ward&quot;</span><span class="o">)</span>
</span><span class='line'>plclust<span class="o">(</span>clust, <span class="nv">hang</span><span class="o">=</span>-1, <span class="nv">xlab</span><span class="o">=</span><span class="s2">&quot;spray&quot;</span>, <span class="nv">ylab</span><span class="o">=</span><span class="s2">&quot;count&quot;</span><span class="o">)</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p><img src="http://farm4.staticflickr.com/3715/13157567135_d51493c391.jpg" width="413" height="439" alt="Rplot03"></p>

<h2>Special Thanks</h2>

<p><strong><a href="http://www.slideshare.net/teramonagi/tokyo-r30-20130420">「plyrパッケージで君も前処理スタ☆」改め「plyrパッケージ徹底入門」</a></strong><br/>
第30回R勉強会＠東京(#TokyoR)の資料</p>

<h2>あとで読む</h2>

<p><strong><a href="http://matome.naver.jp/odai/2134709644082692701">統計・機械学習・データマイニングの無料で読めるPDF資料</a></strong><br/></p>

<blockquote>
オンラインで無料公開されている書籍等のPDF資料をまとめ。
</blockquote>


<p><strong><a href="http://www.r.dl.itc.u-tokyo.ac.jp/node/33">統計的機械学習 | 中川研究室</a></strong><br/></p>

<blockquote>
統計的機械学習とは、観測されたデータから統計的手法を用い新たな知識を導出すること。 統計的機械学習には種々の分類がある、この説明。
</blockquote>


<p><strong><a href="http://www.slideshare.net/pfi/deep-learning-22350063">一般向けのDeep Learning</a></strong><br/></p>

<blockquote>
PFI 全体セミナーで発表した、専門家向けではなく一般向けのDeep Learning（深層学習）の解説です。どのような場面で活躍しているのか、今までの学習手法と何が違うのかを解説しています。
</blockquote>


<p><strong><a href="http://www.toukei-kentei.jp/index.html">統計検定：Japan Statistical Society Certificate</a></strong><br/></p>

<blockquote>
「統計検定」とは、統計に関する知識や活用力を評価する全国統一試験です。 データに基づいて客観的に判断し、科学的に問題を解決する能力は、仕事や研究をするための21世紀型スキルとして国際社会で広く認められています。
</blockquote>


<p><strong><a href="http://gci.t.u-tokyo.ac.jp/tutorial/">チュートリアル | グローバル消費インテリジェンス寄附講座</a></strong><br/></p>

<blockquote>
GCI チュートリアル (Global Consumer Intelligence Tutorial) は、東京大学工学部 松尾豊研究室とグローバル消費インテリジェンス寄附講座の学生のためのチュートリアルです。ウェブと人工知能を活かした研究を行うために必要な技能を身に付けることを目的としています。
</blockquote>


<p><script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- responsive -->
<ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4186413323075068" data-ad-slot="2106406992" data-ad-format="auto"></ins>
<script>
  (adsbygoogle = window.adsbygoogle || []).push({});
</script></p>

<h2>変更来歴</h2>

<p>(03/15 10:45) 回帰に関する記述を追記<br/>
(03/21 17:25) データ・フレームを追記<br/>
(03/22 10:50) 回帰分析部分の説明を追記<br/></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[「Rによるやさしい統計学」で学ぶ R言語と統計学の基礎徹底解説 2-5章]]></title>
    <link href="http://morizyun.github.io/blog/easy-R-statistics-book-review/"/>
    <updated>2014-03-21T17:40:00+09:00</updated>
    <id>http://morizyun.github.io/blog/easy-R-statistics-book-review</id>
    <content type="html"><![CDATA[<p><a href="http://www.amazon.co.jp/gp/product/4274067106/ref=as_li_qf_sp_asin_il?ie=UTF8&camp=247&creative=1211&creativeASIN=4274067106&linkCode=as2&tag=morizyun00-22"><img border="0" src="http://ws.assoc-amazon.jp/widgets/q?_encoding=UTF8&ASIN=4274067106&Format=_SL160_&ID=AsinImage&MarketPlace=JP&ServiceVersion=20070822&WS=1&tag=morizyun00-22" width="150" style="float: left; margin: 0 20px 20px 0;" ></a><img src="http://www.assoc-amazon.jp/e/ir?t=morizyun00-22&l=as2&o=9&a=4274067106" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important;" />R言語と統計学を同時に学ぶことができる『 <strong><a href="http://www.amazon.co.jp/gp/product/4274067106/ref=as_li_qf_sp_asin_il?ie=UTF8&amp;camp=247&amp;creative=1211&amp;creativeASIN=4274067106&amp;linkCode=as2&amp;tag=morizyun00-22">Rによるやさしい統計学</a></strong>』を少しずつ読み進めています。</p>

<p>この本は難しい数学の式などは出てこずに、わかりやすい言葉や例で統計学の基礎的なキーワードとそれに紐づく「<strong>Rの使い方</strong>」に焦点を当てて、説明をしてくれています。個人的には事前に基本的な概念を説明した入門書を一冊やってから、「Rではどうやるか？」を知るにオススメな本だと思います。</p>

<p>まだ前半戦の状態ですが、この中で特に覚えておきたい部分を中心にメモを書いていきます。</p>

<!-- more -->


<br style="clear:both;"/>


<p><script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- responsive -->
<ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4186413323075068" data-ad-slot="2106406992" data-ad-format="auto"></ins>
<script>
  (adsbygoogle = window.adsbygoogle || []).push({});
</script></p>

<h2>2章: 1つの変数の記述統計</h2>

<p>データ解析の出発点となる『1つの変数』の記述方法についての説明。</p>

<h2>レクチャー</h2>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;c: データの値を結合させる&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;a &amp;lt;- c<span class="o">(</span>1, 2, 5, 10, 15, 5<span class="o">)</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;ベクトル/行列の要素の平均 <span class="o">(</span>行平均, 列平均<span class="o">)</span>&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;mean<span class="o">(</span>a<span class="o">)</span> <span class="c">#=&gt; 6.333333&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;中央値&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;median<span class="o">(</span>a<span class="o">)</span> <span class="c">#=&gt; 5&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;頻度を整理して得られる分布である「度数分布」の表を作る&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;table<span class="o">(</span>a<span class="o">)</span>
</span><span class='line'>a
</span><span class='line'> 1  2  5 10 15
</span><span class='line'> 1  1  2  1  1&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;不偏分散&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h2&gt;確率変数の分布が期待値からどれだけ散らばっているかを示す値。&lt;/h2&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;var<span class="o">(</span>a<span class="o">)</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;標準偏差&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h2&gt;ある集団についてのデータがどのように分布しているかを表す値。&lt;/h2&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;sd<span class="o">(</span>a<span class="o">)</span>
</span><span class='line'>sqrt<span class="o">(</span>mean<span class="o">((</span>a-mean<span class="o">(</span>a<span class="o">))</span>&lt;sup&gt;2<span class="o">))</span>&lt;/sup&gt;&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h2&gt;標本分散の関数を自作&lt;/h2&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;varp &amp;lt;- <span class="k">function</span><span class="o">(</span>x<span class="o">)</span> <span class="o">{</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;pre&gt;&lt;code&gt;標本分散 &amp;lt;- var<span class="o">(</span>x<span class="o">)</span>*<span class="o">(</span>length<span class="o">(</span>x<span class="o">)</span> - 1<span class="o">)</span>/length<span class="o">(</span>x<span class="o">)</span>
</span><span class='line'>標本分散
</span><span class='line'>&lt;/code&gt;&lt;/pre&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;<span class="o">}</span>
</span><span class='line'>varp<span class="o">(</span>a<span class="o">)</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h2&gt;別ファイルの関数の読み込み&lt;/h2&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;source<span class="o">(</span><span class="s2">&quot;varp.R&quot;</span><span class="o">)</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<h3>例題やってみた</h3>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>a &amp;lt;- c<span class="o">(</span>60,100,50,40,50,230,120,240,200,30<span class="o">)</span>
</span><span class='line'>b &amp;lt;- c<span class="o">(</span>50,60,40,50,100,80,30,20,100,120<span class="o">)</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;1<span class="o">)</span>&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;hist<span class="o">(</span>a<span class="o">)</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p><img src="http://farm4.staticflickr.com/3830/13230876803_318d1aa460.jpg" width="413" height="439" alt="Rplot03"></p>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>hist<span class="o">(</span>b<span class="o">)</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p><img src="http://farm8.staticflickr.com/7136/13231086804_1af98a9796.jpg" width="413" height="439" alt="Rplot"></p>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;2<span class="o">)</span>&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;mean<span class="o">(</span>a<span class="o">)</span>
</span><span class='line'>sqrt<span class="o">(</span>mean<span class="o">((</span>a-mean<span class="o">(</span>a<span class="o">))</span>&lt;sup&gt;2<span class="o">))</span>&lt;/sup&gt; <span class="c"># 標準偏差</span>
</span><span class='line'>mean<span class="o">(</span>b<span class="o">)</span>
</span><span class='line'>sqrt<span class="o">(</span>mean<span class="o">((</span>b-mean<span class="o">(</span>b<span class="o">))</span>&lt;sup&gt;2<span class="o">))</span>&lt;/sup&gt; <span class="c"># 標準偏差&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;3<span class="o">)</span>&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;<span class="o">(</span>a - mean<span class="o">(</span>a<span class="o">))</span>/sqrt<span class="o">(</span>mean<span class="o">((</span>a-mean<span class="o">(</span>a<span class="o">))</span>&lt;sup&gt;2<span class="o">))</span>&lt;/sup&gt;
</span><span class='line'><span class="o">(</span>b - mean<span class="o">(</span>b<span class="o">))</span>/sqrt<span class="o">(</span>mean<span class="o">((</span>b-mean<span class="o">(</span>b<span class="o">))</span>&lt;sup&gt;2<span class="o">))</span>&lt;/sup&gt;
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<h2>3章: 2つの変数の記述統計</h2>

<p>『2つの変数における量的変数における関係、質的変数における関係』についての説明です。ちなみに量的変数と質的変数の説明は次の通り。</p>

<h2>レクチャー</h2>

<pre>
* 量的変数: データ間に優劣や大小が比較できる。『テストの点数』のような数値データ
=> 比率データ: 絶対的なゼロ点を有する(質量、長さ、年齢、時間、金額など)
=> 間隔データ: 数値(メモリ)の間隔が等しい(気温、知能指数など)

* 質的変数: データ間に優劣がなく、大小関係が比較できない。「男・女」や「好き・嫌い」など
=> 順序データ: 大小関係(順序)のみ意味を持つ(満足度、選好度、硬度など)
=> 名義データ: 内容を区別するために便宜的に割りあてる(電話番号、性別など)
</pre>


<p>さらに、相関(correlation)と回帰(regression)の説明は次の通り。</p>

<pre>
相関 correlation #=> xとyの間に区別をもうけず対等に見る見方や方法
回帰 regression  #=> ｘからyを見る(yからxを見る)方法
</pre>


<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;分散図<span class="o">(</span>グラフの表示<span class="o">)</span>&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;a &amp;lt;- c<span class="o">(</span>1,2,3,4,5<span class="o">)</span>
</span><span class='line'>b &amp;lt;- a * 2
</span><span class='line'>plot<span class="o">(</span>a, b<span class="o">)</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p><img src="http://farm3.staticflickr.com/2827/13231117083_681e5133e3.jpg" width="413" height="439" alt="Rplot01"></p>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;共分散<span class="o">(</span>数値<span class="o">)</span>&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h2&gt;2つのデータが、どれだけ関連性・連動性があるかを示す係数&lt;/h2&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;cov<span class="o">(</span>a, b<span class="o">)</span> <span class="c">#=&gt; 5&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;<span class="o">=</span>&gt; sum<span class="o">((</span>a-mean<span class="o">(</span>a<span class="o">))</span>*<span class="o">(</span>b-mean<span class="o">(</span>b<span class="o">)))</span>/length<span class="o">(</span>a<span class="o">)</span> と同義&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;<span class="o">=</span>&gt; mean<span class="o">((</span>a-mean<span class="o">(</span>a<span class="o">))</span>*<span class="o">(</span>b-mean<span class="o">(</span>b<span class="o">)))</span> と同義&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;相関係数&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h2&gt;2つのデータが、どれだけ関連性があるのかを示す係数&lt;/h2&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;cor<span class="o">(</span>a, b<span class="o">)</span> <span class="c">#=&gt; 1&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;<span class="o">=</span>&gt; cov<span class="o">(</span>a, b<span class="o">)</span>/<span class="o">(</span>sd<span class="o">(</span>a<span class="o">)</span>*sd<span class="o">(</span>b<span class="o">))</span>と同義&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p>相関係数は<code>-1 &lt;= r &lt;= 1</code>で次のように関係性がわかります。</p>

<pre>
-0.2 <= r <=  0.2                 #=> ほとんど相関なし
-0.4 <= r <  -0.2, 0.2 < r <= 0.4 #=> 弱い相関あり
-0.7 <= r <   0.4, 0.4 < r <= 0.7 #=> 中程度の相関あり
-1.0 <= r <  -0.7, 0.7 < r <= 1.0 #=> 強い相関あり 
</pre>


<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;クロス集計表&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h2&gt;質的変数の関係について表す&lt;/h2&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;math &amp;lt;- c<span class="o">(</span><span class="s1">&#39;like&#39;</span>, <span class="s1">&#39;hate&#39;</span>, <span class="s1">&#39;like&#39;</span>, <span class="s1">&#39;like&#39;</span>, <span class="s1">&#39;hate&#39;</span><span class="o">)</span>
</span><span class='line'>statistics &amp;lt;- c<span class="o">(</span><span class="s1">&#39;hate&#39;</span>, <span class="s1">&#39;like&#39;</span>, <span class="s1">&#39;hate&#39;</span>, <span class="s1">&#39;like&#39;</span>, <span class="s1">&#39;like&#39;</span><span class="o">)</span>
</span><span class='line'>table<span class="o">(</span>math, statistics<span class="o">)</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;pre&gt;&lt;code&gt;  statistics
</span><span class='line'>&lt;/code&gt;&lt;/pre&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;math   hate like
</span><span class='line'>  hate    0    2
</span><span class='line'>  like    2    1&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;ファイ係数&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h2&gt;1と0の２つの値からなる変数（二値変数）に対して計算される相関係数&lt;/h2&gt;
</span><span class='line'>
</span><span class='line'>&lt;h2&gt;math<span class="o">(</span>数学<span class="o">)</span>、statistics<span class="o">(</span>統計<span class="o">)</span>の好き<span class="o">=</span>&gt;1、嫌い<span class="o">=</span>&gt;0に変換して考える&lt;/h2&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;math_zero &lt;- ifelse<span class="o">(</span><span class="nv">math</span><span class="o">==</span><span class="s1">&#39;like&#39;</span>, 1, 0<span class="o">)</span>
</span><span class='line'>math_zero <span class="c">#=&gt; 1 0 1 1 0</span>
</span><span class='line'>statistics_zero &lt;- ifelse<span class="o">(</span><span class="nv">statistics</span><span class="o">==</span><span class="s1">&#39;like&#39;</span>, 1, 0<span class="o">)</span>
</span><span class='line'>statistics_zero <span class="c">#=&gt; 0 1 0 1 1</span>
</span><span class='line'>cor<span class="o">(</span>math_zero, statistics_zero<span class="o">)</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<h3>例題やってみた</h3>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;1<span class="o">)</span> 散布図&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;hour &amp;lt;- c<span class="o">(</span>1,3,10,12,6,3,8,4,1,5<span class="o">)</span>
</span><span class='line'>score &amp;lt;- c<span class="o">(</span>20,40,100,80,50,50,70,50,10,60<span class="o">)</span>
</span><span class='line'>plot<span class="o">(</span>hour, score<span class="o">)</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p><img src="http://farm8.staticflickr.com/7004/13276651894_85af764fd4.jpg" width="413" height="439" alt="Rplot02"></p>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;2<span class="o">)</span> 相関係数&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;cor<span class="o">(</span>hour, score<span class="o">)</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;<span class="o">=</span>&gt;  0.9092974 なので高い相関がある&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;3<span class="o">)</span> クロス統計&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;youwa &amp;lt;- c<span class="o">(</span><span class="s1">&#39;洋食&#39;</span>, <span class="s1">&#39;和食&#39;</span>, <span class="s1">&#39;和食&#39;</span>, <span class="s1">&#39;洋食&#39;</span>, <span class="s1">&#39;和食&#39;</span>, <span class="s1">&#39;洋食&#39;</span>, <span class="s1">&#39;洋食&#39;</span>, <span class="s1">&#39;和食&#39;</span>, <span class="s1">&#39;洋食&#39;</span>, <span class="s1">&#39;洋食&#39;</span>, <span class="s1">&#39;和食&#39;</span>, <span class="s1">&#39;洋食&#39;</span>, <span class="s1">&#39;和食&#39;</span>, <span class="s1">&#39;洋食&#39;</span>, <span class="s1">&#39;和食&#39;</span>, <span class="s1">&#39;和食&#39;</span>, <span class="s1">&#39;洋食&#39;</span>, <span class="s1">&#39;洋食&#39;</span>, <span class="s1">&#39;和食&#39;</span>, <span class="s1">&#39;和食&#39;</span><span class="o">)</span>
</span><span class='line'>amakara &amp;lt;- c<span class="o">(</span><span class="s1">&#39;甘党&#39;</span>, <span class="s1">&#39;辛党&#39;</span>, <span class="s1">&#39;甘党&#39;</span>, <span class="s1">&#39;甘党&#39;</span>, <span class="s1">&#39;辛党&#39;</span>, <span class="s1">&#39;辛党&#39;</span>, <span class="s1">&#39;辛党&#39;</span>, <span class="s1">&#39;辛党&#39;</span>, <span class="s1">&#39;甘党&#39;</span>, <span class="s1">&#39;甘党&#39;</span>, <span class="s1">&#39;甘党&#39;</span>, <span class="s1">&#39;甘党&#39;</span>, <span class="s1">&#39;辛党&#39;</span>, <span class="s1">&#39;辛党&#39;</span>, <span class="s1">&#39;甘党&#39;</span>, <span class="s1">&#39;辛党&#39;</span>, <span class="s1">&#39;辛党&#39;</span>, <span class="s1">&#39;甘党&#39;</span>, <span class="s1">&#39;辛党&#39;</span>, <span class="s1">&#39;辛党&#39;</span><span class="o">)</span>
</span><span class='line'>table<span class="o">(</span>youwa, amakara<span class="o">)</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;amakara&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;youwa  甘党 辛党&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;洋食    6    4&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;和食    3    7&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;4<span class="o">)</span> ファイ係数&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;youwa_zo &amp;lt;- ifelse<span class="o">(</span><span class="nv">youwa</span><span class="o">==</span><span class="s1">&#39;洋食&#39;</span>, 1, 0<span class="o">)</span>
</span><span class='line'>amaka_zo &amp;lt;- ifelse<span class="o">(</span><span class="nv">amakara</span><span class="o">==</span><span class="s1">&#39;甘党&#39;</span>, 1, 0<span class="o">)</span>
</span><span class='line'>cor<span class="o">(</span>youwa_zo, amaka_zo<span class="o">)</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;<span class="o">=</span>&gt; 0.3015113&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<h3>Rの便利メソッド</h3>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Rのメソッド&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;ifelse<span class="o">(</span>条件, 真の場合, 偽の場合<span class="o">)</span> 場合分けをする&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;hour &lt;- c<span class="o">(</span>1,3,10,12,6,3,8,4,1,5<span class="o">)</span>
</span><span class='line'>hour_zo &lt;- ifelse<span class="o">(</span>hour &gt;<span class="o">=</span> 5, <span class="s2">&quot;up&quot;</span>, <span class="s2">&quot;down&quot;</span><span class="o">)</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;<span class="o">=</span>&gt; <span class="s2">&quot;down&quot;</span> <span class="s2">&quot;down&quot;</span> <span class="s2">&quot;up&quot;</span>   <span class="s2">&quot;up&quot;</span>   <span class="s2">&quot;up&quot;</span>   <span class="s2">&quot;down&quot;</span> <span class="s2">&quot;up&quot;</span>   <span class="s2">&quot;down&quot;</span> <span class="s2">&quot;down&quot;</span> <span class="s2">&quot;up&quot;</span>&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<h2>第4章: 母集団と標本</h2>

<p>大きな集団(母集団)から取り出した少数のデータ(標本)を使って『もとの集団の性質について推測する』ための推測統計の基本的な理論についての学習。</p>

<p>母集団と標本の説明はこちら。</p>

<pre>
母集団: データ全体を指す。国民全体、工業製品全体など
標本: 母集団から取り出したデータの一部
</pre>


<p>推測統計の分類についてはこちら。</p>

<pre>
推定: 具体的な数値を用いて『母数の値は◯◯くらいだろう』という結論を導くこと
点推定: 1つの値で空いての結果を表す。日本の中学生の数学平均点が「60点」と推定
区間推定: ある程度の幅を持った区間で結果を表す。数学平均が『50-70点』と推定
</pre>


<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h2&gt;サイコロを6回ふった場合、サイコロのすべての目が1回ずつ出るのは稀&lt;/h2&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;dice6 &amp;lt;- ceiling<span class="o">(</span>runif<span class="o">(</span><span class="nv">n</span><span class="o">=</span>6, <span class="nv">min</span><span class="o">=</span>0, <span class="nv">max</span><span class="o">=</span>6<span class="o">))</span>
</span><span class='line'>table<span class="o">(</span>dice6<span class="o">)</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;dice6&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;2 3 4&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;1 2 3&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h2&gt;サイコロを600万回ふった場合、1/6に限りなく近づく&lt;/h2&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;dice6m &amp;lt;- ceiling<span class="o">(</span>runif<span class="o">(</span><span class="nv">n</span><span class="o">=</span>6000000, <span class="nv">min</span><span class="o">=</span>0, <span class="nv">max</span><span class="o">=</span>6<span class="o">))</span>
</span><span class='line'>table<span class="o">(</span>dice6m<span class="o">)</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;dice6m&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;1       2       3       4       5       6&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;999612 1000211  998870  999613 1000366 1001328&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;table<span class="o">(</span>dice6m<span class="o">)</span>/6000000&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;dice6m&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;1         2         3         4         5         6&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;0.1666020 0.1667018 0.1664783 0.1666022 0.1667277 0.1668880&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;男性が2/3、女性が1/3を表す棒グラフ&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;barplot<span class="o">(</span>c<span class="o">(</span>2/3, 1/3<span class="o">)</span>, names.arg<span class="o">=</span>c<span class="o">(</span><span class="s1">&#39;man&#39;</span>, <span class="s1">&#39;woman&#39;</span><span class="o">))</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p><img src="https://s3.yimg.com/so/7310/12550357034_2b0cda0363_z.jpg" width="618" height="640" alt="スクリーンショット 2014-02-16 8.12.38"></p>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;正規分布&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h2&gt;ある1つの数値を目標とした作業で偶然生じる偶然的な誤差の分布&lt;/h2&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;curve<span class="o">(</span>dnorm<span class="o">(</span>x, <span class="nv">mean</span><span class="o">=</span>0, <span class="nv">sd</span><span class="o">=</span>1<span class="o">)</span>, <span class="nv">from</span><span class="o">=</span>-4, <span class="nv">to</span><span class="o">=</span>4<span class="o">)</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p><img src="http://farm4.staticflickr.com/3771/13276801433_f5a02457af.jpg" width="413" height="439" alt="Rplot01"></p>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;母集団が正規分布であるような集団から無作為標本を抽出&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h2&gt;ランダムに5つの標本を取得&lt;/h2&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;hyohon &amp;lt;- rnorm<span class="o">(</span><span class="nv">n</span><span class="o">=</span>5, <span class="nv">mean</span><span class="o">=</span>50, <span class="nv">sd</span><span class="o">=</span>10<span class="o">)</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;<span class="o">=</span>&gt; 62.69624 40.50412 51.14337 58.89571 36.13923&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h2&gt;ヒストグラムを作成&lt;/h2&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;hist<span class="o">(</span>hyohon<span class="o">)</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p><img src="http://farm3.staticflickr.com/2825/13277023004_286acdaa89.jpg" width="413" height="439" alt="Rplot03"></p>

<p>上のように標本数が少ないと、正規分布かどうかはわかりません。ただし、サンプルサイズをある程度大きくするとヒストグラムは正規分布に近いものになっていきます。</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;標本数を増やした場合のヒストグラム <span class="o">=</span>&gt; 正規分布に近づく&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;hyohon &lt;- rnorm<span class="o">(</span><span class="nv">n</span><span class="o">=</span>10000, <span class="nv">mean</span><span class="o">=</span>50, <span class="nv">sd</span><span class="o">=</span>10<span class="o">)</span> <span class="c">#=&gt; 正規分布に近いヒストグラムになる</span>
</span><span class='line'>hist<span class="o">(</span>hyohon<span class="o">)</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p><img src="http://farm8.staticflickr.com/7393/13276723015_ee600af056.jpg" width="413" height="439" alt="Rplot04"></p>

<h3>練習問題をやってみた</h3>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;1<span class="o">)</span> 経験的な標本分布&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;ave &amp;lt;- numeric<span class="o">(</span><span class="nv">length</span><span class="o">=</span>5000<span class="o">)</span>
</span><span class='line'><span class="k">for</span><span class="o">(</span>i in 1:5000<span class="o">)</span> <span class="o">{</span>
</span><span class='line'>  hyohon &amp;lt;- rnorm<span class="o">(</span><span class="nv">n</span><span class="o">=</span>20, <span class="nv">mean</span><span class="o">=</span>50, <span class="nv">sd</span><span class="o">=</span>10<span class="o">)</span>
</span><span class='line'>  ave<span class="o">[</span>i<span class="o">]</span> &amp;lt;- mean<span class="o">(</span>hyohon<span class="o">)</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>hist<span class="o">(</span>ave, <span class="nv">freq</span><span class="o">=</span>FALSE<span class="o">)</span>
</span><span class='line'>curve<span class="o">(</span>dnorm<span class="o">(</span>x, <span class="nv">mean</span><span class="o">=</span>50, <span class="nv">sd</span><span class="o">=</span>sqrt<span class="o">(</span>100/20<span class="o">))</span>, <span class="nv">add</span><span class="o">=</span>TRUE<span class="o">)</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p><img src="http://farm8.staticflickr.com/7278/13276903325_6fb58ee4df.jpg" width="413" height="439" alt="Rplot05"></p>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;2<span class="o">)</span> 理論的な標本分布&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;curve<span class="o">(</span>dnorm<span class="o">(</span>x, <span class="nv">sd</span><span class="o">=</span>sqrt<span class="o">(</span>1/25<span class="o">))</span>, -3, 3<span class="o">)</span>
</span><span class='line'>curve<span class="o">(</span>dnorm<span class="o">(</span>x, <span class="nv">sd</span><span class="o">=</span>sqrt<span class="o">(</span>1/16<span class="o">))</span>, -3, 3, <span class="nv">add</span><span class="o">=</span>TRUE<span class="o">)</span>
</span><span class='line'>curve<span class="o">(</span>dnorm<span class="o">(</span>x, <span class="nv">sd</span><span class="o">=</span>sqrt<span class="o">(</span>1/9<span class="o">))</span>,  -3, 3, <span class="nv">add</span><span class="o">=</span>TRUE<span class="o">)</span>
</span><span class='line'>curve<span class="o">(</span>dnorm<span class="o">(</span>x, <span class="nv">sd</span><span class="o">=</span>sqrt<span class="o">(</span>1/4<span class="o">))</span>,  -3, 3, <span class="nv">add</span><span class="o">=</span>TRUE<span class="o">)</span>
</span><span class='line'>curve<span class="o">(</span>dnorm<span class="o">(</span>x, <span class="nv">sd</span><span class="o">=</span>sqrt<span class="o">(</span>1/1<span class="o">))</span>,  -3, 3, <span class="nv">add</span><span class="o">=</span>TRUE<span class="o">)</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p><img src="http://farm4.staticflickr.com/3696/13276920725_45b3471037.jpg" width="413" height="439" alt="Rplot06"></p>

<h3>この章で出てくるRの関数</h3>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;小数点以下の切り上げ&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;ceiling<span class="o">(</span>1.5<span class="o">)</span> <span class="c">#=&gt; 2&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;一様分布に従う乱数を発生させる&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;runif<span class="o">(</span><span class="nv">n</span><span class="o">=</span>4, <span class="nv">min</span><span class="o">=</span>6, <span class="nv">max</span><span class="o">=</span>12<span class="o">)</span>
</span><span class='line'><span class="o">[</span>1<span class="o">]</span>  8.430616 11.064664  9.835286 10.971259&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;決まったパターンの乱数を発生させる&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;set.seed<span class="o">(</span>1<span class="o">)</span> <span class="c">#=&gt; 乱数の種を1に設定するこれを指定後は常に同じ乱数が発生する&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;棒グラフを作成&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;barplot<span class="o">(</span>c<span class="o">(</span>2/3, 1/3<span class="o">)</span>, names.arg<span class="o">=</span>c<span class="o">(</span><span class="s2">&quot;man&quot;</span>, <span class="s2">&quot;woman&quot;</span><span class="o">))</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;関数の曲線を描く&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;curve<span class="o">(</span>dnorm<span class="o">(</span>x<span class="o">)</span>, <span class="nv">from</span><span class="o">=</span>-3, <span class="nv">to</span><span class="o">=</span>3<span class="o">)</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;正規分布の確率密度変数&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;dnorm<span class="o">(</span>0, <span class="nv">mean</span><span class="o">=</span>0, <span class="nv">sd</span><span class="o">=</span>1<span class="o">)</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;正規分布に従う乱数を発生&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;rnorm<span class="o">(</span><span class="nv">n</span><span class="o">=</span>5, <span class="nv">mean</span><span class="o">=</span>50, <span class="nv">sd</span><span class="o">=</span>10<span class="o">)</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;数値を格納する領域の確保&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;a &amp;lt;- numeric<span class="o">(</span><span class="nv">length</span><span class="o">=</span>10000<span class="o">)</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;連続データを作る&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h2&gt;0から20までの整数の連続データをつくる&lt;/h2&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;1:20
</span><span class='line'><span class="o">[</span>1<span class="o">]</span>  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;正規分布の確率密度関数&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;dnorm<span class="o">(</span>0, <span class="nv">mean</span><span class="o">=</span>0, <span class="nv">sd</span><span class="o">=</span>1<span class="o">)</span> <span class="c">#=&gt; 0.3989423&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;棒グラフを作成&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;barplot<span class="o">(</span>c<span class="o">(</span>3/4, 1/4<span class="o">)</span>, names.arg<span class="o">=</span>c<span class="o">(</span><span class="s1">&#39;man&#39;</span>, <span class="s1">&#39;woman&#39;</span><span class="o">))</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;関数の曲線を描く <span class="o">=</span>&gt; curve<span class="o">()</span>&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h2&gt;正規分布のグラフが出力する場合&lt;/h2&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;curve<span class="o">(</span>dnorm<span class="o">(</span>x<span class="o">)</span>, <span class="nv">from</span><span class="o">=</span>-3, <span class="nv">to</span><span class="o">=</span>3<span class="o">)</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<h2>第5章: 統計的仮説検定</h2>

<h3>検定の手順</h3>

<pre>
1) 母集団に関する帰無仮説と対立仮説を設定する
2) 検定統計量を選ぶ
3) 有意水準αの値を決める
4) データから検定統計量の実現値を求める
5) 検定統計量の実現値が棄却域に入る => 対立仮説を採用する
</pre>


<h3>検定のキーワード</h3>

<pre>
帰無仮説　　　#=>「差がない」、「効果が無い」という仮説
対立仮説　　　#=> 帰無仮説に反して「差がある」という仮説
検定統計量　　#=> 検定に用いられる標本統計量のこと
有意水準　　　#=> 帰無仮説を棄却し対立仮説を採択する基準
棄却域     　#=> 非常に生じにくい検定統計量の値の範囲 
ｐ値　　　　　#=> 帰無仮説が正しい仮説で、標本から計算した検定統計量を実現できる確率
第１種の誤り　#=> 「帰無仮説が真の時にこれを棄却する」誤り
第２種の誤り　#=> 「帰無仮説が偽の時にこれを採択する」誤り
検定力　　　　#=> 間違っている仮説を正しく棄却できる確率のこと(100% - 第２種の誤りの確率)
</pre>


<h3>標準正規分布を用いた検定の例題をやってみた</h3>

<pre>
# 標準正規分布を用いた検定の検定統計量 :
Z = mean(x) - 標準正規分布の平均/sqrt(標準正規分布の分散/標本数)
</pre>


<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>sinri &lt;- c<span class="o">(</span>13, 14, 7, 12, 10, 6, 8, 15, 4, 14, 9, 6, 10, 12, 5, 12, 8, 8, 12, 15<span class="o">)</span>
</span><span class='line'>Z &lt;- <span class="o">(</span>mean<span class="o">(</span>sinri<span class="o">)</span> - 12<span class="o">)</span>/sqrt<span class="o">(</span>10/length<span class="o">(</span>sinri<span class="o">))</span>
</span><span class='line'>qnorm<span class="o">(</span>0.025, lower.tail<span class="o">=</span>FALSE<span class="o">)</span>
</span><span class='line'>qnorm<span class="o">(</span>0.025<span class="o">)</span> <span class="c">#=&gt; -1.959964</span>
</span><span class='line'>qnorm<span class="o">(</span>0.975<span class="o">)</span> <span class="c">#=&gt; 1.959964</span>
</span><span class='line'>Z &amp;lt; qnorm<span class="o">(</span>0.025<span class="o">)</span> <span class="c">#=&gt; TRUEなので帰無仮説を棄却&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;pnorm関数からp値を求める&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;2*pnorm<span class="o">(</span>abs<span class="o">(</span>Z<span class="o">)</span>, lower.tail<span class="o">=</span>FALSE<span class="o">)</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;<span class="o">=</span>&gt; 0.004677735 &amp;lt; 有意水準0.05となるので帰無仮説を棄却&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<h3>t分布を用いた検定の例題をやってみた</h3>

<p>先述の「標準正規分布を用いた検定」は母集団の分散が計算に必須です。そこで、未知の母集団の分散の代わりに、自由度(データの標本数 - 1)のt分布を元に計算する検定があります。</p>

<pre>
# t分布を用いた検定の検定統計量 :
t = (mean(x) - 母集団の平均)/sqrt(t分布の分散/標本数)
</pre>


<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;5.4 例題&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;帰無仮説「心理テスト<span class="o">(</span>sinri<span class="o">)</span>の平均は12である」のt検定&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;sinri &lt;- c<span class="o">(</span>13, 14, 7, 12, 10, 6, 8, 15, 4, 14, 9, 6, 10, 12, 5, 12, 8, 8, 12, 15<span class="o">)</span>
</span><span class='line'>t &lt;- <span class="o">(</span>mean<span class="o">(</span>sinri<span class="o">)</span> -12<span class="o">)</span>/sqrt<span class="o">(</span>var<span class="o">(</span>sinri<span class="o">)</span>/length<span class="o">(</span>sinri<span class="o">))</span> <span class="c">#=&gt; 2.616648&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;qt<span class="o">(</span>p, df<span class="o">)</span>で自由度dfの場合の下側確率pとなるt値が求まる&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;qt<span class="o">(</span>0.025, 19<span class="o">)</span> <span class="c">#=&gt; -2.093024</span>
</span><span class='line'>qt<span class="o">(</span>0.975, 19<span class="o">)</span> <span class="c">#=&gt; 2.093024&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'>&lt;p&gt;t &amp;lt; qt<span class="o">(</span>0.025, 19<span class="o">)</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;<span class="o">=</span>&gt; TRUEなので帰無仮説を棄却&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;関数t.testによる検定&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;t.test<span class="o">(</span>sinri, <span class="nv">mu</span><span class="o">=</span>12<span class="o">)</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;One Sample t-test&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;data:  sinri&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;t <span class="o">=</span> -2.6166, <span class="nv">df</span> <span class="o">=</span> 19, p-value <span class="o">=</span> 0.01697&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;alternative hypothesis: <span class="nb">true </span>mean is not equal to 12&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;95 percent confidence interval:&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;8.400225 11.599775&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;sample estimates:&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;mean of x&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;10&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<h3>無相関検定の例題をやってみた</h3>

<p>母集団において相関が0であることを検定するための手法。</p>

<pre>
# t分布を用いた検定の検定統計量 :
t = (標本相関 * sqrt(標本数 - 2))/sqrt(1 - 標本相関)
</pre>


<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h2&gt;帰無仮説 <span class="o">=</span>&gt; toukei1とtoukei2の相関係数は0である&lt;/h2&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;toukei1 &amp;lt;- c<span class="o">(</span>6,10,6,10,5,3,5,9,3,3,11,6,11,9,7,5,8,7,7,9<span class="o">)</span>
</span><span class='line'>toukei2 &amp;lt;- c<span class="o">(</span>10,13,8,15,8,6,9,10,7,3,18,14,18,11,12,5,7,12,7,7<span class="o">)</span>
</span><span class='line'>t &amp;lt;- <span class="o">(</span>cor<span class="o">(</span>toukei1, toukei2<span class="o">)</span>*sqrt<span class="o">(</span>20-2<span class="o">))</span>/sqrt<span class="o">(</span>1-cor<span class="o">(</span>toukei1,toukei2<span class="o">)</span>&lt;sup&gt;2<span class="o">)</span>&lt;/sup&gt;&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;qt<span class="o">(</span>0.025, 18<span class="o">)</span> <span class="c">#=&gt; -2.100922</span>
</span><span class='line'>qt<span class="o">(</span>0.975, 18<span class="o">)</span> <span class="c">#=&gt;  2.100922</span>
</span><span class='line'>qt<span class="o">(</span>0.975, 18<span class="o">)</span> &amp;lt; t <span class="c">#=&gt; TRUEとなるので帰無仮説は棄却 =&gt; 相関はある&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;無相関検定を実行する関数cor.text&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;cor.test<span class="o">(</span>toukei1, toukei2<span class="o">)</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Pearson<span class="err">&#39;</span>s product-moment correlation&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;data:  toukei1 and toukei2&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;t <span class="o">=</span> 4.8057, <span class="nv">df</span> <span class="o">=</span> 18, p-value <span class="o">=</span> 0.0001416&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;alternative hypothesis: <span class="nb">true </span>correlation is not equal to 0&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;95 percent confidence interval:&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;0.4596086 0.8952048&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;sample estimates:&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;cor&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;0.749659&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<h3>独立性の検定(χ2乗検定)の例題をやってみた</h3>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h2&gt;帰無仮説 <span class="o">=</span>&gt; 「数学の好き嫌い」と「統計の好き嫌い」には差がない&lt;/h2&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;math &amp;lt;- c<span class="o">(</span><span class="s2">&quot;hate&quot;</span>, <span class="s2">&quot;hate&quot;</span>, <span class="s2">&quot;like&quot;</span>, <span class="s2">&quot;like&quot;</span>, <span class="s2">&quot;hate&quot;</span>, <span class="s2">&quot;hate&quot;</span>, <span class="s2">&quot;hate&quot;</span>, <span class="s2">&quot;hate&quot;</span>, <span class="s2">&quot;hate&quot;</span>, <span class="s2">&quot;like&quot;</span>, <span class="s2">&quot;like&quot;</span>, <span class="s2">&quot;hate&quot;</span>, <span class="s2">&quot;like&quot;</span>, <span class="s2">&quot;hate&quot;</span>, <span class="s2">&quot;hate&quot;</span>, <span class="s2">&quot;like&quot;</span>, <span class="s2">&quot;hate&quot;</span>, <span class="s2">&quot;hate&quot;</span>, <span class="s2">&quot;hate&quot;</span>, <span class="s2">&quot;hate&quot;</span><span class="o">)</span>
</span><span class='line'>staitstics &amp;lt;- c<span class="o">(</span><span class="s2">&quot;like&quot;</span>, <span class="s2">&quot;like&quot;</span>, <span class="s2">&quot;like&quot;</span>, <span class="s2">&quot;like&quot;</span>, <span class="s2">&quot;hate&quot;</span>, <span class="s2">&quot;hate&quot;</span>, <span class="s2">&quot;hate&quot;</span>, <span class="s2">&quot;hate&quot;</span>, <span class="s2">&quot;hate&quot;</span>, <span class="s2">&quot;hate&quot;</span>, <span class="s2">&quot;like&quot;</span>, <span class="s2">&quot;like&quot;</span>, <span class="s2">&quot;like&quot;</span>, <span class="s2">&quot;hate&quot;</span>, <span class="s2">&quot;like&quot;</span>, <span class="s2">&quot;hate&quot;</span>, <span class="s2">&quot;hate&quot;</span>, <span class="s2">&quot;hate&quot;</span>, <span class="s2">&quot;hate&quot;</span>, <span class="s2">&quot;hate&quot;</span><span class="o">)</span>
</span><span class='line'>table<span class="o">(</span>math, staitstics<span class="o">)</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;staitstics&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;math   hate like&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;hate   10    4&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;like    2    4&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;exp_hate_hate <span class="o">=</span> 12 * 14/20
</span><span class='line'><span class="nv">exp_like_hate</span> <span class="o">=</span> 12 *  6/20
</span><span class='line'><span class="nv">exp_hate_like</span> <span class="o">=</span>  8 * 14/20
</span><span class='line'><span class="nv">exp_like_like</span> <span class="o">=</span>  8 *  6/20
</span><span class='line'>exp_dosu &amp;lt;- c<span class="o">(</span>exp_hate_hate, exp_like_hate, exp_hate_like, exp_like_like<span class="o">)</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;<span class="o">=</span>&gt; 8.4 3.6 5.6 2.4&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;kansoku_dosu &amp;lt;- c<span class="o">(</span>10,2,4,4<span class="o">)</span>
</span><span class='line'>kai_nizyo &amp;lt;- sum<span class="o">((</span>exp_dosu -kansoku_dosu<span class="o">)</span>&lt;sup&gt;2/exp_dosu<span class="o">)</span>&lt;/sup&gt;&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;<span class="o">=</span>&gt; 2.539683&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;χ 2乗分布に従う棄却域を求める <span class="o">=</span>&gt; qchisq関数&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;qchisq<span class="o">(</span>0.95, 1<span class="o">)</span> &amp;lt; kai_nizyo <span class="c">#=&gt; FALSE&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'>&lt;h2&gt;結論: 「数学の好き嫌い」と「統計の好き嫌い」には優位な差はない&lt;/h2&gt;
</span><span class='line'>
</span><span class='line'>&lt;h2&gt;χ2乗検定を行う関数 <span class="nv">correct</span><span class="o">=</span>FALSEは連続性の補正を行わないオプション&lt;/h2&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;chisq.test<span class="o">(</span>table<span class="o">(</span>math, staitstics<span class="o">)</span>, <span class="nv">correct</span><span class="o">=</span>FALSE<span class="o">)</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Pearson<span class="err">&#39;</span>s Chi-squared <span class="nb">test</span>&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;data:  table<span class="o">(</span>math, staitstics<span class="o">)</span>&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;X-squared <span class="o">=</span> 2.5397, <span class="nv">df</span> <span class="o">=</span> 1, p-value <span class="o">=</span> 0.111&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;<span class="o">=</span>&gt; pが0.11で0.05よりも大きな値なので帰無仮説が採択される&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<h3>練習問題をやってみた</h3>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
<span class='line-number'>81</span>
<span class='line-number'>82</span>
<span class='line-number'>83</span>
<span class='line-number'>84</span>
<span class='line-number'>85</span>
<span class='line-number'>86</span>
<span class='line-number'>87</span>
<span class='line-number'>88</span>
<span class='line-number'>89</span>
<span class='line-number'>90</span>
<span class='line-number'>91</span>
<span class='line-number'>92</span>
<span class='line-number'>93</span>
<span class='line-number'>94</span>
<span class='line-number'>95</span>
<span class='line-number'>96</span>
<span class='line-number'>97</span>
<span class='line-number'>98</span>
<span class='line-number'>99</span>
<span class='line-number'>100</span>
<span class='line-number'>101</span>
<span class='line-number'>102</span>
<span class='line-number'>103</span>
<span class='line-number'>104</span>
<span class='line-number'>105</span>
<span class='line-number'>106</span>
<span class='line-number'>107</span>
<span class='line-number'>108</span>
<span class='line-number'>109</span>
<span class='line-number'>110</span>
<span class='line-number'>111</span>
<span class='line-number'>112</span>
<span class='line-number'>113</span>
<span class='line-number'>114</span>
<span class='line-number'>115</span>
<span class='line-number'>116</span>
<span class='line-number'>117</span>
<span class='line-number'>118</span>
<span class='line-number'>119</span>
<span class='line-number'>120</span>
<span class='line-number'>121</span>
<span class='line-number'>122</span>
<span class='line-number'>123</span>
<span class='line-number'>124</span>
<span class='line-number'>125</span>
<span class='line-number'>126</span>
<span class='line-number'>127</span>
<span class='line-number'>128</span>
<span class='line-number'>129</span>
<span class='line-number'>130</span>
<span class='line-number'>131</span>
<span class='line-number'>132</span>
<span class='line-number'>133</span>
<span class='line-number'>134</span>
<span class='line-number'>135</span>
<span class='line-number'>136</span>
<span class='line-number'>137</span>
<span class='line-number'>138</span>
<span class='line-number'>139</span>
<span class='line-number'>140</span>
<span class='line-number'>141</span>
<span class='line-number'>142</span>
<span class='line-number'>143</span>
<span class='line-number'>144</span>
<span class='line-number'>145</span>
<span class='line-number'>146</span>
<span class='line-number'>147</span>
<span class='line-number'>148</span>
<span class='line-number'>149</span>
<span class='line-number'>150</span>
<span class='line-number'>151</span>
<span class='line-number'>152</span>
<span class='line-number'>153</span>
<span class='line-number'>154</span>
<span class='line-number'>155</span>
<span class='line-number'>156</span>
<span class='line-number'>157</span>
<span class='line-number'>158</span>
<span class='line-number'>159</span>
<span class='line-number'>160</span>
<span class='line-number'>161</span>
<span class='line-number'>162</span>
<span class='line-number'>163</span>
<span class='line-number'>164</span>
<span class='line-number'>165</span>
<span class='line-number'>166</span>
<span class='line-number'>167</span>
<span class='line-number'>168</span>
<span class='line-number'>169</span>
<span class='line-number'>170</span>
<span class='line-number'>171</span>
<span class='line-number'>172</span>
<span class='line-number'>173</span>
<span class='line-number'>174</span>
<span class='line-number'>175</span>
<span class='line-number'>176</span>
<span class='line-number'>177</span>
<span class='line-number'>178</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h2&gt;1<span class="o">)</span>&lt;/h2&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;帰無仮説 : 平均170cmの正規分布に従うサンプルである&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;height &amp;lt;- c<span class="o">(</span>165, 150, 170, 168, 159, 170, 167, 178, 155, 159, 161, 162, 166, 171, 155, 160, 168, 172, 155, 167<span class="o">)</span>
</span><span class='line'>t.test<span class="o">(</span>height, <span class="nv">mu</span><span class="o">=</span>170<span class="o">)</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;One Sample t-test&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;data:  height&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;t <span class="o">=</span> -3.8503, <span class="nv">df</span> <span class="o">=</span> 19, p-value <span class="o">=</span> 0.001079&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;alternative hypothesis: <span class="nb">true </span>mean is not equal to 170&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;95 percent confidence interval:&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;160.584 167.216&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;sample estimates:&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;mean of x&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;163.9&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;<span class="o">=</span>&gt; <span class="nv">p</span> <span class="o">=</span> 0.00107で 0.05より小さいので帰無仮説は棄却&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h2&gt;2<span class="o">)</span>&lt;/h2&gt;
</span><span class='line'>
</span><span class='line'>&lt;h2&gt;帰無仮説 : 勉強時間とテスト結果には相関性がない&lt;/h2&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;hour &amp;lt;- c<span class="o">(</span>1,3,10,12,6,3,8,4,1,5<span class="o">)</span>
</span><span class='line'>score &amp;lt;- c<span class="o">(</span>20,40,100,80,50,50,70,50,10,60<span class="o">)</span>
</span><span class='line'>cor.test<span class="o">(</span>hour, score<span class="o">)</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Pearson<span class="s1">&#39;s product-moment correlation&lt;/h1&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="s1">&lt;h1&gt;&lt;/h1&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="s1">&lt;h1&gt;data:  hour and score&lt;/h1&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="s1">&lt;h1&gt;t = 6.1802, df = 8, p-value = 0.0002651&lt;/h1&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="s1">&lt;h1&gt;alternative hypothesis: true correlation is not equal to 0&lt;/h1&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="s1">&lt;h1&gt;95 percent confidence interval:&lt;/h1&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="s1">&lt;h1&gt;0.6542283 0.9786369&lt;/h1&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="s1">&lt;h1&gt;sample estimates:&lt;/h1&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="s1">&lt;h1&gt;cor&lt;/h1&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="s1">&lt;h1&gt;0.9092974&lt;/h1&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="s1">&lt;h2&gt;3)&lt;/h2&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="s1">&lt;h2&gt;スピアマンの順位相関係数&lt;/h2&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="s1">&lt;h2&gt;http://goo.gl/sFitJ&lt;/h2&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="s1">&lt;p&gt;cor.test(hour, score, method=&quot;spearman&quot;)&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="s1">&lt;h1&gt;Spearman&#39;</span>s rank correlation rho&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;data:  hour and score&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;S <span class="o">=</span> 10.1822, p-value <span class="o">=</span> 5.887e-05&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;alternative hypothesis: <span class="nb">true </span>rho is not equal to 0&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;sample estimates:&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;rho&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;0.9382895&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h2&gt;ケンドールの順位相関係数&lt;/h2&gt;
</span><span class='line'>
</span><span class='line'>&lt;h2&gt;http://goo.gl/2HRaa&lt;/h2&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;cor.test<span class="o">(</span>hour, score, <span class="nv">method</span><span class="o">=</span><span class="s2">&quot;kendall&quot;</span><span class="o">)</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Kendall<span class="s1">&#39;s rank correlation tau&lt;/h1&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="s1">&lt;h1&gt;&lt;/h1&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="s1">&lt;h1&gt;data:  hour and score&lt;/h1&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="s1">&lt;h1&gt;z = 3.2937, p-value = 0.0009889&lt;/h1&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="s1">&lt;h1&gt;alternative hypothesis: true tau is not equal to 0&lt;/h1&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="s1">&lt;h1&gt;sample estimates:&lt;/h1&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="s1">&lt;h1&gt;tau&lt;/h1&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="s1">&lt;h1&gt;0.8471174&lt;/h1&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="s1">&lt;h2&gt;4) χ2乗検定&lt;/h2&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="s1">&lt;p&gt;youwa &amp;lt;- c(&#39;</span>洋食<span class="s1">&#39;, &#39;</span>和食<span class="s1">&#39;, &#39;</span>和食<span class="s1">&#39;, &#39;</span>洋食<span class="s1">&#39;, &#39;</span>和食<span class="s1">&#39;, &#39;</span>洋食<span class="s1">&#39;, &#39;</span>洋食<span class="s1">&#39;, &#39;</span>和食<span class="s1">&#39;, &#39;</span>洋食<span class="s1">&#39;, &#39;</span>洋食<span class="s1">&#39;, &#39;</span>和食<span class="s1">&#39;, &#39;</span>洋食<span class="s1">&#39;, &#39;</span>和食<span class="s1">&#39;, &#39;</span>洋食<span class="s1">&#39;, &#39;</span>和食<span class="s1">&#39;, &#39;</span>和食<span class="s1">&#39;, &#39;</span>洋食<span class="s1">&#39;, &#39;</span>洋食<span class="s1">&#39;, &#39;</span>和食<span class="s1">&#39;, &#39;</span>和食<span class="s1">&#39;)</span>
</span><span class='line'><span class="s1">amakara &amp;lt;- c(&#39;</span>甘党<span class="s1">&#39;, &#39;</span>辛党<span class="s1">&#39;, &#39;</span>甘党<span class="s1">&#39;, &#39;</span>甘党<span class="s1">&#39;, &#39;</span>辛党<span class="s1">&#39;, &#39;</span>辛党<span class="s1">&#39;, &#39;</span>辛党<span class="s1">&#39;, &#39;</span>辛党<span class="s1">&#39;, &#39;</span>甘党<span class="s1">&#39;, &#39;</span>甘党<span class="s1">&#39;, &#39;</span>甘党<span class="s1">&#39;, &#39;</span>甘党<span class="s1">&#39;, &#39;</span>辛党<span class="s1">&#39;, &#39;</span>辛党<span class="s1">&#39;, &#39;</span>甘党<span class="s1">&#39;, &#39;</span>辛党<span class="s1">&#39;, &#39;</span>辛党<span class="s1">&#39;, &#39;</span>甘党<span class="s1">&#39;, &#39;</span>辛党<span class="s1">&#39;, &#39;</span>辛党<span class="s1">&#39;)</span>
</span><span class='line'><span class="s1">chisq.test(youwa, amakara)&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="s1">&lt;h1&gt;Pearson&#39;</span>s Chi-squared <span class="nb">test </span>with Yates<span class="s1">&#39; continuity correction&lt;/h1&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="s1">&lt;h1&gt;&lt;/h1&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="s1">&lt;h1&gt;data:  youwa and amakara&lt;/h1&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="s1">&lt;h1&gt;X-squared = 0.8081, df = 1, p-value = 0.3687&lt;/h1&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="s1">&lt;h2&gt;5-1) 無相関検定&lt;/h2&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="s1">&lt;p&gt;lang &amp;lt;- c(60, 40, 30, 70, 55)</span>
</span><span class='line'><span class="s1">soci &amp;lt;- c(80, 25, 35, 70, 50)</span>
</span><span class='line'><span class="s1">cor.test(lang, soci)&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="s1">&lt;h1&gt;Pearson&#39;</span>s product-moment correlation&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;data:  lang and soci&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;t <span class="o">=</span> 2.6952, <span class="nv">df</span> <span class="o">=</span> 3, p-value <span class="o">=</span> 0.07408&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;alternative hypothesis: <span class="nb">true </span>correlation is not equal to 0&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;95 percent confidence interval:&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;-0.1590624  0.9892731&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;sample estimates:&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;cor&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;0.841263&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;<span class="o">=</span>&gt; p値が有意水準<span class="o">(</span>0.05<span class="o">)</span>より高いので2つの結果に相関はない&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h2&gt;5-2<span class="o">)</span> 無相関検定 : 同じサンプルを2回使う&lt;/h2&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;lang2 &amp;lt;- rep<span class="o">(</span>lang, 2<span class="o">)</span>
</span><span class='line'>soci2 &amp;lt;- rep<span class="o">(</span>soci, 2<span class="o">)</span>
</span><span class='line'>cor.test<span class="o">(</span>lang2, soci2<span class="o">)</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Pearson<span class="err">&#39;</span>s product-moment correlation&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;data:  lang2 and soci2&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;t <span class="o">=</span> 4.4013, <span class="nv">df</span> <span class="o">=</span> 8, p-value <span class="o">=</span> 0.002283&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;alternative hypothesis: <span class="nb">true </span>correlation is not equal to 0&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;95 percent confidence interval:&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;0.4499858 0.9615658&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;sample estimates:&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;cor&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;0.841263&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;<span class="o">=</span>&gt; p値が有意水準<span class="o">(</span>0.05<span class="o">)</span>より低いので2つの結果に相関はある&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;<span class="o">=</span>&gt; <span class="o">(</span>5-1<span class="o">)</span>と<span class="o">(</span>5-2<span class="o">)</span>は相関係数<span class="o">(</span>cor<span class="o">)</span>は一致するがp値が大きく異る&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<h3>便利なRの関数</h3>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;標準正規分布の下側確率に対応する値&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;qnorm<span class="o">(</span>0.025<span class="o">)</span> <span class="c">#=&gt; -1.959964&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;標準正規分布の下側確率&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;pnorm<span class="o">(</span>-1.959964<span class="o">)</span> <span class="c">#=&gt; 0.025&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;t分布で下側確率に対応する値&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;qt<span class="o">(</span>0.025, 19<span class="o">)</span> <span class="c">#=&gt; -2.093024&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;t分布の下側確率&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;pt<span class="o">(</span>-2.093024, 19<span class="o">)</span> <span class="c">#=&gt; 0.025&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;カイ二乗分布の下側確率に対応する値&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;qchisq<span class="o">(</span>0.95, 1<span class="o">)</span> <span class="c">#=&gt; 3.841459&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;カイ二乗分布の下側確率に対応する値&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;pchisq<span class="o">(</span>3.841459, 1<span class="o">)</span> <span class="c">#=&gt; 0.95&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;t分布の確率&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;dt<span class="o">(</span>1, 19<span class="o">)</span> <span class="c">#=&gt; 0.2357406&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;カイ二乗分布の確率密度分布&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;dchisq<span class="o">(</span>3.841,1<span class="o">)</span> <span class="c">#=&gt; 0.02982808</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p><script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- responsive -->
<ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4186413323075068" data-ad-slot="2106406992" data-ad-format="auto"></ins>
<script>
  (adsbygoogle = window.adsbygoogle || []).push({});
</script></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[「統計学が最強の学問である」で学ぶ 統計学で見える新しい世界]]></title>
    <link href="http://morizyun.github.io/blog/statistics-is-best-knowledge-book-review/"/>
    <updated>2014-03-09T18:50:00+09:00</updated>
    <id>http://morizyun.github.io/blog/statistics-is-best-knowledge-book-review</id>
    <content type="html"><![CDATA[<p><a href="http://www.amazon.co.jp/gp/product/4478022216/ref=as_li_qf_sp_asin_il?ie=UTF8&camp=247&creative=1211&creativeASIN=4478022216&linkCode=as2&tag=morizyun00-22"><img border="0" src="http://ws.assoc-amazon.jp/widgets/q?_encoding=UTF8&ASIN=4478022216&Format=_SL160_&ID=AsinImage&MarketPlace=JP&ServiceVersion=20070822&WS=1&tag=morizyun00-22" width="150" style="float: left; margin: 0 20px 20px 0;" ></a><img src="http://www.assoc-amazon.jp/e/ir?t=morizyun00-22&l=as2&o=9&a=4478022216" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important;" />少しずつ統計学を勉強していく中で「統計学で学んだこと」を少しでも実践で生かせるようなマインドを養いたかったので、『<strong><a href="http://www.amazon.co.jp/gp/product/4478022216/ref=as_li_qf_sp_asin_il?ie=UTF8&amp;camp=247&amp;creative=1211&amp;creativeASIN=4478022216&amp;linkCode=as2&amp;tag=morizyun00-22">統計学が最強の学問である</a></strong>』を読み始めました。</p>

<p>この記事ではこの本の中で特に参考になった点を中心にマトメていきます！</p>

<!-- more -->


<br style="clear:both;"/>


<p><script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- square -->
<ins class="adsbygoogle" style="display:inline-block;width:336px;height:280px" data-ad-client="ca-pub-4186413323075068" data-ad-slot="5059873392"></ins>
<script>
    (adsbygoogle = window.adsbygoogle || []).push({});
</script></p>

<h2>マイクロソフトのBlogでアツい3つの専門性</h2>

<pre>
* データマイニング、機械学習、人工知能、自然言語処理
* ビジネスインテリジェンス、競合分析
* 分析、統計、特にウェブ分析、A/Bテスト、統計解析
</pre>


<h2>データをビジネスで使うための「3つの問い」</h2>

<pre>
問1) 何かの要因が変化すれば利益が向上するのか？
問2) そうした変化を起こすような行動は実際に可能か？
問3) 変化を起こす行動が可能だとしてそのコストは利益を上回るのか？
</pre>


<h2>データから適切な判断ポイントを見つけるために重要な点</h2>

<pre>
1) 適切な比較を行うこと
2) ただの集計ではなくその誤差とp値について明らかにすること
</pre>


<h2>統計学における「ランダム化」の可能性と課題</h2>

<pre>
# ランダム化の利点
* 統計的な裏付けがないのに、「正しい」と決め付けるのは間違い
* 統計的な裏付けがないのに、「間違い」と決めつけるのも間違い
* 正解がないのであればとりあえずランダムに試すのにも価値がある

# ランダム化の欠点
絶対的なサンプル数の制限 => サンプル数が少なすぎると統計学は無意味
現実は条件を制御できない => 条件を満たすことが困難な場合統計学が脆い
倫理的な問題 => 有害性や不公平などの倫理も現実にはとても重要
不公平や劣等感が感情を逆なでする => 社会に対して不信感を与えない
</pre>


<h2>回帰分析について</h2>

<pre>
# 回帰分析とは？
データ間の関係性を記述する、もしくは一方のデータから他方のデータを予測する数式を推定

# 回帰分析で注意すべき点
ばらつきをもつ現象に対する理論的な予測はそれほどうまくいかない

# 統計学ができること
サンプルの統計量から、真値の信頼度を測る

# 重回帰分析とは？
予測したい結果に影響する要因が複数ある状況へ拡張された回帰分析

# 重回帰分析で注意すべき点
重回帰分析では、2つの説明変数を掛けあわせた新しい説明変数(相互作用項)にも注意が必要

# 回帰モデルの妥当性
=> AIC(赤池情報量基準)
=> 傾向スコア: 興味のある二値の説明変数についてどちらに該当するかという確率
</pre>


<h2>統計学における6つの分野</h2>

<pre>
1) 実態把握を行う社会学調査法
=> 可能な限り偏りを減らして、求める誤差に収まる推定値を効率よく算出する

2) 原因究明のための疫学・生物統計学
=> 原因を見つけることに重視。母集団への当てはまりにはこだわらない

3) 抽象的なものを測定する心理統計学
=> いくつかの測定方法から相関性を出して、数値化したのが知能指数(IQ)

4) 機械的分類のためのデータマイニング
=> マーケティングを目的にクラスタ分析や相関を調べる。ニューラル・ネットワークやサポートベクターマシンなどのような機械学習は、予測に役立つデータマイニングのための手法

5) 自然言語処理のためのテキストマイニング
=> 大量のテキストデータから目的にマッチしたデータを抽出・集計する。形態素解析として辞書を使うMeCabや辞書を使わずに重複する単語を探しだすN-Gramなどがある

6) 演繹に感心を寄せる数量経済学
=>経済学分野で統計学を用いる。相互作用を含む説明変数の選択について慎重な検討を行う

番外) 確率に対する考え方の違うベイズ派
=> 事前確率と事後確率を使う。限られた情報と仮定を組み合わせることで、迅速に答えを出す。
</pre>


<h2>先人たちの知識をフル動員する</h2>

<p>エビデンスが重要 : 統計的レビュー、メタアナリシス。Google Scholarなどで検索可能。この先人たちの知恵をフル動員することで、「最善」にコントロールすることが重要。</p>

<h2>覚えておきたいキーワード</h2>

<pre>
最小で十分なサンプル : 正しい判断に不必要な精度を求める必要はない
χ2乗検定 : 「意味のある偏り」、「誤差」のどちらかを確かめる手法
p値 : 誤差や偶然によってたまたま差が出る確率
真値 : 無制限にデータを集めればわかる本当に知りたい値
標準誤差 : 推定値の誤差の大きさ。
</pre>


<p><script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- square -->
<ins class="adsbygoogle" style="display:inline-block;width:336px;height:280px" data-ad-client="ca-pub-4186413323075068" data-ad-slot="5059873392"></ins>
<script>
    (adsbygoogle = window.adsbygoogle || []).push({});
</script></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[統計解析 & R言語 超初心者入門資料まとめ]]></title>
    <link href="http://morizyun.github.io/blog/statistics-analysis-bigginer-r/"/>
    <updated>2014-02-23T11:00:00+09:00</updated>
    <id>http://morizyun.github.io/blog/statistics-analysis-bigginer-r</id>
    <content type="html"><![CDATA[<p><a href="http://www.amazon.co.jp/gp/product/4873116155/ref=as_li_qf_sp_asin_il?ie=UTF8&camp=247&creative=1211&creativeASIN=4873116155&linkCode=as2&tag=morizyun00-22"><img border="0" src="http://ws.assoc-amazon.jp/widgets/q?_encoding=UTF8&ASIN=4873116155&Format=_SL160_&ID=AsinImage&MarketPlace=JP&ServiceVersion=20070822&WS=1&tag=morizyun00-22" width="150" style="float: left; margin: 0 20px 20px 0;" ></a><img src="http://www.assoc-amazon.jp/e/ir?t=morizyun00-22&l=as2&o=9&a=4873116155" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important;" />興味を持ち続けていた統計解析や、R言語の勉強をはじめました！まだまだ初歩の初歩ですが、この記事がいつか偉大な一歩になれるように頑張っていく所存ですw</p>

<p>まずは、R言語や統計解析に関する入門記事や、モチベーションがアップしそうな記事をまとめていきます！</p>

<p><strong>(02/23 11:00) 初学者の人におすすめな資料にフォーカスしてまとめ直し</strong></p>

<!-- more -->


<br style="clear:both;"/>


<p><script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- square -->
<ins class="adsbygoogle" style="display:inline-block;width:336px;height:280px" data-ad-client="ca-pub-4186413323075068" data-ad-slot="5059873392"></ins>
<script>
    (adsbygoogle = window.adsbygoogle || []).push({});
</script></p>

<h2>[スライド] 統計学入門</h2>

<iframe src="http://www.slideshare.net/slideshow/embed_code/5349634" width="597" height="486" frameborder="0" marginwidth="0" marginheight="0" scrolling="no" style="border:1px solid #CCC; border-width:1px 1px 0; margin-bottom:5px; max-width: 100%;" allowfullscreen></iframe>


<p>統計学の全体像をつかむのに最適なスライドです。初歩。。。とはちょっと呼べないくらい内容が深いです！</p>

<h2>[スライド] はじめての「R」</h2>

<iframe src="http://www.slideshare.net/slideshow/embed_code/15432969" width="597" height="486" frameborder="0" marginwidth="0" marginheight="0" scrolling="no" style="border:1px solid #CCC; border-width:1px 1px 0; margin-bottom:5px; max-width: 100%;" allowfullscreen> </iframe>


<p> <div style="margin-bottom:5px"> <strong> <a href="https://www.slideshare.net/m884/japan-r-15432969" title="はじめての「R」" target="_blank">はじめての「R」</a> </strong> from <strong><a href="http://www.slideshare.net/m884" target="_blank">Masahiro Hayashi</a></strong> </div></p>

<p>統計解析を始めるときにWindowsな方も、Macな方もとっつきやすのが『<strong><a href="http://www.r-project.org/">R</a></strong>』です。このRを完全初心者をターゲットに説明をして頂けている資料です。超わかりやすいです！</p>

<h2>[デスクトップアプリ] R用のIDE: RStudio</h2>

<p><strong><a href="http://www.rstudio.com/ide/download/desktop">RStudio</a></strong><br/>
RStudioはR言語用のIDEです。Window、Mac、Linuxに対応したフリーのオープンソース・ソフトです。</p>

<h2>[CUI] Mac コマンドラインのRインストール手順</h2>

<p>パッケージ版もありますが、コマンドライン版のRをインストールする手順を紹介します。</p>

<p>まず『<strong><a href="https://xquartz.macosforge.org/landing/">XQuartz</a></strong>』からXQuartzのパッケージをDL&amp;インストールします。ちなみにこの<strong>XQuartz</strong>はX Window SystemをMacで動くようにするためのものです。</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Homebrewをupdate&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;brew update&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;コンパイラ gfortranのインストール&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;brew install gfortran&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;フォーミュラをhomebrewの中に取り込む&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;brew tap homebrew/science&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Rのインストール&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;brew install R&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Rの起動&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;R&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Rを終了するためのコマンド&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;q<span class="o">()</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<h2>[Web] とある弁当屋の統計技師</h2>

<p><a href="http://rmecab.jp/ranko/chap1.html"><img title="とある弁当屋の統計技師（データサイエンティスト）" src="http://capture.heartrails.com/400x300/cool/1392461821673?http://rmecab.jp/ranko/chap1.html" alt="http://rmecab.jp/ranko/chap1.html" width="400" height="300" /></a></p>

<p>こちらはRの導入から始まって基本的な使い方のチュートリアルまでをかなり細かく解説をしてくれています。導入の時には一番オススメなサイトです！</p>

<h2>[Web・英語] Code School Try R</h2>

<p><strong><a href="http://tryr.codeschool.com/levels/1/challenges/3">Code School Try R</a></strong><br/>
インタラクティブにRを学ぶことができるサイト。唯一日本語に対応していないのが残念。</p>

<h2>[書籍] Rによるやさしい統計学</h2>

<p><a href="http://www.amazon.co.jp/gp/product/4274067106/ref=as_li_qf_sp_asin_il?ie=UTF8&camp=247&creative=1211&creativeASIN=4274067106&linkCode=as2&tag=morizyun00-22"><img border="0" src="http://ws.assoc-amazon.jp/widgets/q?_encoding=UTF8&ASIN=4274067106&Format=_SL160_&ID=AsinImage&MarketPlace=JP&ServiceVersion=20070822&WS=1&tag=morizyun00-22" width="150" style="float: left; margin: 0 20px 20px 0;" ></a><img src="http://www.assoc-amazon.jp/e/ir?t=morizyun00-22&l=as2&o=9&a=4274067106" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important;" />これは最近購入して読み進めている『<strong><a href="http://www.amazon.co.jp/gp/product/4274067106/ref=as_li_qf_sp_asin_il?ie=UTF8&amp;camp=247&amp;creative=1211&amp;creativeASIN=4274067106&amp;linkCode=as2&amp;tag=morizyun00-22">Rによる統計解析</a></strong>』です。まだ前半戦の状態ですが、基本的には難しい数式ではなく、Rを使いながら基本的な統計の用語を学んでいけるので、初学者の人で数式の書かれた本が読めない僕のような人に超おすすめな本です。僕はあとは統計学の漫画系の書籍を買えるだけ買ってみました！そちらもおいおいレポートしていきます＾＾</p>

<br style="clear:both;"/>


<p>ここに書いていた書籍の中のメモ書きは増えてきたので『<strong><a href="/blog/easy-R-statistics-book-review/">「Rによるやさしい統計学」で学ぶ R言語と統計学の基礎徹底解説</a></strong>』に移動しました！</p>

<h2>[Web] R-Tips : Rの基本的なコマンドの使い方がわかる</h2>

<p><a href="http://cse.naro.affrc.go.jp/takezawa/r-tips/r.html"><img title="R-Tips" src="http://capture.heartrails.com/400x300/cool?http://cse.naro.affrc.go.jp/takezawa/r-tips/r.html" alt="http://cse.naro.affrc.go.jp/takezawa/r-tips/r.html" width="400" height="300" /></a></p>

<p>Rをプログラミング言語の側面で特に覚えておくべきことをわかりやすく項目別にまとめてくれています。</p>

<h2>[Web] R Markdownのシェアサイト</h2>

<p><strong><a href="http://rpubs.com/">RPubs</a></strong><br/>
RStudio用のプラグイン R Markdown形式で書かれた情報をシェアできるサイト。なかなか面白う！</p>

<p><script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- square -->
<ins class="adsbygoogle" style="display:inline-block;width:336px;height:280px" data-ad-client="ca-pub-4186413323075068" data-ad-slot="5059873392"></ins>
<script>
    (adsbygoogle = window.adsbygoogle || []).push({});
</script></p>

<h2>Speical Thanks</h2>

<p><strong><a href="http://qiita.com/dkkoma/items/8b45ce94c2c5d89d567f">MacOSX に homebrew で R をインストール - Qiita</a></strong></p>

<p><strong><a href="http://statsguild.blog102.fc2.com/blog-entry-4.html">新人OLのはじめての統計 質的変数・量的変数とはなんぞや？</a></strong></p>

<h2>変更来歴</h2>

<p>(02/23 11:00) 初学者の人におすすめな資料にフォーカスしてまとめ直し<br/></p>
]]></content>
  </entry>
  
</feed>
